{"version":3,"file":"component---src-pages-tools-collector-tsx-e73cdc7af6c723017c7d.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Add.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Delete.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/FiberManualRecord.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/HourglassEmpty.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/OpenInBrowser.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/PlayArrow.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/SaveAlt.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Stop.js","webpack://jacdac-docs/./node_modules/@mui/material/DialogActions/dialogActionsClasses.js","webpack://jacdac-docs/./node_modules/@mui/material/DialogActions/DialogActions.js","webpack://jacdac-docs/./node_modules/@mui/material/DialogContentText/dialogContentTextClasses.js","webpack://jacdac-docs/./node_modules/@mui/material/DialogContentText/DialogContentText.js","webpack://jacdac-docs/./node_modules/@mui/material/InputAdornment/inputAdornmentClasses.js","webpack://jacdac-docs/./node_modules/@mui/material/InputAdornment/InputAdornment.js","webpack://jacdac-docs/./jacdac-ts/src/clients/sensoraggregatorclient.ts","webpack://jacdac-docs/./src/components/ReadingFieldGrid.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceItem.tsx","webpack://jacdac-docs/./src/components/fs/FileSystemChip.tsx","webpack://jacdac-docs/./src/components/fs/FileNewFileChip.tsx","webpack://jacdac-docs/./src/components/fs/FileSystemNodeChip.tsx","webpack://jacdac-docs/./src/components/fs/FileTabs.tsx","webpack://jacdac-docs/./src/components/hooks/useArrowKeys.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigation.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigationProps.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/GridHeader.tsx","webpack://jacdac-docs/./src/components/ui/SelectWithLabel.tsx","webpack://jacdac-docs/./src/components/ui/SwitchWithLabel.tsx","webpack://jacdac-docs/./src/components/useGridBreakpoints.ts","webpack://jacdac-docs/./src/components/select/SelectEvent.tsx","webpack://jacdac-docs/./src/components/DataSetGrid.tsx","webpack://jacdac-docs/./src/components/hooks/useEvents.ts","webpack://jacdac-docs/./src/pages/tools/collector.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"8\"\n}), 'FiberManualRecord');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5-4-4V4h8v3.5l-4 4z\"\n}), 'HourglassEmpty');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z\"\n}), 'OpenInBrowser');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M8 5v14l11-7z\"\n}), 'PlayArrow');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"\n}), 'SaveAlt');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 6h12v12H6z\"\n}), 'Stop');\n\nexports.default = _default;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getDialogActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiDialogActions', slot);\n}\nvar dialogActionsClasses = generateUtilityClasses('MuiDialogActions', ['root', 'spacing']);\nexport default dialogActionsClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"disableSpacing\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getDialogActionsUtilityClass } from './dialogActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = ownerState => {\n  var {\n    classes,\n    disableSpacing\n  } = ownerState;\n  var slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getDialogActionsUtilityClass, classes);\n};\n\nvar DialogActionsRoot = styled('div', {\n  name: 'MuiDialogActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    var {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(_ref => {\n  var {\n    ownerState\n  } = _ref;\n  return _extends({\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8,\n    justifyContent: 'flex-end',\n    flex: '0 0 auto'\n  }, !ownerState.disableSpacing && {\n    '& > :not(:first-of-type)': {\n      marginLeft: 8\n    }\n  });\n});\nvar DialogActions = /*#__PURE__*/React.forwardRef(function DialogActions(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiDialogActions'\n  });\n\n  var {\n    className,\n    disableSpacing = false\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    disableSpacing\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(DialogActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default DialogActions;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getDialogContentTextUtilityClass(slot) {\n  return generateUtilityClass('MuiDialogContentText', slot);\n}\nvar dialogContentTextClasses = generateUtilityClasses('MuiDialogContentText', ['root']);\nexport default dialogContentTextClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"children\"];\nimport * as React from 'react';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport Typography from '../Typography';\nimport { getDialogContentTextUtilityClass } from './dialogContentTextClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = ownerState => {\n  var {\n    classes\n  } = ownerState;\n  var slots = {\n    root: ['root']\n  };\n  var composedClasses = composeClasses(slots, getDialogContentTextUtilityClass, classes);\n  return _extends({}, classes, composedClasses);\n};\n\nvar DialogContentTextRoot = styled(Typography, {\n  shouldForwardProp: prop => rootShouldForwardProp(prop) || prop === 'classes',\n  name: 'MuiDialogContentText',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({});\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiDialogContentText'\n  });\n\n  var ownerState = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(DialogContentTextRoot, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"text.secondary\",\n    ref: ref,\n    ownerState: ownerState\n  }, props, {\n    classes: classes\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default DialogContentText;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getInputAdornmentUtilityClass(slot) {\n  return generateUtilityClass('MuiInputAdornment', slot);\n}\nvar inputAdornmentClasses = generateUtilityClasses('MuiInputAdornment', ['root', 'filled', 'standard', 'outlined', 'positionStart', 'positionEnd', 'disablePointerEvents', 'hiddenLabel', 'sizeSmall']);\nexport default inputAdornmentClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"children\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport capitalize from '../utils/capitalize';\nimport Typography from '../Typography';\nimport FormControlContext from '../FormControl/FormControlContext';\nimport useFormControl from '../FormControl/useFormControl';\nimport styled from '../styles/styled';\nimport inputAdornmentClasses, { getInputAdornmentUtilityClass } from './inputAdornmentClasses';\nimport useThemeProps from '../styles/useThemeProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar overridesResolver = (props, styles) => {\n  var {\n    ownerState\n  } = props;\n  return [styles.root, styles[\"position\".concat(capitalize(ownerState.position))], ownerState.disablePointerEvents === true && styles.disablePointerEvents, styles[ownerState.variant]];\n};\n\nvar useUtilityClasses = ownerState => {\n  var {\n    classes,\n    disablePointerEvents,\n    hiddenLabel,\n    position,\n    size,\n    variant\n  } = ownerState;\n  var slots = {\n    root: ['root', disablePointerEvents && 'disablePointerEvents', position && \"position\".concat(capitalize(position)), variant, hiddenLabel && 'hiddenLabel', size && \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getInputAdornmentUtilityClass, classes);\n};\n\nvar InputAdornmentRoot = styled('div', {\n  name: 'MuiInputAdornment',\n  slot: 'Root',\n  overridesResolver\n})(_ref => {\n  var {\n    theme,\n    ownerState\n  } = _ref;\n  return _extends({\n    display: 'flex',\n    height: '0.01em',\n    // Fix IE11 flexbox alignment. To remove at some point.\n    maxHeight: '2em',\n    alignItems: 'center',\n    whiteSpace: 'nowrap',\n    color: theme.palette.action.active\n  }, ownerState.variant === 'filled' && {\n    // Styles applied to the root element if `variant=\"filled\"`.\n    [\"&.\".concat(inputAdornmentClasses.positionStart, \"&:not(.\").concat(inputAdornmentClasses.hiddenLabel, \")\")]: {\n      marginTop: 16\n    }\n  }, ownerState.position === 'start' && {\n    // Styles applied to the root element if `position=\"start\"`.\n    marginRight: 8\n  }, ownerState.position === 'end' && {\n    // Styles applied to the root element if `position=\"end\"`.\n    marginLeft: 8\n  }, ownerState.disablePointerEvents === true && {\n    // Styles applied to the root element if `disablePointerEvents={true}`.\n    pointerEvents: 'none'\n  });\n});\nvar InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiInputAdornment'\n  });\n\n  var {\n    children,\n    className,\n    component = 'div',\n    disablePointerEvents = false,\n    disableTypography = false,\n    position,\n    variant: variantProp\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var muiFormControl = useFormControl() || {};\n  var variant = variantProp;\n\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('MUI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n\n  var ownerState = _extends({}, props, {\n    hiddenLabel: muiFormControl.hiddenLabel,\n    size: muiFormControl.size,\n    disablePointerEvents,\n    position,\n    variant\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormControlContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(InputAdornmentRoot, _extends({\n      as: component,\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      ref: ref\n    }, other, {\n      children: typeof children === 'string' && !disableTypography ? /*#__PURE__*/_jsx(Typography, {\n        color: \"text.secondary\",\n        children: children\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [position === 'start' ?\n        /*#__PURE__*/\n\n        /* notranslate needed while Google Translate will not fix zero-width space issue */\n\n        /* eslint-disable-next-line react/no-danger */\n        _jsx(\"span\", {\n          className: \"notranslate\",\n          dangerouslySetInnerHTML: {\n            __html: '&#8203;'\n          }\n        }) : null, children]\n      })\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default InputAdornment;","import {\n    SensorAggregatorReg,\n    SensorAggregatorSampleType,\n    SRV_SENSOR_AGGREGATOR,\n} from \"../../jacdac-spec/dist/specconstants\"\nimport { bufferToArray, NumberFormat } from \"../jdom/buffer\"\nimport { JD_SERIAL_MAX_PAYLOAD_SIZE, REPORT_RECEIVE } from \"../jdom/constants\"\nimport { jdpack } from \"../jdom/pack\"\nimport JDRegister from \"../jdom/register\"\nimport JDService from \"../jdom/service\"\nimport { JDServiceClient } from \"../jdom/serviceclient\"\nimport {\n    isReading,\n    serviceSpecificationFromClassIdentifier,\n} from \"../jdom/spec\"\nimport { assert, bufferConcat, bufferConcatMany, fromHex } from \"../jdom/utils\"\n\nexport interface SensorAggregatorInputConfig {\n    serviceClass: number\n    // if specified, also specify serviceIndex\n    deviceId?: string\n    serviceIndex?: number\n}\n\nexport interface SensorAggregatorConfig {\n    samplingInterval: number // ms\n    samplesInWindow: number\n    inputs: SensorAggregatorInputConfig[]\n}\n\nexport interface SensorAggregatorStats {\n    numSamples: number\n    sampleSize: number\n}\n\n/**\n * A client for the sensor aggregator service\n * @category Clients\n */\nexport class SensorAggregatorClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        assert(service.serviceClass === SRV_SENSOR_AGGREGATOR)\n        this.service.registersUseAcks = true\n    }\n\n    async setInputs(cfg: SensorAggregatorConfig) {\n        function error(msg: string) {\n            throw new Error(\"Aggregator inputs: \" + msg)\n        }\n        function mapType(tp: number) {\n            switch (tp) {\n                case 1:\n                    return SensorAggregatorSampleType.U8\n                case 2:\n                    return SensorAggregatorSampleType.U16\n                case 4:\n                    return SensorAggregatorSampleType.U32\n                case -1:\n                    return SensorAggregatorSampleType.I8\n                case -2:\n                    return SensorAggregatorSampleType.I16\n                case -4:\n                    return SensorAggregatorSampleType.I32\n                default:\n                    error(\"unknown storage type\")\n            }\n        }\n\n        if (!cfg || !cfg.inputs) error(\"invalid input format\")\n\n        let totalSampleSize = 0\n        const inputs = cfg.inputs?.map(input => {\n            const { deviceId, serviceIndex, serviceClass } = input\n            if (!!deviceId !== !!serviceIndex)\n                error(`deviceId and serviceIndex must be specified together`)\n            const specification =\n                serviceSpecificationFromClassIdentifier(serviceClass)\n            if (!specification)\n                error(\n                    `missing specification from service 0x${serviceClass.toString(\n                        16\n                    )}`\n                )\n            const freeze = !!deviceId\n            const readingReg = specification.packets.find(isReading)\n            if (!readingReg)\n                error(\n                    `service 0x${serviceClass.toString(\n                        16\n                    )} does not have a reading register`\n                )\n            let sampleType: SensorAggregatorSampleType = undefined\n            let sampleSize = 0\n            let sampleShift = 0\n            for (const field of readingReg.fields) {\n                sampleSize += Math.abs(field.storage)\n                if (sampleType === undefined) {\n                    sampleType = mapType(field.storage)\n                    sampleShift = field.shift || 0\n                }\n                if (\n                    sampleType != mapType(field.storage) ||\n                    sampleShift != (field.shift || 0)\n                )\n                    error(\"heterogenous field types\")\n            }\n            totalSampleSize += sampleSize\n            return bufferConcat(\n                freeze ? fromHex(deviceId) : new Uint8Array(8),\n                jdpack(\"u32 u8 u8 u8 i8\", [\n                    serviceClass,\n                    freeze ? serviceIndex : 0,\n                    sampleSize,\n                    sampleType,\n                    sampleShift,\n                ])\n            )\n        })\n\n        if (totalSampleSize > JD_SERIAL_MAX_PAYLOAD_SIZE)\n            error(\"samples won't fit in packet\")\n\n        // u32 is x[4]\n        inputs.unshift(\n            jdpack(\"u16 u16 u32\", [\n                cfg.samplingInterval,\n                cfg.samplesInWindow,\n                0,\n            ])\n        )\n        await this.service\n            .register(SensorAggregatorReg.Inputs)\n            .sendSetAsync(bufferConcatMany(inputs))\n    }\n\n    async collect(numSamples: number) {\n        await this.service\n            .register(SensorAggregatorReg.StreamingSamples)\n            .sendSetPackedAsync([numSamples])\n    }\n\n    subscribeSample(handler: (sample: number[]) => void): () => void {\n        const reg = this.service.register(SensorAggregatorReg.CurrentSample)\n        return this.mount(\n            reg.subscribe(REPORT_RECEIVE, () =>\n                handler(bufferToArray(reg.data, NumberFormat.Float32LE))\n            )\n        )\n    }\n\n    private async getReg(id: SensorAggregatorReg, f: (v: JDRegister) => any) {\n        const reg = this.service.register(id)\n        await reg.refresh()\n        return f(reg)\n    }\n\n    async stats(): Promise<SensorAggregatorStats> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const info: any = {\n            numSamples: this.getReg(\n                SensorAggregatorReg.NumSamples,\n                r => r.intValue\n            ),\n            sampleSize: this.getReg(\n                SensorAggregatorReg.SampleSize,\n                r => r.intValue\n            ),\n        }\n        for (const id of Object.keys(info)) {\n            info[id] = await info[id]\n        }\n        return info\n    }\n}\nexport default SensorAggregatorClient\n","import { Card, CardActions, CardContent, CardHeader, Grid } from \"@mui/material\"\nimport React from \"react\"\nimport JDRegister from \"../../jacdac-ts/src/jdom/register\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FiberManualRecordIcon from \"@mui/icons-material/FiberManualRecord\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport useDeviceName from \"./devices/useDeviceName\"\nimport SwitchWithLabel from \"./ui/SwitchWithLabel\"\n\nfunction ReadingFieldGridItem(props: {\n    register: JDRegister\n    handleRegisterCheck: (register: JDRegister) => void\n    recording: boolean\n    registerChecked: boolean\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        register,\n        handleRegisterCheck,\n        recording,\n        registerChecked,\n        liveDataSet,\n    } = props\n    const { service } = register\n    const { device } = service\n    const gridBreakpoints = useGridBreakpoints()\n    const deviceName = useDeviceName(device)\n    const handleCheck = () => handleRegisterCheck(register)\n\n    return (\n        <Grid item {...gridBreakpoints} key={\"source\" + register.id}>\n            <Card>\n                <CardHeader\n                    subheader={register.service.name}\n                    title={`${deviceName}/${register.name}`}\n                />\n                <CardContent>\n                    {register.fields.map(field => (\n                        <span key={field.id}>\n                            <FiberManualRecordIcon\n                                fontSize=\"large\"\n                                style={{\n                                    verticalAlign: \"middle\",\n                                    color:\n                                        (registerChecked &&\n                                            liveDataSet?.colorOf(field)?.[0]) ||\n                                        \"#ccc\",\n                                }}\n                            />\n                            {field.name}\n                        </span>\n                    ))}\n                </CardContent>\n                <CardActions>\n                    <SwitchWithLabel\n                        disabled={recording}\n                        onChange={handleCheck}\n                        checked={registerChecked}\n                        label={`record ${deviceName}/${register.name}`}\n                    />\n                </CardActions>\n            </Card>\n        </Grid>\n    )\n}\n\nexport default function ReadingFieldGrid(props: {\n    readingRegisters: JDRegister[]\n    registerIdsChecked: string[]\n    recording?: boolean\n    handleRegisterCheck: (register: JDRegister) => void\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        readingRegisters,\n        registerIdsChecked,\n        recording,\n        handleRegisterCheck,\n        liveDataSet,\n    } = props\n\n    return (\n        <Grid container spacing={2}>\n            {readingRegisters.map(register => {\n                const registerChecked =\n                    registerIdsChecked.indexOf(register.id) > -1\n                return (\n                    <ReadingFieldGridItem\n                        key={register.id}\n                        register={register}\n                        registerChecked={registerChecked}\n                        recording={recording}\n                        handleRegisterCheck={handleRegisterCheck}\n                        liveDataSet={liveDataSet}\n                    />\n                )\n            })}\n        </Grid>\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext, useState } from \"react\"\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\"\nimport DashboardDevice from \"./DashboardDevice\"\nimport { GridBreakpoints } from \"../useGridBreakpoints\"\nimport { DashboardDeviceProps } from \"./Dashboard\"\nimport useChange from \"../../jacdac/useChange\"\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\"\nimport AppContext, { DrawerType } from \"../AppContext\"\n\nexport default function DashboardDeviceItem(\n    props: {\n        device: JDDevice\n        variant?: \"icon\" | \"\"\n    } & DashboardDeviceProps\n) {\n    const { device, variant, ...other } = props\n    const { drawerType } = useContext(AppContext)\n    const [charts, setCharts] = useState(false)\n    const breakpoints: GridBreakpoints = useChange(\n        device,\n        () => {\n            const breakpointWeight = device\n                .services()\n                .map(srv => {\n                    return (\n                        dashboardServiceWeight(srv) ||\n                        (srv.readingRegister ||\n                        srv.valueRegister ||\n                        srv.intensityRegister\n                            ? 1\n                            : 0)\n                    )\n                })\n                .reduce((c: number, v) => c + v, 0)\n\n            if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n                return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 }\n            else if (breakpointWeight == 3)\n                return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 }\n            else if (breakpointWeight == 2)\n                return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 }\n            else\n                return {\n                    xs: 6,\n                    sm: 4,\n                    md: 3,\n                    lg: 2,\n                    xl: \"auto\",\n                }\n        },\n        [drawerType, charts]\n    )\n\n    // based on size, expanded or reduce widget size\n    return (\n        <Grid item {...breakpoints}>\n            <DashboardDevice device={device} variant={variant} charts={charts} setCharts={setCharts} {...other} />\n        </Grid>\n    )\n}\n","import { Chip } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport OpenInBrowserIcon from \"@mui/icons-material/OpenInBrowser\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function FileSystemChip() {\n    const { fileSystem, showDirectoryPicker } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const handleOpenDirectory = showDirectoryPicker\n    const handleCloseDirectory = () => (fileSystem.root = undefined)\n\n    if (!fileSystem) return null\n\n    return (\n        <Chip\n            clickable\n            avatar={<OpenInBrowserIcon />}\n            label={root?.name || \"open directory\"}\n            onClick={handleOpenDirectory}\n            onDelete={root ? handleCloseDirectory : undefined}\n        />\n    )\n}\n","import {\n    Chip,\n    Dialog,\n    DialogContent,\n    DialogContentText,\n    TextField,\n    DialogActions,\n    Button,\n} from \"@mui/material\"\nimport React, { ChangeEvent, useContext, useState } from \"react\"\nimport AddIcon from \"@mui/icons-material/Add\"\nimport { useId } from \"react-use-id-hook\"\nimport FileSystemContext from \"../FileSystemContext\"\n\nexport default function FileNewFileChip(props: {\n    name?: string\n    content: string\n    label?: string\n    extension?: string\n}) {\n    const {\n        name: newFileName,\n        content: newFileContent,\n        label,\n        extension,\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const [open, setOpen] = useState(false)\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n\n    const handleOpen = () => {\n        setValue(\"\")\n        setOpen(true)\n    }\n    const handleOk = async () => {\n        setOpen(false)\n        let name = value.toLocaleLowerCase().replace(/\\s+/g, \"\")\n        if (newFileName)\n            await fileSystem.createWorkingDirectory(\n                name,\n                newFileName,\n                newFileContent\n            )\n        else {\n            if (extension) name += `.${extension}`\n            const d = fileSystem.workingDirectory || fileSystem.root\n            const f = await d.fileAsync(name, { create: true })\n            await f.write(newFileContent)\n            fileSystem.workingFile = f\n        }\n    }\n    const handleCancel = () => setOpen(false)\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <>\n            <Chip\n                clickable\n                label={label || \"new...\"}\n                icon={<AddIcon />}\n                onClick={handleOpen}\n            />\n            <Dialog open={open} fullWidth={true}>\n                <DialogContent>\n                    <DialogContentText>Choose a project name</DialogContentText>\n                    <TextField\n                        id={valueId}\n                        value={value}\n                        label=\"Value\"\n                        fullWidth={true}\n                        onChange={handleValueChange}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!value}\n                        onClick={handleOk}\n                    >\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    )\n}\n","import { Chip } from \"@mui/material\"\nimport React from \"react\"\nimport { FileSystemNode } from \"./fsdom\"\n\nexport default function FileSystemNodeChip(props: {\n    node: FileSystemNode\n    selected?: boolean\n    onClick: () => void\n}) {\n    const { node, selected, onClick } = props\n    const { name } = node\n    return (\n        <Chip\n            clickable\n            label={name.replace(/\\.json$/i, \"\")}\n            color={selected ? \"primary\" : undefined}\n            onClick={onClick}\n        />\n    )\n}\n","import { Grid } from \"@mui/material\"\nimport React, { useContext, useRef } from \"react\"\nimport useKeyboardNavigationProps from \"../hooks/useKeyboardNavigationProps\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\nimport FileSystemChip from \"./FileSystemChip\"\nimport FileNewFileChip from \"./FileNewFileChip\"\nimport FileSystemNodeChip from \"./FileSystemNodeChip\"\n\nexport default function FileTabs(props: {\n    newFileName?: string\n    newFileExtension?: string\n    newFileContent?: string\n    newFileLabel?: string\n    hideDirectories?: boolean\n    hideFiles?: boolean\n    directoryFilter?: (directory: string) => boolean\n    fileFilter?: (file: string) => boolean\n}) {\n    const {\n        newFileName,\n        newFileContent,\n        hideDirectories,\n        hideFiles,\n        directoryFilter,\n        fileFilter,\n        newFileLabel,\n        newFileExtension,\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const workingDirectory = useChange(fileSystem, _ => _?.workingDirectory)\n    const workingFile = useChange(fileSystem, _ => _?.workingFile)\n    const directories = useChange(root, _ =>\n        _?.directories?.filter(d => !directoryFilter || directoryFilter(d.name))\n    )\n    const files = useChange(root, _ =>\n        _?.files?.filter(d => !fileFilter || fileFilter(d.name))\n    )\n    const gridRef = useRef()\n    const keyboardProps = useKeyboardNavigationProps(gridRef.current)\n    const handleDirectorySelected = handle => () =>\n        (fileSystem.workingDirectory = handle)\n    const handleFileSelected = handle => () => (fileSystem.workingFile = handle)\n\n    if (!fileSystem) return null\n\n    return (\n        <Grid ref={gridRef} container spacing={1} {...keyboardProps}>\n            <Grid item>\n                <FileSystemChip />\n            </Grid>\n            {!hideDirectories &&\n                directories?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingDirectory}\n                            onClick={handleDirectorySelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {!hideFiles &&\n                files?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingFile}\n                            onClick={handleFileSelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {root && newFileContent && (\n                <Grid item>\n                    <FileNewFileChip\n                        name={newFileName}\n                        content={newFileContent}\n                        label={newFileLabel}\n                        extension={newFileExtension}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { KeyboardEvent } from \"react\"\nimport { keyCodeFromEvent } from \"./useFireKey\"\n\nconst LEFT_KEY = 37\nconst UP_KEY = 38\nconst RIGHT_KEY = 39\nconst DOWN_KEY = 40\n\nexport default function useArrowKeys(options: {\n    onLeft?: () => void\n    onRight?: () => void\n    onUp?: () => void\n    onDown?: () => void\n    symmetric?: boolean\n}) {\n    const { onLeft, onUp, onRight, onDown, symmetric } = options\n\n    if (!onLeft && !onUp && !onRight && !onDown) return undefined\n\n    const handlers = {\n        [LEFT_KEY]: onLeft,\n        [RIGHT_KEY]: onRight,\n        [UP_KEY]: onUp || (symmetric && onRight),\n        [DOWN_KEY]: onDown || (symmetric && onLeft),\n    }\n\n    return (e: KeyboardEvent<Element>) => {\n        const charCode = keyCodeFromEvent(e)\n        const handler = handlers[charCode]\n        if (handler) {\n            e.preventDefault()\n            handler()\n        }\n    }\n}\n","export default function useKeyboardNavigation(parentRef: Element) {\n    const query = '[tabindex=\"0\"]'\n    const onMove = (offset: number) => () => {\n        console.log(\"keyboard move\", { offset })\n        const focusable = Array.from<SVGElement>(\n            parentRef?.querySelectorAll(query) || []\n        )\n        if (focusable.length) {\n            const me = focusable.findIndex(f => f === document.activeElement)\n            const next = (me + offset + focusable.length) % focusable.length\n            focusable[next].focus()\n        }\n    }\n    return onMove\n}\n","import useArrowKeys from \"./useArrowKeys\"\nimport useKeyboardNavigation from \"./useKeyboardNavigation\"\n\nexport default function useKeyboardNavigationProps(\n    parentRef: Element,\n    vertical?: boolean\n) {\n    const onMove = useKeyboardNavigation(parentRef)\n\n    const onKeyDown = useArrowKeys({\n        onLeft: !vertical && onMove(-1),\n        onRight: !vertical && onMove(1),\n        onDown: vertical && onMove(1),\n        onUp: vertical && onMove(-1),\n    })\n\n    return {\n        onKeyDown: parentRef && onKeyDown,\n    }\n}\n","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import { Box, Chip, Grid, Typography } from \"@mui/material\"\nimport { styled } from \"@mui/material/styles\"\nimport React from \"react\"\nimport clsx from \"clsx\"\n\nconst PREFIX = \"GridHeader\"\n\nconst classes = {\n    hr: `${PREFIX}-hr`,\n    start: `${PREFIX}-start`,\n}\n\nconst StyledGrid = styled(Grid)(({ theme }) => ({\n    [`& .${classes.hr}`]: {\n        background: theme.palette.text.disabled,\n        marginBottom: \"unset\",\n    },\n\n    [`& .${classes.start}`]: {\n        width: theme.spacing(2),\n    },\n}))\n\nexport default function GridHeader(props: {\n    title?: string\n    count?: number\n    variant?: \"subtitle1\" | \"caption\" | \"subtitle2\"\n    action?: JSX.Element\n}) {\n    const { title, count, variant, action } = props\n\n    return (\n        <StyledGrid item xs={12}>\n            <Grid\n                container\n                direction=\"row\"\n                spacing={1}\n                justifyContent=\"center\"\n                alignItems=\"center\"\n            >\n                <Grid item>\n                    <hr className={clsx(classes.hr, classes.start)} />\n                </Grid>\n                <Grid item>\n                    {action && (\n                        <Box component=\"span\" mr={1}>\n                            {action}\n                        </Box>\n                    )}\n                    <Typography\n                        component=\"span\"\n                        variant={variant || \"subtitle1\"}\n                    >\n                        {title}\n                    </Typography>\n                    {count !== undefined && (\n                        <Box component=\"span\" ml={0.5}>\n                            <Chip label={count} />\n                        </Box>\n                    )}\n                </Grid>\n                <Grid item xs>\n                    <hr className={classes.hr} />\n                </Grid>\n            </Grid>\n        </StyledGrid>\n    )\n}\n","import {\n    FormControl,\n    FormHelperText,\n    InputLabel,\n    MenuItem,\n    Select,\n} from \"@mui/material\"\nimport React, { ChangeEvent, ReactNode } from \"react\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function SelectWithLabel(props: {\n    required?: boolean\n    label?: string\n    disabled?: boolean\n    error?: string\n    value?: string\n    placeholder?: string\n    type?: string\n    fullWidth?: boolean\n    onChange?: (ev: ChangeEvent<{ name?: string; value: unknown }>) => void\n    onClose?: (ev: ChangeEvent<unknown>) => void\n    helperText?: string\n    children?: ReactNode\n    none?: ReactNode\n}) {\n    const {\n        label,\n        fullWidth,\n        required,\n        disabled,\n        value,\n        error,\n        placeholder,\n        onChange,\n        onClose,\n        children,\n        helperText,\n        type,\n        none,\n    } = props\n    const labelId = useId()\n    const descrId = useId()\n    const id = useId()\n    const hasDescr = !!helperText || !!error\n\n    return (\n        <FormControl fullWidth={fullWidth} variant=\"outlined\">\n            <InputLabel id={labelId} key=\"label\">\n                {required ? `${label} *` : label}\n            </InputLabel>\n            <Select\n                id={id}\n                disabled={disabled}\n                label={label}\n                value={value}\n                error={!!error}\n                fullWidth={true}\n                placeholder={placeholder}\n                type={type}\n                labelId={labelId}\n                aria-describedby={hasDescr ? descrId : undefined}\n                onChange={onChange}\n                onClose={onClose}\n            >\n                {none !== undefined && (\n                    <MenuItem key={\"none\"} value={\"\"}>\n                        {none}\n                    </MenuItem>\n                )}\n                {children}\n            </Select>\n            {hasDescr && (\n                <FormHelperText id={descrId}>\n                    {error || helperText}\n                </FormHelperText>\n            )}\n        </FormControl>\n    )\n}\n","import { FormControlLabel, Switch, SwitchProps } from \"@mui/material\"\nimport React, { CSSProperties } from \"react\"\n\nexport default function SwitchWithLabel(\n    props: {\n        label: string | number | JSX.Element\n        labelPlacement?: \"end\" | \"start\" | \"top\" | \"bottom\"\n        labelStyle?: CSSProperties\n    } & SwitchProps\n) {\n    const { label, labelPlacement, labelStyle, ...rest } = props\n    return (\n        <FormControlLabel\n            control={<Switch {...rest} />}\n            label={label}\n            style={labelStyle}\n            labelPlacement={labelPlacement}\n        />\n    )\n}\n","import { GridSize } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize\n    md?: GridSize\n    sm?: GridSize\n    lg?: GridSize\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(\n    itemCount?: number\n): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n    const hasDrawer = drawerType !== DrawerType.None\n\n    if (!drawerType && itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2:\n                return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3:\n                return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (hasDrawer) return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else\n        return {\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            xl: 3,\n        }\n}\n","import React from \"react\"\nimport MenuItem from \"@mui/material/MenuItem\"\nimport JDEvent from \"../../../jacdac-ts/src/jdom/event\"\nimport SelectWithLabel from \"../ui/SelectWithLabel\"\n\nexport default function SelectEvent(props: {\n    events: JDEvent[]\n    eventId: string\n    onChange: (eventId: string) => void\n    friendlyName?: boolean\n    label?: string\n}) {\n    const { events, eventId, onChange, friendlyName, label } = props\n\n    const handleChange = (ev: React.ChangeEvent<{ value: unknown }>) => {\n        onChange(ev.target.value as string)\n    }\n\n    return (\n        <SelectWithLabel\n            helperText={label || \"choose an event\"}\n            value={eventId}\n            onChange={handleChange}\n            disabled={!events?.length}\n            none={\"None\"}\n        >\n            {events?.map(ev => (\n                <MenuItem key={ev.id} value={ev.id}>\n                    {friendlyName ? ev.friendlyName : ev.name}\n                </MenuItem>\n            ))}\n        </SelectWithLabel>\n    )\n}\n","import { Card, CardActions, CardContent, CardHeader, Grid } from \"@mui/material\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { useContext } from \"react\"\nimport { prettyDuration } from \"../../jacdac-ts/src/jdom/pretty\"\nimport ServiceManagerContext from \"./ServiceManagerContext\"\nimport Trend from \"./Trend\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveAltIcon from \"@mui/icons-material/SaveAlt\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@mui/icons-material/Delete\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\n\nexport default function DataSetGrid(props: {\n    tables: FieldDataSet[]\n    handleDeleteTable?: (table: FieldDataSet) => void\n}) {\n    const { tables, handleDeleteTable } = props\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const gridBreakpoints = useGridBreakpoints(tables?.length)\n\n    const handleDownload = (table: FieldDataSet) => () => {\n        const sep = \",\"\n        const csv = table.toCSV(sep)\n        fileStorage.saveText(`${table.name}.csv`, csv)\n    }\n    const handelDelete = (table: FieldDataSet) => () => handleDeleteTable(table)\n    return (\n        <Grid container spacing={1}>\n            {tables.map(table => (\n                <Grid item {...gridBreakpoints} key={`result` + table.id}>\n                    <Card>\n                        <CardHeader\n                            subheader={`${\n                                table.rows.length\n                            } rows, ${prettyDuration(table.duration)}`}\n                        />\n                        <CardContent>\n                            <div>{table.headers.join(\", \")}</div>\n                            <Trend dataSet={table} height={8} mini={true} />\n                        </CardContent>\n                        <CardActions>\n                            <Button\n                                variant=\"contained\"\n                                color=\"primary\"\n                                startIcon={<SaveAltIcon />}\n                                onClick={handleDownload(table)}\n                            >\n                                Save\n                            </Button>\n                            {handleDeleteTable && (\n                                <IconButtonWithTooltip\n                                    title=\"delete\"\n                                    onClick={handelDelete(table)}\n                                >\n                                    <DeleteIcon />\n                                </IconButtonWithTooltip>\n                            )}\n                        </CardActions>\n                    </Card>\n                </Grid>\n            ))}\n        </Grid>\n    )\n}\n","import { SystemEvent } from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { arrayConcatMany } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useServices from \"./useServices\"\n\nexport default function useEvents(options?: {\n    serviceName?: string\n    serviceClass?: number\n    specification?: boolean\n    ignoreChange?: boolean\n}) {\n    const { ignoreChange } = options || {}\n    const services = useServices(options)\n    let events = arrayConcatMany(services.map(srv => srv.events))\n    if (ignoreChange)\n        events = events.filter(\n            ev =>\n                ev.code !== SystemEvent.StatusCodeChanged &&\n                ev.code !== SystemEvent.Change\n        )\n    return events\n}\n","import React, { useState, useContext, useEffect } from \"react\"\nimport {\n    Grid,\n    Button,\n    TextField,\n    InputAdornment,\n    Switch,\n    Card,\n    CardActions,\n} from \"@mui/material\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport StopIcon from \"@mui/icons-material/Stop\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveIcon from \"@mui/icons-material/Save\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport HourglassEmptyIcon from \"@mui/icons-material/HourglassEmpty\"\nimport JDBus from \"../../../jacdac-ts/src/jdom/bus\"\nimport FieldDataSet from \"../../components/FieldDataSet\"\nimport Trend from \"../../components/Trend\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../../components/ui/Alert\"\nimport SelectEvent from \"../../components/select/SelectEvent\"\nimport JDEvent from \"../../../jacdac-ts/src/jdom/event\"\nimport {\n    EVENT,\n    REPORT_UPDATE,\n    SRV_SENSOR_AGGREGATOR,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport {\n    arrayConcatMany,\n    throttle,\n    uniqueMap,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport DataSetGrid from \"../../components/DataSetGrid\"\nimport JDRegister from \"../../../jacdac-ts/src/jdom/register\"\nimport ReadingFieldGrid from \"../../components/ReadingFieldGrid\"\nimport DeviceCardHeader from \"../../components/devices/DeviceCardHeader\"\nimport SensorAggregatorClient from \"../../../jacdac-ts/src/clients/sensoraggregatorclient\"\nimport JDService from \"../../../jacdac-ts/src/jdom/service\"\nimport ServiceManagerContext from \"../../components/ServiceManagerContext\"\nimport useChartPalette from \"../../components/useChartPalette\"\nimport { isSensor } from \"../../../jacdac-ts/src/jdom/spec\"\nimport useEvents from \"../../components/hooks/useEvents\"\nimport useDevices from \"../../components/hooks/useDevices\"\nimport { useId } from \"react-use-id-hook\"\nimport DashboardDeviceItem from \"../../components/dashboard/DashboardDeviceItem\"\nimport IconButtonWithTooltip from \"../../components/ui/IconButtonWithTooltip\"\nimport AppContext from \"../../components/AppContext\"\nimport AddIcon from \"@mui/icons-material/Add\"\nimport useServices from \"../../components/hooks/useServices\"\nimport { delay } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useLocalStorage from \"../../components/hooks/useLocalStorage\"\nimport FileTabs from \"../../components/fs/FileTabs\"\nimport FileSystemContext from \"../../components/FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\nimport GridHeader from \"../../components/ui/GridHeader\"\n\nconst LIVE_HORIZON = 24\nfunction createDataSet(\n    bus: JDBus,\n    registers: JDRegister[],\n    name: string,\n    live: boolean,\n    palette: string[]\n) {\n    const fields = arrayConcatMany(registers.map(reg => reg.fields))\n    const colors = fields.map((f, i) => palette[i % palette.length])\n    const set = new FieldDataSet(bus, name, fields, colors)\n    if (live) set.maxRows = LIVE_HORIZON + 4\n\n    return set\n}\n\nconst COLLECTOR_PREFIX = \"jacdac:collector:prefix\"\nconst COLLECTOR_SAMPLING_INTERVAL = \"jacdac:collector:samplinginterval\"\nconst COLLECTOR_SAMPLING_DURATION = \"jacdac:collector:samplingduration\"\nconst COLLECTOR_START_DELAY = \"jacdac:collector:startdelay\"\n\nexport default function Collector() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { toggleShowDeviceHostsDialog, enqueueSnackbar } =\n        useContext(AppContext)\n    const handleShowStartSimulator = () =>\n        toggleShowDeviceHostsDialog({ sensor: true })\n    const { fileSystem } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const [registerIdsChecked, setRegisterIdsChecked] = useState<string[]>([])\n    const [aggregatorId, setAggregatorId] = useState<string>(\"\")\n    const [recording, setRecording] = useState(false)\n    const [tables, setTables] = useState<FieldDataSet[]>([])\n    const [, setRecordingLength] = useState(0)\n\n    const [prefix, setPrefix] = useLocalStorage(COLLECTOR_PREFIX, \"data\")\n    const [samplingIntervalDelay, setSamplingIntervalDelay] = useLocalStorage(\n        COLLECTOR_SAMPLING_INTERVAL,\n        100\n    )\n    const [samplingDuration, setSamplingDuration] = useLocalStorage(\n        COLLECTOR_SAMPLING_DURATION,\n        10\n    )\n    const [startDelay, setStartDelay] = useLocalStorage(\n        COLLECTOR_START_DELAY,\n        0\n    )\n\n    const [liveDataSet, setLiveDataSet] = useState<FieldDataSet>(undefined)\n    const [, setLiveDataTimestamp] = useState(0)\n    const [triggerEventId, setTriggerEventId] = useState<string>(\"\")\n    const [countdown, setCountdown] = useState(-1)\n    const starting = countdown > 0\n    const chartPalette = useChartPalette()\n    const devices = useDevices({ ignoreInfrastructure: true, announced: true })\n    const readingRegisters = arrayConcatMany(\n        devices.map(device =>\n            device\n                .services()\n                .filter(srv => isSensor(srv.specification))\n                .map(srv => srv.readingRegister)\n        )\n    )\n    const recordingRegisters = readingRegisters.filter(\n        reg => registerIdsChecked.indexOf(reg.id) > -1\n    )\n    const recordingDevices = uniqueMap(\n        recordingRegisters,\n        reg => reg.service.device.deviceId,\n        reg => reg.service.device\n    )\n    const aggregators: JDService[] = useServices({\n        serviceClass: SRV_SENSOR_AGGREGATOR,\n    })\n    const aggregator: JDService = aggregators.find(\n        srv => srv.id == aggregatorId\n    )\n    const samplingCount = Math.ceil(\n        (samplingDuration * 1000) / samplingIntervalDelay\n    )\n    const triggerEvent = bus.node(triggerEventId) as JDEvent\n    const startEnabled = !starting && !!recordingRegisters?.length\n    const events = useEvents({ ignoreChange: true })\n    const samplingIntervalId = useId()\n    const samplingDurationId = useId()\n    const startDelayId = useId()\n    const prefixId = useId()\n\n    useEffect(() => {\n        //console.log(`trigger event`, triggerEventId, triggerEvent)\n        const un = triggerEvent?.subscribe(EVENT, () => {\n            //console.log(`trigger toggle recoring`, recording)\n            toggleRecording()\n        })\n        //console.log(`mounted`, triggerEvent)\n        return () => {\n            //console.log(`unmount trigger`)\n            if (un) un()\n        }\n    }, [triggerEvent, recording, registerIdsChecked, liveDataSet])\n\n    const createSensorConfig = () => ({\n        samplingInterval: samplingIntervalDelay,\n        samplesInWindow: 10,\n        inputs: recordingRegisters.map(reg => ({\n            serviceClass: reg.service.serviceClass,\n        })),\n    })\n    const saveConfig = () => {\n        const sensorConfig = JSON.stringify(createSensorConfig(), null, 2)\n        fileStorage.saveText(\n            `${prefix || \"jacdac\"}-sensor-config.json`,\n            sensorConfig\n        )\n    }\n    const newDataSet = (registerIds: string[], live: boolean) =>\n        registerIds.length\n            ? createDataSet(\n                  bus,\n                  readingRegisters.filter(\n                      reg => registerIds.indexOf(reg.id) > -1\n                  ),\n                  `${prefix || \"data\"}${tables.length}`,\n                  live,\n                  chartPalette\n              )\n            : undefined\n    const handleRegisterCheck = (reg: JDRegister) => {\n        const i = registerIdsChecked.indexOf(reg.id)\n        if (i > -1) registerIdsChecked.splice(i, 1)\n        else registerIdsChecked.push(reg.id)\n        registerIdsChecked.sort()\n        setRegisterIdsChecked([...registerIdsChecked])\n        setLiveDataSet(newDataSet(registerIdsChecked, true))\n    }\n    const stopRecording = () => {\n        if (recording) {\n            if (root) {\n                const csv = liveDataSet.toCSV()\n                // write async\n                const now = new Date()\n                const name = `data-${now.getFullYear()}-${\n                    now.getMonth() + 1\n                }-${now.getDate()}-${now.getHours()}-${now.getMinutes()}-${now.getSeconds()}.csv`\n                root.fileAsync(name, { create: true }).then(f => f.write(csv))\n            }\n            setTables([liveDataSet, ...tables])\n            setLiveDataSet(newDataSet(registerIdsChecked, true))\n            setRecording(false)\n\n            enqueueSnackbar(`recording stopped`)\n        }\n    }\n    const startRecording = async () => {\n        if (!starting && !recording && recordingRegisters.length) {\n            // do countdown\n            if (startDelay > 0) {\n                let countdown = Math.ceil(startDelay)\n                while (countdown > 0) {\n                    setCountdown(countdown)\n                    await delay(1000)\n                    countdown--\n                }\n            }\n            setCountdown(-1)\n            setLiveDataSet(newDataSet(registerIdsChecked, false))\n            setRecording(true)\n            if (aggregator) {\n                const client = new SensorAggregatorClient(aggregator)\n                await client.setInputs(createSensorConfig())\n                client.collect(samplingCount)\n            }\n            enqueueSnackbar(`recording started`)\n        }\n    }\n    const startStreamingRegisters = () => {\n        console.log(`start streaming`)\n        const streamers = recordingRegisters?.map(reg =>\n            reg.subscribe(REPORT_UPDATE, () => {})\n        )\n        return () => {\n            console.log(`stop streaming`)\n            streamers.map(streamer => streamer())\n        }\n    }\n    const toggleRecording = () => {\n        if (recording) stopRecording()\n        else startRecording()\n    }\n    const handleSamplingIntervalChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setSamplingIntervalDelay(v)\n    }\n    const handleSamplingDurationChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setSamplingDuration(v)\n    }\n    const handleStartDelayChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setStartDelay(v)\n    }\n    const handlePrefixChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setPrefix(event.target.value.trim())\n    }\n    const handleTriggerChange = (eventId: string) => setTriggerEventId(eventId)\n    const handleDeleteTable = (table: FieldDataSet) => {\n        const i = tables.indexOf(table)\n        if (i > -1) {\n            tables.splice(i, 1)\n            setTables([...tables])\n        }\n    }\n    const handleAggregatorChecked = (srv: JDService) => () => {\n        const id = srv?.id == aggregatorId ? \"\" : srv?.id\n        setAggregatorId(id)\n    }\n    const updateLiveData = () => {\n        setLiveDataSet(liveDataSet)\n        setRecordingLength(liveDataSet.rows.length)\n        setLiveDataTimestamp(bus.timestamp)\n    }\n    const throttleUpdate = throttle(() => updateLiveData(), 30)\n    // data collection\n    // interval add data entry\n    const addRow = (values?: number[]) => {\n        if (!liveDataSet) return\n        //console.log(values)\n        liveDataSet.addRow(values)\n        if (recording && liveDataSet.length >= samplingCount) {\n            // stop recording\n            updateLiveData()\n            stopRecording()\n        } else {\n            throttleUpdate()\n        }\n    }\n    // collecting\n    useEffect(() => {\n        if (aggregator && recording) return undefined\n        const interval = setInterval(() => addRow(), samplingIntervalDelay)\n        const stopStreaming = startStreamingRegisters()\n        return () => {\n            clearInterval(interval)\n            stopStreaming()\n        }\n    }, [\n        recording,\n        samplingIntervalDelay,\n        samplingCount,\n        registerIdsChecked,\n        aggregator,\n    ])\n    useEffect(() => {\n        if (aggregator) {\n            const client = new SensorAggregatorClient(aggregator)\n            return client.subscribeSample(values => addRow(values))\n        }\n        return () => {}\n    }, [recording, liveDataSet, registerIdsChecked, aggregator])\n\n    return (\n        <>\n            <h1>Data Collector</h1>\n            <p>\n                Use this page to collect streaming data from Jacdac devices into\n                various output formats.\n            </p>\n            <Grid container spacing={1}>\n                {!!aggregators.length && (\n                    <>\n                        <GridHeader title=\"(Optional) Choose a data aggregator\" />\n                        {aggregators.map(aggregator => (\n                            <Grid key={aggregator.id} item xs={4}>\n                                <Card>\n                                    <DeviceCardHeader\n                                        device={aggregator.device}\n                                        showAvatar={true}\n                                    />\n                                    <CardActions>\n                                        <Switch\n                                            checked={\n                                                aggregatorId == aggregator.id\n                                            }\n                                            disabled={recording}\n                                            onChange={handleAggregatorChecked(\n                                                aggregator\n                                            )}\n                                        />\n                                    </CardActions>\n                                </Card>\n                            </Grid>\n                        ))}\n                    </>\n                )}\n                <GridHeader\n                    title=\"Sensors\"\n                    action={\n                        <IconButtonWithTooltip\n                            title=\"start simulator\"\n                            onClick={handleShowStartSimulator}\n                        >\n                            <AddIcon />\n                        </IconButtonWithTooltip>\n                    }\n                />\n                {!readingRegisters.length && (\n                    <Grid item xs={12}>\n                        <Alert severity=\"info\">Waiting for sensor...</Alert>\n                    </Grid>\n                )}\n                {!!readingRegisters.length && (\n                    <Grid item xs={12}>\n                        <ReadingFieldGrid\n                            readingRegisters={readingRegisters}\n                            registerIdsChecked={registerIdsChecked}\n                            recording={recording}\n                            liveDataSet={liveDataSet}\n                            handleRegisterCheck={handleRegisterCheck}\n                        />\n                    </Grid>\n                )}\n                <GridHeader title=\"Recorder\" />\n                {aggregator && (\n                    <Grid item xs={12}>\n                        <Alert severity=\"info\">\n                            Record the sensor input configuration in order to up\n                            your ML model later on.\n                        </Alert>\n                    </Grid>\n                )}\n                <Grid item xs={12}>\n                    <Button\n                        size=\"large\"\n                        variant=\"contained\"\n                        color={recording ? \"secondary\" : \"primary\"}\n                        title={\n                            starting\n                                ? `starting in ${countdown}`\n                                : recording\n                                ? \"stop recording\"\n                                : \"start recording\"\n                        }\n                        onClick={toggleRecording}\n                        startIcon={\n                            starting ? (\n                                <HourglassEmptyIcon />\n                            ) : recording ? (\n                                <StopIcon />\n                            ) : (\n                                <PlayArrowIcon />\n                            )\n                        }\n                        disabled={!startEnabled}\n                    >\n                        {starting\n                            ? countdown + \"\"\n                            : recording\n                            ? \"Stop\"\n                            : \"Start\"}\n                    </Button>\n                </Grid>\n                <Grid item xs={12} mt={1}>\n                    <Grid container direction=\"row\" spacing={1}>\n                        {aggregator && (\n                            <Grid item>\n                                <Button\n                                    variant=\"contained\"\n                                    title=\"save sensor input configuration\"\n                                    onClick={saveConfig}\n                                    startIcon={<SaveIcon />}\n                                    disabled={recording}\n                                >\n                                    Save configuration\n                                </Button>\n                            </Grid>\n                        )}\n                        <Grid item>\n                            <TextField\n                                id={samplingIntervalId}\n                                disabled={recording}\n                                type=\"number\"\n                                label=\"Sampling interval\"\n                                value={samplingIntervalDelay}\n                                variant=\"outlined\"\n                                InputProps={{\n                                    startAdornment: (\n                                        <InputAdornment position=\"start\">\n                                            ms\n                                        </InputAdornment>\n                                    ),\n                                }}\n                                onChange={handleSamplingIntervalChange}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <TextField\n                                id={samplingDurationId}\n                                type=\"number\"\n                                disabled={recording}\n                                label=\"Sampling duration\"\n                                value={samplingDuration}\n                                variant=\"outlined\"\n                                InputProps={{\n                                    startAdornment: (\n                                        <InputAdornment position=\"start\">\n                                            s\n                                        </InputAdornment>\n                                    ),\n                                }}\n                                onChange={handleSamplingDurationChange}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <TextField\n                                id={startDelayId}\n                                type=\"number\"\n                                disabled={recording}\n                                label=\"Start delay\"\n                                value={startDelay}\n                                variant=\"outlined\"\n                                InputProps={{\n                                    startAdornment: (\n                                        <InputAdornment position=\"start\">\n                                            s\n                                        </InputAdornment>\n                                    ),\n                                }}\n                                onChange={handleStartDelayChange}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <TextField\n                                id={prefixId}\n                                disabled={recording}\n                                label=\"File name prefix\"\n                                value={prefix}\n                                variant=\"outlined\"\n                                onChange={handlePrefixChange}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <SelectEvent\n                                events={events}\n                                eventId={triggerEventId}\n                                onChange={handleTriggerChange}\n                                label={\"Start Event\"}\n                                friendlyName={true}\n                            />\n                        </Grid>\n                    </Grid>\n                </Grid>\n                {recordingDevices?.map(device => (\n                    <DashboardDeviceItem\n                        key={device.id}\n                        device={device}\n                        showAvatar={true}\n                        showHeader={true}\n                    />\n                ))}\n                {liveDataSet && (\n                    <Grid item xs={12}>\n                        <Trend\n                            key=\"trends\"\n                            height={12}\n                            dataSet={liveDataSet}\n                            horizon={LIVE_HORIZON}\n                            dot={true}\n                            gradient={true}\n                        />\n                    </Grid>\n                )}\n                <GridHeader title=\"Recordings\" />\n                <Grid item xs={12}>\n                    <FileTabs hideFiles={true} hideDirectories={true} />\n                </Grid>\n                {!!tables.length && (\n                    <Grid item xs={12}>\n                        <DataSetGrid\n                            tables={tables}\n                            handleDeleteTable={handleDeleteTable}\n                        />\n                    </Grid>\n                )}\n            </Grid>\n        </>\n    )\n}\n"],"names":["SensorAggregatorReg","SensorAggregatorSampleType","SRV_SENSOR_AGGREGATOR","bufferToArray","NumberFormat","JD_SERIAL_MAX_PAYLOAD_SIZE","REPORT_RECEIVE","jdpack","JDServiceClient","isReading","serviceSpecificationFromClassIdentifier","assert","bufferConcat","bufferConcatMany","fromHex","SensorAggregatorClient","service","serviceClass","registersUseAcks","setInputs","cfg","error","msg","Error","mapType","tp","U8","U16","U32","I8","I16","I32","inputs","totalSampleSize","map","input","deviceId","serviceIndex","specification","toString","freeze","readingReg","packets","find","sampleType","undefined","sampleSize","sampleShift","field","fields","Math","abs","storage","shift","Uint8Array","unshift","samplingInterval","samplesInWindow","register","Inputs","sendSetAsync","collect","numSamples","StreamingSamples","sendSetPackedAsync","subscribeSample","handler","reg","CurrentSample","mount","subscribe","data","Float32LE","getReg","id","f","refresh","stats","info","NumSamples","r","intValue","SampleSize","Object","keys","Card","CardActions","CardContent","CardHeader","Grid","React","useGridBreakpoints","FiberManualRecordIcon","useDeviceName","SwitchWithLabel","ReadingFieldGridItem","props","handleRegisterCheck","recording","registerChecked","liveDataSet","device","gridBreakpoints","deviceName","handleCheck","name","verticalAlign","color","colorOf","ReadingFieldGrid","readingRegisters","registerIdsChecked","indexOf","useContext","useState","DashboardDevice","useChange","dashboardServiceWeight","AppContext","DrawerType","DashboardDeviceItem","variant","other","drawerType","charts","setCharts","breakpoints","breakpointWeight","services","srv","readingRegister","valueRegister","intensityRegister","reduce","c","v","None","xs","sm","md","lg","xl","Chip","OpenInBrowserIcon","FileSystemContext","FileSystemChip","fileSystem","showDirectoryPicker","root","_","handleOpenDirectory","handleCloseDirectory","Dialog","DialogContent","DialogContentText","TextField","DialogActions","Button","AddIcon","useId","FileNewFileChip","newFileName","content","newFileContent","label","extension","open","setOpen","value","setValue","valueId","handleOpen","handleOk","toLocaleLowerCase","replace","createWorkingDirectory","d","workingDirectory","fileAsync","create","write","workingFile","handleCancel","handleValueChange","event","target","FileSystemNodeChip","node","selected","onClick","useRef","useKeyboardNavigationProps","FileTabs","hideDirectories","hideFiles","directoryFilter","fileFilter","newFileLabel","newFileExtension","directories","filter","files","gridRef","keyboardProps","current","handleDirectorySelected","handle","handleFileSelected","keyCodeFromEvent","LEFT_KEY","UP_KEY","RIGHT_KEY","DOWN_KEY","useArrowKeys","options","onLeft","onUp","onRight","onDown","symmetric","handlers","e","charCode","preventDefault","useKeyboardNavigation","parentRef","query","onMove","offset","console","log","focusable","Array","from","querySelectorAll","length","me","findIndex","document","activeElement","next","focus","vertical","onKeyDown","JacdacContext","useServices","bus","JSON","stringify","Box","Typography","styled","clsx","PREFIX","classes","hr","start","StyledGrid","theme","background","palette","text","disabled","marginBottom","width","spacing","GridHeader","title","count","action","FormControl","FormHelperText","InputLabel","MenuItem","Select","SelectWithLabel","fullWidth","required","placeholder","onChange","onClose","children","helperText","type","none","labelId","descrId","hasDescr","FormControlLabel","Switch","labelPlacement","labelStyle","rest","itemCount","hasDrawer","SelectEvent","events","eventId","friendlyName","handleChange","ev","prettyDuration","ServiceManagerContext","Trend","SaveAltIcon","DeleteIcon","IconButtonWithTooltip","DataSetGrid","tables","handleDeleteTable","fileStorage","handleDownload","table","sep","csv","toCSV","saveText","handelDelete","rows","duration","headers","join","SystemEvent","arrayConcatMany","useEvents","ignoreChange","code","StatusCodeChanged","Change","useEffect","InputAdornment","PlayArrowIcon","StopIcon","SaveIcon","HourglassEmptyIcon","FieldDataSet","Alert","EVENT","REPORT_UPDATE","throttle","uniqueMap","DeviceCardHeader","useChartPalette","isSensor","useDevices","delay","useLocalStorage","LIVE_HORIZON","createDataSet","registers","live","colors","i","set","maxRows","COLLECTOR_PREFIX","COLLECTOR_SAMPLING_INTERVAL","COLLECTOR_SAMPLING_DURATION","COLLECTOR_START_DELAY","Collector","toggleShowDeviceHostsDialog","enqueueSnackbar","handleShowStartSimulator","sensor","setRegisterIdsChecked","aggregatorId","setAggregatorId","setRecording","setTables","setRecordingLength","prefix","setPrefix","samplingIntervalDelay","setSamplingIntervalDelay","samplingDuration","setSamplingDuration","startDelay","setStartDelay","setLiveDataSet","setLiveDataTimestamp","triggerEventId","setTriggerEventId","countdown","setCountdown","starting","chartPalette","devices","ignoreInfrastructure","announced","recordingRegisters","recordingDevices","aggregators","aggregator","samplingCount","ceil","triggerEvent","startEnabled","samplingIntervalId","samplingDurationId","startDelayId","prefixId","un","toggleRecording","createSensorConfig","saveConfig","sensorConfig","newDataSet","registerIds","splice","push","sort","stopRecording","now","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","then","startRecording","client","startStreamingRegisters","streamers","streamer","handleSamplingIntervalChange","parseInt","isNaN","handleSamplingDurationChange","handleStartDelayChange","handlePrefixChange","trim","handleTriggerChange","handleAggregatorChecked","updateLiveData","timestamp","throttleUpdate","addRow","values","interval","setInterval","stopStreaming","clearInterval","startAdornment"],"sourceRoot":""}