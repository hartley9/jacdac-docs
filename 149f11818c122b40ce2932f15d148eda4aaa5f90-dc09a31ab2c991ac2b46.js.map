{"version":3,"file":"149f11818c122b40ce2932f15d148eda4aaa5f90-dc09a31ab2c991ac2b46.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Category.js","webpack://jacdac-docs/./src/components/IDChip.tsx","webpack://jacdac-docs/./src/components/ServiceButton.tsx","webpack://jacdac-docs/./src/components/devices/DeviceCard.tsx","webpack://jacdac-docs/./src/components/ui/AutoGrid.tsx","webpack://jacdac-docs/./src/components/ServiceRegisters.tsx","webpack://jacdac-docs/./src/components/EventInput.tsx","webpack://jacdac-docs/./src/components/ServiceEvents.tsx","webpack://jacdac-docs/./jacdac-ts/src/jdom/command.ts","webpack://jacdac-docs/./src/components/CommandInput.tsx","webpack://jacdac-docs/./src/components/DecodedPacketItem.tsx","webpack://jacdac-docs/./src/components/ServiceCard.tsx","webpack://jacdac-docs/./src/components/devices/DeviceList.tsx","webpack://jacdac-docs/./src/components/KindChip.tsx","webpack://jacdac-docs/./src/components/PacketMembersChip.tsx","webpack://jacdac-docs/./src/components/specification/PacketSpecificationSource.tsx","webpack://jacdac-docs/./src/components/specification/PacketSpecification.tsx","webpack://jacdac-docs/./src/components/specification/ServiceSpecificationStatusAlert.tsx","webpack://jacdac-docs/./src/components/ui/Markdown.tsx","webpack://jacdac-docs/./src/components/ui/Snippet.tsx","webpack://jacdac-docs/./src/components/useGridBreakpoints.ts","webpack://jacdac-docs/./src/jacdac/useEventCount.ts"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m12 2-5.5 9h11z\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"17.5\",\n  cy: \"17.5\",\n  r: \"4.5\"\n}, \"1\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 13.5h8v8H3z\"\n}, \"2\")], 'Category');\n\nexports.default = _default;","import React, { useContext } from \"react\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FingerprintIcon from \"@mui/icons-material/Fingerprint\"\nimport { Chip, IconButton } from \"@mui/material\"\nimport PacketsContext from \"./PacketsContext\"\nimport AppContext, { DrawerType } from \"./AppContext\"\nimport Tooltip from \"./ui/Tooltip\"\n\nexport default function IDChip(props: {\n    id: number | string\n    className?: string\n    filter?: string\n}) {\n    const { id, className, filter } = props\n    const { filter: packetFilter, setFilter: setPacketFilter } =\n        useContext(PacketsContext)\n    const { setDrawerType } = useContext(AppContext)\n\n    const ids =\n        typeof id === \"string\"\n            ? id\n            : `0x${id !== undefined ? (id as number).toString(16) : \"???\"}`\n    const filtered = packetFilter && packetFilter.indexOf(filter) > -1\n    const handleFilterClick = () => {\n        if (filtered) setPacketFilter(packetFilter?.replace(filter, \"\")?.trim())\n        else setPacketFilter(packetFilter?.trim() + \" \" + filter)\n        setDrawerType(DrawerType.Packets)\n    }\n    const icon = <FingerprintIcon />\n    const title = filtered ? `remove filter ${filter}` : `add filter ${filter}`\n    if (filter)\n        return (\n            <Tooltip\n                title={\n                    filtered\n                        ? `remove filter ${filter}`\n                        : `add filter ${filter}`\n                }\n            >\n                <span>\n                    <Chip\n                        className={className}\n                        size=\"small\"\n                        icon={\n                            <IconButton\n                                aria-label={title}\n                                onClick={handleFilterClick}\n                                size=\"large\"\n                            >\n                                {icon}\n                            </IconButton>\n                        }\n                        label={ids}\n                    />\n                </span>\n            </Tooltip>\n        )\n    else\n        return (\n            <Chip\n                aria-label={title}\n                className={className}\n                size=\"small\"\n                icon={icon}\n                title={`identifier ${ids}`}\n                label={ids}\n            />\n        )\n}\n","import { ButtonProps } from \"@mui/material\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\n\nexport default function ServiceButton(\n    props: { service: JDService; onClick?: () => void } & ButtonProps\n) {\n    const { service, onClick, ...others } = props\n    return (\n        <Button\n            {...others}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onClick}\n        >\n            {service.name}\n        </Button>\n    )\n}\n","import React, { ReactNode } from \"react\"\nimport { styled } from \"@mui/material/styles\"\n// tslint:disable-next-line: no-submodule-imports\nimport Card from \"@mui/material/Card\"\n// tslint:disable-next-line: no-submodule-imports\nimport CardContent from \"@mui/material/CardContent\"\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\"\nimport { ControlReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport ServiceButton from \"../ServiceButton\"\nimport useChange from \"../../jacdac/useChange\"\nimport { navigate } from \"gatsby\"\nimport JDService from \"../../../jacdac-ts/src/jdom/service\"\nimport { CardActions } from \"@mui/material\"\nimport DeviceCardHeader from \"./DeviceCardHeader\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport { DeviceLostAlert } from \"../alert/DeviceLostAlert\"\nimport { isInfrastructure } from \"../../../jacdac-ts/src/jdom/spec\"\n\nconst PREFIX = \"DeviceCard\"\n\nconst classes = {\n    root: `${PREFIX}-root`,\n    bullet: `${PREFIX}-bullet`,\n    title: `${PREFIX}-title`,\n    pos: `${PREFIX}-pos`,\n}\n\nconst StyledCard = styled(Card)(() => ({\n    [`&.${classes.root}`]: {},\n\n    [`& .${classes.bullet}`]: {\n        display: \"inline-block\",\n        margin: \"0 2px\",\n        transform: \"scale(0.8)\",\n    },\n\n    [`& .${classes.title}`]: {\n        fontSize: 14,\n    },\n\n    [`& .${classes.pos}`]: {\n        marginBottom: 12,\n    },\n}))\n\nfunction navigateToService(service: JDService) {\n    const spec = service.specification\n    if (spec) navigate(`/services/${spec.shortId}/`) // todo spec\n}\n\nfunction DeviceDescription(props: { device: JDDevice }) {\n    const { device } = props\n    const register = useChange(device, _ =>\n        _?.service(0)?.register(ControlReg.DeviceDescription)\n    )\n    const [description] = useRegisterUnpackedValue<[string]>(register)\n    return <span>{description || \"\"}</span>\n}\n\nexport default function DeviceCard(props: {\n    device: JDDevice\n    children?: ReactNode\n    action?: ReactNode\n    content?: ReactNode\n    showDeviceId?: boolean\n    showServices?: boolean\n    showTemperature?: boolean\n    showFirmware?: boolean\n    showDescription?: boolean\n}) {\n    const {\n        device,\n        children,\n        action,\n        content,\n        showDeviceId,\n        showDescription,\n        showTemperature,\n        showFirmware,\n        showServices,\n    } = props\n\n    const services = useChange(device, () =>\n        device.services().filter(srv => !isInfrastructure(srv.specification))\n    )\n\n    return (\n        <StyledCard className={classes.root}>\n            <DeviceCardHeader\n                device={device}\n                showDeviceId={showDeviceId}\n                showTemperature={showTemperature}\n                showFirmware={showFirmware}\n                showMedia={true}\n            />\n            {(showDescription || content) && (\n                <CardContent>\n                    {<DeviceLostAlert device={device} />}\n                    {showDescription && <DeviceDescription device={device} />}\n                    {content}\n                </CardContent>\n            )}\n            <CardActions>\n                {action}\n                {showServices &&\n                    services?.map(service => (\n                        <ServiceButton\n                            key={service.id}\n                            service={service}\n                            onClick={() => navigateToService(service)}\n                        />\n                    ))}\n            </CardActions>\n            {children}\n        </StyledCard>\n    )\n}\n","import { Grid, GridSpacing } from \"@mui/material\"\nimport React from \"react\"\n\nexport default function AutoGrid(props: {\n    children: JSX.Element | JSX.Element[]\n    spacing?: GridSpacing\n}) {\n    const { children, spacing } = props\n    if (children && Array.isArray(children))\n        return (\n            <Grid container spacing={spacing}>\n                {(children as JSX.Element[]).map((child, i) => (\n                    <Grid item xs={12} key={child.key || i}>\n                        {child}\n                    </Grid>\n                ))}\n            </Grid>\n        )\n    else return children as JSX.Element\n}\n","import React, { useMemo } from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport { isRegister } from \"../../jacdac-ts/src/jdom/spec\"\nimport RegisterInput from \"./RegisterInput\"\nimport useChange from \"../jacdac/useChange\"\nimport AutoGrid from \"./ui/AutoGrid\"\nimport JDRegister from \"../../jacdac-ts/src/jdom/register\"\nimport { SystemReg } from \"../../jacdac-ts/src/jdom/constants\"\n\nexport default function ServiceRegisters(props: {\n    service: JDService\n    registerIdentifiers?: number[]\n    filter?: (register: JDRegister) => boolean\n    showRegisterName?: boolean\n    hideMissingValues?: boolean\n    showTrends?: boolean\n}) {\n    const {\n        service,\n        registerIdentifiers,\n        filter,\n        showRegisterName,\n        hideMissingValues,\n        showTrends,\n    } = props\n    const specification = useChange(service, spec => spec.specification)\n    const registers = useMemo(() => {\n        const packets = specification?.packets\n        const ids =\n            registerIdentifiers ||\n            packets?.filter(pkt => isRegister(pkt))?.map(pkt => pkt.identifier)\n        let r = ids?.map(id => service.register(id))?.filter(reg => !!reg) || []\n        if (filter) r = r.filter(filter)\n        return r\n    }, [specification, registerIdentifiers, filter])\n\n    return (\n        <AutoGrid spacing={1}>\n            {registers.map(register => (\n                <RegisterInput\n                    key={register.id}\n                    register={register}\n                    showRegisterName={showRegisterName}\n                    hideMissingValues={hideMissingValues}\n                    showTrend={\n                        showTrends && register.code === SystemReg.Reading\n                    }\n                    visible={true}\n                />\n            ))}\n        </AutoGrid>\n    )\n}\n","import React from \"react\"\nimport JDEvent from \"../../jacdac-ts/src/jdom/event\"\nimport { Typography, Badge } from \"@mui/material\"\nimport KindIcon from \"./KindIcon\"\nimport useEventCount from \"../jacdac/useEventCount\"\nimport DeviceName from \"./devices/DeviceName\"\n\nexport default function EventInput(props: {\n    event: JDEvent\n    showDeviceName?: boolean\n    showName?: boolean\n}) {\n    const { event, showName, showDeviceName } = props\n    const count = useEventCount(event)\n    const spec = event.specification\n\n    return (\n        <>\n            {showDeviceName && (\n                <Typography>\n                    <DeviceName device={event.service.device} />/\n                </Typography>\n            )}\n            {showName && spec && (\n                <Typography gutterBottom>{spec.name}</Typography>\n            )}\n            <Badge badgeContent={count} color=\"primary\">\n                <KindIcon kind={\"event\"} />\n            </Badge>\n        </>\n    )\n}\n","import React from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport { isEvent } from \"../../jacdac-ts/src/jdom/spec\"\nimport EventInput from \"./EventInput\"\nimport AutoGrid from \"./ui/AutoGrid\"\n\nexport default function ServiceEvents(props: {\n    service: JDService\n    eventIdentifiers?: number[]\n    showEventName?: boolean\n}) {\n    const { service, eventIdentifiers, showEventName } = props\n    const spec = service.specification\n    const packets = spec.packets\n    let events = packets.filter(isEvent)\n    if (eventIdentifiers !== undefined)\n        events = events.filter(\n            event => eventIdentifiers.indexOf(event.identifier) > -1\n        )\n\n    return (\n        <AutoGrid spacing={1}>\n            {events.map(event => (\n                <EventInput\n                    key={`event${event.identifier}`}\n                    event={service.event(event.identifier)}\n                    showName={showEventName}\n                />\n            ))}\n        </AutoGrid>\n    )\n}\n","import { setNumber, sizeOfNumberFormat } from \"./buffer\"\nimport { CMD_SET_REG, JD_SERIAL_MAX_PAYLOAD_SIZE } from \"./constants\"\nimport { PackedValues } from \"./pack\"\nimport Packet from \"./packet\"\nimport {\n    clampToStorage,\n    isRegister,\n    numberFormatFromStorageType,\n    scaleFloatToInt,\n} from \"./spec\"\nimport { stringToUint8Array, toUTF8 } from \"./utils\"\n\n/**\n * @internal\n */\nexport function packArguments(info: jdspec.PacketInfo, args: PackedValues) {\n    let repeatIdx = -1\n    let numReps = 0\n    let argIdx = 0\n    let dst = 0\n\n    const buf = new Uint8Array(256)\n\n    for (let i = 0; i < info.fields.length; ++argIdx, ++i) {\n        if (argIdx >= args.length && numReps > 0) break\n        const arg0 = argIdx < args.length ? args[argIdx] : 0\n        const fld = info.fields[i]\n\n        if (repeatIdx == -1 && fld.startRepeats) repeatIdx = i\n\n        const arg1 =\n            fld.type == \"string0\" && typeof arg0 == \"string\"\n                ? arg0 + \"\\u0000\"\n                : arg0\n\n        const arg =\n            typeof arg1 == \"boolean\"\n                ? arg1\n                    ? 1\n                    : 0\n                : typeof arg1 == \"string\"\n                ? stringToUint8Array(toUTF8(arg1))\n                : arg1\n\n        if (typeof arg == \"number\") {\n            const intVal = scaleFloatToInt(arg, fld)\n            if (fld.storage == 0)\n                throw new Error(`expecting ${fld.type} got number`)\n\n            const fmt = numberFormatFromStorageType(fld.storage)\n            setNumber(buf, fmt, dst, clampToStorage(intVal, fld.storage))\n            dst += sizeOfNumberFormat(fmt)\n        } else {\n            let size = Math.abs(fld.storage)\n            if (typeof arg1 == \"string\") {\n                if (size == 0) size = arg.length\n                const argCut = arg.slice(0, size)\n                buf.set(argCut, dst)\n                dst += size\n            } else if (size == 0 || size == arg.length) {\n                buf.set(arg, dst)\n                dst += arg.length\n            } else {\n                throw new Error(\n                    `expecting ${Math.abs(fld.storage)} bytes; got ${\n                        arg.length\n                    }`\n                )\n            }\n        }\n\n        if (dst >= JD_SERIAL_MAX_PAYLOAD_SIZE)\n            throw new Error(\n                `jacdac packet length too large, ${dst} > ${JD_SERIAL_MAX_PAYLOAD_SIZE} bytes`\n            )\n\n        if (repeatIdx != -1 && i + 1 >= info.fields.length) {\n            i = repeatIdx - 1\n            numReps++\n        }\n    }\n\n    const cmd = isRegister(info)\n        ? info.identifier | CMD_SET_REG\n        : info.identifier\n    const pkt = Packet.from(cmd, buf.slice(0, dst))\n    if (info.kind != \"report\") pkt.isCommand = true\n    return pkt\n}\n","import React, { useContext } from \"react\"\nimport { Typography } from \"@mui/material\"\nimport { InPipeReader } from \"../../jacdac-ts/src/jdom/pipes\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport DeviceName from \"./devices/DeviceName\"\nimport { isReportOf } from \"../../jacdac-ts/src/jdom/spec\"\nimport { packArguments } from \"../../jacdac-ts/src/jdom/command\"\nimport {\n    DecodedPacket,\n    printPacket,\n    serviceName,\n} from \"../../jacdac-ts/src/jdom/pretty\"\nimport Packet from \"../../jacdac-ts/src/jdom/packet\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport CmdButton from \"./CmdButton\"\nimport { PackedValues } from \"../../jacdac-ts/src/jdom/pack\"\n\nfunction hasPipeReport(info: jdspec.PacketInfo) {\n    return info.fields.find(f => f.type == \"pipe\")\n}\n\nexport default function CommandInput(props: {\n    service: JDService\n    command: jdspec.PacketInfo\n    showDeviceName?: boolean\n    args?: PackedValues\n    setReports?: (reports: DecodedPacket[]) => void\n}) {\n    const { service, command, showDeviceName, args, setReports } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n\n    const { specification } = service\n    const requiredArgLength =\n        command.fields.length - (hasPipeReport(command) ? 1 : 0)\n    const missingArguments = (args?.length || 0) !== requiredArgLength\n    const disabled = missingArguments\n    const reportSpec =\n        command.hasReport &&\n        specification.packets.find(p => isReportOf(command, p))\n    const handleClick = async mounted => {\n        const pkt = !args?.length\n            ? Packet.onlyHeader(command.identifier)\n            : packArguments(command, args)\n        if (setReports && reportSpec) {\n            const reportPacket = await service.sendCmdAwaitResponseAsync(pkt)\n            if (!mounted()) return\n            const decoded = reportPacket?.decoded\n            setReports([decoded])\n        } else if (setReports && hasPipeReport(command)) {\n            let inp: InPipeReader\n            try {\n                inp = new InPipeReader(bus)\n                const cmd = inp.openCommand(command.identifier)\n                await service.sendPacketAsync(cmd, true)\n                console.log(printPacket(cmd)) // keep this call, it sets up pretty to understand packages\n                const { output } = await inp.readAll()\n                const reports = output\n                    .filter(ot => !!ot.data?.length)\n                    .map(ot => ot?.decoded)\n                if (!mounted()) return\n                setReports(reports)\n            } finally {\n                inp?.unmount()\n            }\n        } else await service.sendPacketAsync(pkt, true)\n    }\n\n    return (\n        <CmdButton\n            trackName=\"command.input\"\n            trackProperties={{\n                service: serviceName(service.serviceClass),\n                serviceClass: service.serviceClass,\n            }}\n            variant=\"contained\"\n            disabled={disabled}\n            onClick={handleClick}\n        >\n            {showDeviceName && (\n                <Typography>\n                    <DeviceName device={service.device} />/\n                </Typography>\n            )}\n            {command.name.replace(/_/g, \" \")}\n        </CmdButton>\n    )\n}\n","import React, { useMemo } from \"react\"\nimport { DecodedPacket } from \"../../jacdac-ts/src/jdom/pretty\"\nimport MembersInput from \"./fields/MembersInput\"\n\nexport default function DecodedPacketItem(props: { pkt: DecodedPacket }) {\n    const { pkt } = props\n    const { decoded, service } = pkt\n    const specifications = useMemo(() => decoded.map(d => d.info), [decoded])\n    const values = useMemo(() => decoded.map(d => d.value), [decoded])\n    return (\n        <MembersInput\n            serviceSpecification={service}\n            specifications={specifications}\n            values={values}\n        />\n    )\n}\n","import React, { useState } from \"react\"\nimport { styled } from \"@mui/material/styles\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\n// tslint:disable-next-line: no-submodule-imports\nimport Card from \"@mui/material/Card\"\n// tslint:disable-next-line: no-submodule-imports\nimport CardContent from \"@mui/material/CardContent\"\n// tslint:disable-next-line: no-submodule-imports\nimport Typography from \"@mui/material/Typography\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport ServiceRegisters from \"./ServiceRegisters\"\nimport ServiceEvents from \"./ServiceEvents\"\nimport { isCommand } from \"../../jacdac-ts/src/jdom/spec\"\nimport { CardActions, List, ListItem } from \"@mui/material\"\nimport DeviceCardHeader from \"./devices/DeviceCardHeader\"\nimport { DeviceLostAlert } from \"./alert/DeviceLostAlert\"\nimport CommandInput from \"./CommandInput\"\nimport { DecodedPacket } from \"../../jacdac-ts/src/jdom/pretty\"\nimport DecodedPacketItem from \"./DecodedPacketItem\"\nimport ServiceSpecificationStatusAlert from \"./specification/ServiceSpecificationStatusAlert\"\nimport MembersInput from \"./fields/MembersInput\"\n\nconst PREFIX = \"ServiceCard\"\n\nconst classes = {\n    root: `${PREFIX}-root`,\n    bullet: `${PREFIX}-bullet`,\n    title: `${PREFIX}-title`,\n    pos: `${PREFIX}-pos`,\n}\n\nconst StyledCard = styled(Card)({\n    [`&.${classes.root}`]: {\n        minWidth: 275,\n    },\n    [`& .${classes.bullet}`]: {\n        display: \"inline-block\",\n        margin: \"0 2px\",\n        transform: \"scale(0.8)\",\n    },\n    [`& .${classes.title}`]: {\n        fontSize: 14,\n    },\n    [`& .${classes.pos}`]: {\n        marginBottom: 12,\n    },\n})\n\nexport default function ServiceCard(props: {\n    service: JDService\n    linkToService?: boolean\n    showServiceName?: boolean\n    showMemberName?: boolean\n    registerIdentifiers?: number[]\n    eventIdentifiers?: number[]\n    commandIdentifier?: number\n}) {\n    const {\n        service,\n        linkToService,\n        registerIdentifiers,\n        showServiceName,\n        showMemberName,\n        eventIdentifiers,\n        commandIdentifier,\n    } = props\n    const { specification } = service\n    const [reports, setReports] = useState<DecodedPacket[]>(undefined)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const [commandArgs, setCommandArgs] = useState<any[]>([])\n\n    const hasCommandIdentifier = commandIdentifier !== undefined\n    const hasRegisterIdentifiers = !!registerIdentifiers?.length\n    const hasEventIdentifiers = !!eventIdentifiers?.length\n    const command =\n        commandIdentifier !== undefined &&\n        specification?.packets.find(\n            pkt => isCommand(pkt) && pkt.identifier === commandIdentifier\n        )\n\n    return (\n        <StyledCard className={classes.root}>\n            <DeviceCardHeader device={service.device} showAvatar={true} />\n            <CardContent>\n                {showServiceName && (\n                    <Typography\n                        className={classes.title}\n                        color=\"textSecondary\"\n                        gutterBottom\n                    >\n                        <Link\n                            to={\n                                linkToService && service.specification\n                                    ? `/services/${service.specification.shortId}/`\n                                    : \"/clients/javascript/jdom/service\"\n                            }\n                        >\n                            {service.name}\n                        </Link>\n                    </Typography>\n                )}\n                <Typography variant=\"body2\" component=\"div\">\n                    {hasRegisterIdentifiers && (\n                        <ServiceRegisters\n                            key={\"reg\" + service.id}\n                            service={service}\n                            showRegisterName={showMemberName}\n                            registerIdentifiers={registerIdentifiers}\n                        />\n                    )}\n                    {hasEventIdentifiers && (\n                        <ServiceEvents\n                            key={\"ev\" + service.id}\n                            service={service}\n                            showEventName={showMemberName}\n                            eventIdentifiers={eventIdentifiers}\n                        />\n                    )}\n                    {command && (\n                        <MembersInput\n                            serviceSpecification={specification}\n                            serviceMemberSpecification={command}\n                            specifications={command.fields}\n                            values={commandArgs}\n                            setValues={setCommandArgs}\n                            showDataType={true}\n                        />\n                    )}\n                    {!!reports?.length && (\n                        <List key={\"reports\"} dense>\n                            {reports?.map((report, ri) => (\n                                <ListItem key={`report${ri}`}>\n                                    <DecodedPacketItem pkt={report} />\n                                </ListItem>\n                            ))}\n                        </List>\n                    )}\n                </Typography>\n                {!hasCommandIdentifier &&\n                    !hasRegisterIdentifiers &&\n                    !hasEventIdentifiers && (\n                        <ServiceSpecificationStatusAlert\n                            specification={specification}\n                        />\n                    )}\n                <DeviceLostAlert device={service?.device} />\n            </CardContent>\n            <CardActions>\n                {command && (\n                    <CommandInput\n                        service={service}\n                        command={command}\n                        args={commandArgs}\n                        setReports={setReports}\n                    />\n                )}\n            </CardActions>\n        </StyledCard>\n    )\n}\n","import React, { useContext } from \"react\"\nimport { styled } from \"@mui/material/styles\"\nimport { Grid } from \"@mui/material\"\nimport DeviceCard from \"./DeviceCard\"\nimport ServiceCard from \"../ServiceCard\"\nimport useChange from \"../../jacdac/useChange\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useGridBreakpoints from \"../useGridBreakpoints\"\n\nconst PREFIX = \"DeviceList\"\n\nconst classes = {\n    root: `${PREFIX}-root`,\n}\n\nconst StyledGrid = styled(Grid)(({ theme }) => ({\n    [`&.${classes.root}`]: {\n        marginBottom: theme.spacing(1),\n    },\n}))\n\nexport default function DeviceList(props: {\n    serviceClass?: number\n    linkToService?: boolean\n    registerIdentifiers?: number[]\n    eventIdentifiers?: number[]\n    commandIdentifier?: number\n    showServiceName?: boolean\n    showMemberName?: boolean\n    showTemperature?: boolean\n    showFirmware?: boolean\n    showServiceButtons?: boolean\n}) {\n    const {\n        serviceClass,\n        linkToService,\n        registerIdentifiers,\n        showServiceName,\n        showMemberName,\n        showFirmware,\n        showTemperature,\n        showServiceButtons,\n        eventIdentifiers,\n        commandIdentifier,\n    } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const devices = useChange(bus, n => n.devices({ serviceClass }))\n    const services = useChange(bus, n => n.services({ serviceClass }))\n\n    const hasServiceClass = serviceClass !== undefined\n    const gridBreakpoints = useGridBreakpoints(devices?.length)\n\n    return (\n        <StyledGrid container spacing={2} className={classes.root}>\n            {!hasServiceClass &&\n                devices.map(device => (\n                    <Grid key={device.id} item {...gridBreakpoints}>\n                        <DeviceCard\n                            device={device}\n                            showDescription={true}\n                            showTemperature={showTemperature}\n                            showFirmware={showFirmware}\n                            showServices={showServiceButtons}\n                        />\n                    </Grid>\n                ))}\n            {hasServiceClass &&\n                services.map(service => {\n                    return (\n                        <Grid key={service.id} item {...gridBreakpoints}>\n                            <ServiceCard\n                                service={service}\n                                linkToService={linkToService}\n                                showServiceName={showServiceName}\n                                showMemberName={showMemberName}\n                                registerIdentifiers={registerIdentifiers}\n                                eventIdentifiers={eventIdentifiers}\n                                commandIdentifier={commandIdentifier}\n                            />\n                        </Grid>\n                    )\n                })}\n        </StyledGrid>\n    )\n}\n","import React, { useContext } from \"react\"\nimport { Chip } from \"@mui/material\"\nimport KindIcon, { kindName } from \"./KindIcon\"\nimport PacketsContext from \"./PacketsContext\"\nimport AppContext, { DrawerType } from \"./AppContext\"\nimport Tooltip from \"./ui/Tooltip\"\n\nexport default function KindChip(props: { kind: string; className?: string }) {\n    const { kind, className } = props\n    const { filter, setFilter } = useContext(PacketsContext)\n    const { setDrawerType } = useContext(AppContext)\n    const icon = KindIcon({ kind })\n    const chipFilter = `kind:${kind}`\n    const filtered = filter && filter.indexOf(chipFilter) > -1\n    const handleClick = () => {\n        if (filtered) setFilter(filter?.replace(chipFilter, \"\")?.trim())\n        else setFilter(filter?.trim() + \" \" + chipFilter)\n        setDrawerType(DrawerType.Packets)\n    }\n    return (\n        <Tooltip\n            title={\n                filtered\n                    ? `remove filter ${chipFilter}`\n                    : `add filter ${chipFilter}`\n            }\n        >\n            <span>\n                <Chip\n                    onClick={handleClick}\n                    className={className}\n                    size=\"small\"\n                    label={kindName(kind)}\n                    icon={icon}\n                />\n            </span>\n        </Tooltip>\n    )\n}\n","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport Chip from \"@mui/material/Chip\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CategoryIcon from \"@mui/icons-material/Category\"\nimport Tooltip from \"./ui/Tooltip\"\n\nexport default function PacketMembersChip(props: {\n    spec: jdspec.PacketInfo\n    members: jdspec.PacketMember[]\n    className?: string\n}) {\n    const { members, className, spec } = props\n    if (!members?.length) return null\n\n    const label = spec?.packFormat\n    const title = \"pack format\"\n    return (\n        <Tooltip title={title}>\n            <Chip\n                style={{ textDecoration: \"none\" }}\n                href=\"/reference/pack-format/\"\n                component=\"a\"\n                clickable\n                className={className}\n                size=\"small\"\n                icon={<CategoryIcon />}\n                label={label}\n            />\n        </Tooltip>\n    )\n}\n","import React, { useState } from \"react\"\nimport { Tabs, Tab } from \"@mui/material\"\nimport TabPanel from \"../ui/TabPanel\"\nimport Snippet from \"../ui/Snippet\"\nimport { packInfo } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport {\n    isCommand,\n    isRegister,\n    serviceSpecificationFromClassIdentifier,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport PaperBox from \"../ui/PaperBox\"\n\nexport default function PacketSpecificationSource(props: {\n    serviceClass: number\n    packetInfo: jdspec.PacketInfo\n    reportInfo?: jdspec.PacketInfo\n    pipeReportInfo?: jdspec.PacketInfo\n}) {\n    const { serviceClass, packetInfo } = props\n    const [tab, setTab] = useState(0)\n\n    const info = serviceSpecificationFromClassIdentifier(serviceClass)\n    const handleTabChange = (\n        event: React.ChangeEvent<unknown>,\n        newValue: number\n    ) => {\n        setTab(newValue)\n    }\n\n    // TODO: render commands\n    if (\n        !info ||\n        !packetInfo?.fields?.length ||\n        !(isRegister(packetInfo) || isCommand(packetInfo))\n    )\n        return null\n\n    let index = 0\n    return (\n        <PaperBox>\n            <Tabs\n                value={tab}\n                onChange={handleTabChange}\n                aria-label=\"View specification formats\"\n            >\n                {[\"TypeScript\"]\n                    .filter(n => !!n)\n                    .map(n => (\n                        <Tab key={n} label={n} />\n                    ))}\n            </Tabs>\n            <TabPanel value={tab} index={index++}>\n                <Snippet\n                    value={() =>\n                        packInfo(info, packetInfo, {\n                            isStatic: false,\n                            useBooleans: false,\n                            useJDOM: true,\n                        }).buffers\n                    }\n                    mode={\"typescript\"}\n                />\n            </TabPanel>\n        </PaperBox>\n    )\n}\n","import {\n    isRegister,\n    isEvent,\n    isCommand,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport { styled } from \"@mui/material/styles\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport Chip from \"@mui/material/Chip\"\nimport DeviceList from \"../devices/DeviceList\"\nimport IDChip from \"../IDChip\"\nimport KindChip from \"../KindChip\"\nimport PacketMembersChip from \"../PacketMembersChip\"\nimport Markdown from \"../ui/Markdown\"\nimport { prettyMemberUnit } from \"../../../jacdac-ts/src/jdom/pretty\"\nimport PacketSpecificationSource from \"./PacketSpecificationSource\"\n\nconst PREFIX = \"PacketSpecification\"\n\nconst classes = {\n    root: `${PREFIX}-root`,\n    field: `${PREFIX}-field`,\n    chip: `${PREFIX}-chip`,\n}\n\nconst Root = styled(\"div\")(({ theme }) => ({\n    [`&.${classes.root}`]: {\n        marginBottom: theme.spacing(1),\n    },\n\n    [`& .${classes.field}`]: {\n        \"& > div\": { verticalAlign: \"middle\" },\n    },\n\n    [`& .${classes.chip}`]: {\n        margin: theme.spacing(0.5),\n    },\n}))\n\nfunction MemberType(props: { member: jdspec.PacketMember }) {\n    const { member } = props\n\n    const helperText = prettyMemberUnit(member, true)\n\n    return (\n        <>\n            <li className={classes.field}>\n                {member.name !== \"_\" && `${member.name}: `}\n                <code>{helperText}</code>\n            </li>\n        </>\n    )\n}\n\nfunction MembersType(props: {\n    members: jdspec.PacketMember[]\n    title?: string\n}) {\n    const { members, title } = props\n\n    let repeatIndex = members.findIndex(m => !!m.startRepeats)\n    if (repeatIndex < 0) repeatIndex = members.length\n    const beforeRepeat = members.slice(0, repeatIndex)\n    const afterRepeat = members.slice(repeatIndex)\n\n    return (\n        <>\n            {!!title && <h4>{title}</h4>}\n            {!!beforeRepeat.length && (\n                <ul>\n                    {beforeRepeat.map(member => (\n                        <MemberType key={member.name} member={member} />\n                    ))}\n                </ul>\n            )}\n            {!!afterRepeat.length && (\n                <>\n                    <h5>starts repeating</h5>\n                    <ul>\n                        {afterRepeat.map(member => (\n                            <MemberType key={member.name} member={member} />\n                        ))}\n                    </ul>\n                </>\n            )}\n        </>\n    )\n}\n\nexport default function PacketSpecification(props: {\n    serviceClass: number\n    packetInfo: jdspec.PacketInfo\n    reportInfo?: jdspec.PacketInfo\n    pipeReportInfo?: jdspec.PacketInfo\n    showDevices?: boolean\n}) {\n    const {\n        serviceClass,\n        packetInfo,\n        reportInfo,\n        pipeReportInfo,\n        showDevices,\n    } = props\n\n    if (!packetInfo)\n        return (\n            <Alert severity=\"error\">{`Unknown member ${serviceClass.toString(\n                16\n            )}:${packetInfo.identifier}`}</Alert>\n        )\n    const { fields } = packetInfo\n    const isCmd = isCommand(packetInfo)\n\n    return (\n        <Root className={classes.root}>\n            <h3 id={`${packetInfo.kind}:${packetInfo.identifier}`}>\n                {packetInfo.name}\n                <PacketMembersChip\n                    spec={packetInfo}\n                    className={classes.chip}\n                    members={packetInfo.fields}\n                />\n                {packetInfo.identifier !== undefined && (\n                    <IDChip\n                        className={classes.chip}\n                        id={packetInfo.identifier}\n                        filter={`pkt:0x${packetInfo.identifier.toString(16)}`}\n                    />\n                )}\n                <KindChip className={classes.chip} kind={packetInfo.kind} />\n                {packetInfo.optional && (\n                    <Chip\n                        className={classes.chip}\n                        size=\"small\"\n                        label=\"optional\"\n                    />\n                )}\n                {packetInfo.derived && (\n                    <Chip\n                        className={classes.chip}\n                        size=\"small\"\n                        label=\"derived\"\n                    />\n                )}\n            </h3>\n            <Markdown source={packetInfo.description} />\n            {!!fields.length && (\n                <MembersType members={fields} title={isCmd && \"Arguments\"} />\n            )}\n            {!!reportInfo && (\n                <MembersType members={reportInfo.fields} title=\"Report\" />\n            )}\n            {!!pipeReportInfo && (\n                <MembersType\n                    members={pipeReportInfo.fields}\n                    title=\"Pipe report\"\n                />\n            )}\n            <PacketSpecificationSource\n                serviceClass={serviceClass}\n                packetInfo={packetInfo}\n                reportInfo={reportInfo}\n            />\n            {showDevices && isCommand(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    commandIdentifier={packetInfo.identifier}\n                />\n            )}\n            {showDevices && isRegister(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    registerIdentifiers={[packetInfo.identifier]}\n                />\n            )}\n            {showDevices && isEvent(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    eventIdentifiers={[packetInfo.identifier]}\n                />\n            )}\n        </Root>\n    )\n}\n","import React from \"react\"\nimport Alert from \"../ui/Alert\"\n\nexport function StatusAlert(props: { specification: jdspec.ServiceSpec }) {\n    const { specification } = props\n\n    switch (specification?.status) {\n        case \"deprecated\":\n            return <Alert severity=\"error\">Deprecated</Alert>\n        case \"experimental\":\n            return <Alert severity=\"info\">Experimental</Alert>\n        default:\n            return null\n    }\n}\n\nconst ServiceSpecificationStatusAlert = React.memo(StatusAlert)\n\nexport default ServiceSpecificationStatusAlert\n","import React, { lazy } from \"react\"\nimport Suspense from \"./Suspense\"\nconst ReactMarkdown = lazy(() => import(\"react-markdown\"))\n\nexport default function Markdown(props: {\n    source: string\n    className?: string\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    components?: Partial<any>\n}) {\n    const { source, ...others } = props\n    return (\n        <Suspense>\n            <ReactMarkdown {...others}>{source}</ReactMarkdown>\n        </Suspense>\n    )\n}\n","import { Typography } from \"@mui/material\"\nimport React, { ReactNode } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\n\nexport default function Snippet(props: {\n    value: string | (() => string)\n    mode?: string\n    download?: string\n    actions?: ReactNode\n    url?: string\n    caption?: string | JSX.Element | JSX.Element[]\n}) {\n    const { value, mode, download, url, caption, actions } = props\n    const v: string = typeof value === \"function\" ? value() : value\n    const className = mode && `language-${mode === \"sts\" ? \"ts\" : mode}`\n    return (\n        <>\n            <CodeBlock\n                className={className}\n                downloadName={download}\n                downloadText={download && v}\n                actions={actions}\n                url={url}\n            >\n                {v}\n            </CodeBlock>\n            {caption && <Typography variant=\"caption\">{caption}</Typography>}\n        </>\n    )\n}\n","import { GridSize } from \"@mui/material\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize\n    md?: GridSize\n    sm?: GridSize\n    lg?: GridSize\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(\n    itemCount?: number\n): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2:\n                return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3:\n                return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else\n        return {\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            xl: 3,\n        }\n}\n","import { useState, useEffect } from \"react\"\nimport JDEvent from \"../../jacdac-ts/src/jdom/event\"\nimport { CHANGE } from \"../../jacdac-ts/src/jdom/constants\"\n\nexport default function useEventCount(event: JDEvent) {\n    const [count, setCount] = useState(event?.count || 0)\n    useEffect(\n        () =>\n            event?.subscribe(CHANGE, () => {\n                setCount(event.count)\n            }),\n        [event]\n    )\n\n    return count\n}\n"],"names":["React","useContext","FingerprintIcon","Chip","IconButton","PacketsContext","AppContext","DrawerType","Tooltip","IDChip","props","id","className","filter","packetFilter","setFilter","setPacketFilter","setDrawerType","ids","undefined","toString","filtered","indexOf","handleFilterClick","replace","trim","Packets","icon","title","Button","ServiceButton","service","onClick","others","name","styled","Card","CardContent","ControlReg","useChange","navigate","CardActions","DeviceCardHeader","useRegisterUnpackedValue","DeviceLostAlert","isInfrastructure","PREFIX","classes","root","bullet","pos","StyledCard","display","margin","transform","fontSize","marginBottom","navigateToService","spec","specification","shortId","DeviceDescription","device","register","_","description","DeviceCard","children","action","content","showDeviceId","showDescription","showTemperature","showFirmware","showServices","services","srv","map","Grid","AutoGrid","spacing","Array","isArray","child","i","key","useMemo","isRegister","RegisterInput","SystemReg","ServiceRegisters","registerIdentifiers","showRegisterName","hideMissingValues","showTrends","registers","packets","pkt","identifier","r","reg","code","Reading","Typography","Badge","KindIcon","useEventCount","DeviceName","EventInput","event","showName","showDeviceName","count","isEvent","ServiceEvents","eventIdentifiers","showEventName","events","setNumber","sizeOfNumberFormat","CMD_SET_REG","JD_SERIAL_MAX_PAYLOAD_SIZE","Packet","clampToStorage","numberFormatFromStorageType","scaleFloatToInt","stringToUint8Array","toUTF8","packArguments","info","args","repeatIdx","numReps","argIdx","dst","buf","Uint8Array","fields","length","arg0","fld","startRepeats","arg1","type","arg","intVal","storage","Error","fmt","size","Math","abs","argCut","slice","set","cmd","from","kind","isCommand","InPipeReader","isReportOf","printPacket","serviceName","JacdacContext","CmdButton","hasPipeReport","find","f","CommandInput","command","setReports","bus","requiredArgLength","missingArguments","disabled","reportSpec","hasReport","p","handleClick","mounted","onlyHeader","reportPacket","sendCmdAwaitResponseAsync","decoded","inp","openCommand","sendPacketAsync","console","log","output","readAll","reports","ot","data","unmount","serviceClass","MembersInput","DecodedPacketItem","specifications","d","values","value","useState","Link","List","ListItem","ServiceSpecificationStatusAlert","minWidth","ServiceCard","linkToService","showServiceName","showMemberName","commandIdentifier","commandArgs","setCommandArgs","hasCommandIdentifier","hasRegisterIdentifiers","hasEventIdentifiers","report","ri","useGridBreakpoints","StyledGrid","theme","DeviceList","showServiceButtons","devices","n","hasServiceClass","gridBreakpoints","kindName","KindChip","chipFilter","CategoryIcon","PacketMembersChip","members","label","packFormat","textDecoration","Tabs","Tab","TabPanel","Snippet","packInfo","serviceSpecificationFromClassIdentifier","PaperBox","PacketSpecificationSource","packetInfo","tab","setTab","handleTabChange","newValue","index","isStatic","useBooleans","useJDOM","buffers","Alert","Markdown","prettyMemberUnit","field","chip","Root","verticalAlign","MemberType","member","helperText","MembersType","repeatIndex","findIndex","m","beforeRepeat","afterRepeat","PacketSpecification","reportInfo","pipeReportInfo","showDevices","isCmd","optional","derived","StatusAlert","status","memo","lazy","Suspense","ReactMarkdown","source","CodeBlock","mode","download","url","caption","actions","v","itemCount","drawerType","xs","sm","md","lg","xl","None","useEffect","CHANGE","setCount","subscribe"],"sourceRoot":""}