{"version":3,"file":"component---src-pages-tools-prototest-tsx-bc56ba8dc788b7badbac.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@mui/material/CardActions/cardActionsClasses.js","webpack://jacdac-docs/./node_modules/@mui/material/CardActions/CardActions.js","webpack://jacdac-docs/./src/components/alert/ConnectAlert.tsx","webpack://jacdac-docs/./src/components/ui/Snippet.tsx","webpack://jacdac-docs/./src/components/TestCard.tsx","webpack://jacdac-docs/./src/pages/tools/prototest.tsx"],"sourcesContent":["import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nvar cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"disableSpacing\", \"className\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getCardActionsUtilityClass } from './cardActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = ownerState => {\n  var {\n    classes,\n    disableSpacing\n  } = ownerState;\n  var slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\n\nvar CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    var {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(_ref => {\n  var {\n    ownerState\n  } = _ref;\n  return _extends({\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  }, !ownerState.disableSpacing && {\n    '& > :not(:first-of-type)': {\n      marginLeft: 8\n    }\n  });\n});\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n\n  var {\n    disableSpacing = false,\n    className\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    disableSpacing\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default CardActions;","// tslint:disable-next-line: no-submodule-imports\nimport { Box } from \"@mui/material\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { NoSsr } from \"@mui/material\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\nimport useDevices from \"../hooks/useDevices\"\n\nfunction NoSsrConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    const { serviceClass, closeable } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useDevices({ serviceClass, ignoreInfrastructure: true })\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={closeable}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                <Box component=\"span\" ml={2}>\n                    <ConnectButtons full=\"always\" transparent={true} />\n                </Box>\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import { Typography } from \"@mui/material\"\nimport React, { ReactNode } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\n\nexport default function Snippet(props: {\n    value: string | (() => string)\n    mode?: string\n    download?: string\n    actions?: ReactNode\n    url?: string\n    caption?: string | JSX.Element | JSX.Element[]\n}) {\n    const { value, mode, download, url, caption, actions } = props\n    const v: string = typeof value === \"function\" ? value() : value\n    const className = mode && `language-${mode === \"sts\" ? \"ts\" : mode}`\n    return (\n        <>\n            <CodeBlock\n                className={className}\n                downloadName={download}\n                downloadText={download && v}\n                actions={actions}\n                url={url}\n            >\n                {v}\n            </CodeBlock>\n            {caption && <Typography variant=\"caption\">{caption}</Typography>}\n        </>\n    )\n}\n","import { Card, CardActions, CardContent, CardHeader } from \"@mui/material\"\nimport React, { useState } from \"react\"\nimport { toHex } from \"../../jacdac-ts/src/jdom/utils\"\nimport CmdButton from \"./CmdButton\"\nimport Snippet from \"./ui/Snippet\"\n\nexport type TestLogger = (name: string, ...msg: any) => void\nexport type Test = (log: TestLogger) => Promise<void>\n\nexport default function TestCard(props: {\n    title: string\n    subheader?: string\n    children?: JSX.Element | JSX.Element[]\n    onTest: Test\n    autoRun?: boolean\n}) {\n    const { title, subheader, onTest, children, autoRun } = props\n    const [output, setOutput] = useState(\"\")\n\n    const runTest = async () => {\n        const log: string[] = []\n\n        const toValue = (msg: any) => {\n            if (msg === undefined || msg === null) return \"\"\n            else if (typeof msg === \"string\") return msg\n            else if (msg instanceof Uint8Array) return toHex(msg)\n            else if (Array.isArray(msg)) return msg.map(toValue)\n            else return JSON.stringify(msg)\n        }\n\n        const logger = (msg: any) => {\n            if (msg instanceof Error) log.push(msg + \"\")\n            if (typeof msg === \"object\") {\n                Object.keys(msg).forEach(k =>\n                    log.push(`${k}: ${toValue(msg[k])}`)\n                )\n            } else log.push(toValue(msg))\n        }\n\n        try {\n            await onTest(logger)\n        } catch (e) {\n            logger(e)\n            throw e\n        } finally {\n            setOutput(log.join(\"\\n\"))\n        }\n    }\n\n    const handleClick = async () => await runTest()\n\n    return (\n        <Card>\n            <CardHeader title={title} subheader={subheader} />\n            <CardContent>\n                {children}\n                {output && <Snippet value={output} />}\n            </CardContent>\n            <CardActions>\n                <CmdButton\n                    variant=\"outlined\"\n                    onClick={handleClick}\n                    disableReset={true}\n                    autoRun={autoRun}\n                >\n                    Test\n                </CmdButton>\n            </CardActions>\n        </Card>\n    )\n}\n","import { Grid, Switch, Typography } from \"@mui/material\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport {\n    bufferEq,\n    pick,\n    randomRange,\n    toHex,\n} from \"../../../jacdac-ts/src/jdom/utils\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport {\n    ProtoTestCmd,\n    ProtoTestReg,\n    SRV_PROTO_TEST,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport useChange from \"../../jacdac/useChange\"\nimport JDService from \"../../../jacdac-ts/src/jdom/service\"\nimport JDRegister from \"../../../jacdac-ts/src/jdom/register\"\nimport ConnectAlert from \"../../components/alert/ConnectAlert\"\nimport JDField from \"../../../jacdac-ts/src/jdom/field\"\nimport {\n    jdpack,\n    jdpackEqual,\n    jdunpack,\n    PackedValues,\n} from \"../../../jacdac-ts/src/jdom/pack\"\nimport DeviceName from \"../../components/devices/DeviceName\"\nimport DeviceActions from \"../../components/devices/DeviceActions\"\nimport useEffectAsync from \"../../components/useEffectAsync\"\nimport TestCard from \"../../components/TestCard\"\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\"\nimport JDEvent from \"../../../jacdac-ts/src/jdom/event\"\nimport { AlertTitle } from \"@mui/material\"\nimport Alert from \"../../components/ui/Alert\"\nimport ProtocolTestServer from \"../../../jacdac-ts/src/jdom/servers/protocoltestserver\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { cryptoRandomUint32 } from \"../../../jacdac-ts/src/jdom/random\"\nimport JDServerServiceProvider from \"../../../jacdac-ts/src/jdom/servers/serverserviceprovider\"\nimport { useId } from \"react-use-id-hook\"\n\nfunction randomFieldPayload(field: JDField) {\n    const { specification } = field\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let r: any = undefined\n    switch (specification.type) {\n        case \"bool\":\n            r = Math.random() > 0.5 ? 1 : 0\n            break\n        case \"i8\":\n        case \"i16\":\n        case \"i32\":\n        case \"u8\":\n        case \"u16\":\n        case \"u32\": {\n            const unsigned = specification.type[0] === \"u\"\n            const n = Math.min(30, parseInt(specification.type.slice(1)))\n            const min = pick(\n                specification.typicalMin,\n                specification.absoluteMin,\n                unsigned ? 0 : -((1 << (n - 1)) - 1)\n            )\n            const max = pick(\n                specification.typicalMax,\n                specification.absoluteMax,\n                unsigned ? (1 << n) - 1 : (1 << (n - 1)) - 1\n            )\n            r = randomRange(min, max)\n            break\n        }\n        case \"bytes\": {\n            // maxBytes?\n            const a = cryptoRandomUint32(randomRange(1, 3))\n            r = new Uint8Array(a.buffer)\n            break\n        }\n        case \"string\":\n        case \"string0\": {\n            const ch_a = \"a\".charCodeAt(0)\n            const ch_z = \"z\".charCodeAt(0)\n            const n = randomRange(4, 10)\n            let s = \"\"\n            for (let i = 0; i < n; ++i) {\n                s += String.fromCharCode(randomRange(ch_a, ch_z))\n            }\n            r = s\n            break\n        }\n    }\n\n    return r\n}\n\nfunction randomPayload<T extends PackedValues>(\n    packFormat: string,\n    fields: JDField[]\n): T {\n    if (!packFormat) throw new Error(\"pack format unknown\")\n    const rs = fields.map(randomFieldPayload)\n    if (rs.some(r => r === undefined))\n        throw new Error(\"unsupported data layout\")\n    return rs as T\n}\n\nfunction RegisterProtocolTest(props: {\n    rw: JDRegister\n    ro: JDRegister\n    ev: JDEvent\n}) {\n    const { rw, ro, ev } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { specification, fields } = rw\n    const name = specification.name.replace(/^rw_/, \"\")\n\n    // event code and command code are the same as rw register\n    useEffectAsync(async () => {\n        await rw.sendGetAsync()\n        await ro.sendGetAsync()\n    }, [])\n\n    const testRwRo = async log => {\n        log(`-- testing rw`)\n        const packFormat = specification.packFormat\n        const payload = randomPayload(packFormat, fields)\n        log({ payload })\n\n        const data = jdpack(packFormat, payload)\n        log({ data: toHex(data) })\n\n        // setup observer for event counts\n        const evCount = ev.count\n\n        // send over packet\n        await rw.sendSetAsync(data)\n        // read packet\n        await rw.sendGetAsync()\n        // wait for response\n        await bus.delay(100)\n        // check read\n        log({ rwdata: toHex(rw.data) })\n        const rwpayload = jdunpack(rw.data, packFormat)\n        log({ rwpayload })\n        if (!jdpackEqual(packFormat, payload, rwpayload))\n            throw new Error(`expected rw ${payload}, got ${rwpayload}`)\n\n        // check ro\n        log(`-- testing ro`)\n        await ro.sendGetAsync()\n        // wait for response\n        await bus.delay(100)\n        const ropayload = jdunpack(ro.data, packFormat)\n        log({ ropayload })\n        if (!jdpackEqual(packFormat, payload, ropayload))\n            throw new Error(`expected ro ${payload}, got ${ropayload}`)\n\n        // the event should have triggered once\n        log(`-- testing event`)\n        if (packFormat !== \"u8\" && evCount + 1 !== ev.count)\n            throw new Error(`expected 1 event, got ${ev.count - evCount}`)\n    }\n\n    const testCommand = async log => {\n        log(`-- testing cmd`)\n\n        const packFormat = specification.packFormat\n        const payload = randomPayload(packFormat, fields)\n        log({ payload })\n        const data = jdpack(packFormat, payload)\n        log({ data: toHex(data) })\n        // send over cmd packet\n        await rw.service.sendPacketAsync(Packet.from(rw.code, data))\n        // read packet\n        await rw.sendGetAsync()\n        // wait for response\n        await bus.delay(100)\n        // check read\n        log({ rwdata: toHex(rw.data) })\n        const rwpayload = jdunpack(rw.data, packFormat)\n        log({ rwpayload })\n        if (!jdpackEqual(packFormat, payload, rwpayload))\n            throw new Error(`expected rw ${payload}, got ${rwpayload}`)\n    }\n\n    const test = async log => {\n        log(`- testing no acks`)\n        rw.service.registersUseAcks = false\n        await testRwRo(log)\n        await testCommand(log)\n        log(`- testing acks`)\n        rw.service.registersUseAcks = true\n        await testRwRo(log)\n        await testCommand(log)\n    }\n\n    return (\n        <TestCard\n            title={name}\n            subheader={specification.packFormat || \"?\"}\n            onTest={test}\n        />\n    )\n}\n\nfunction ServiceProtocolTest(props: { service: JDService }) {\n    const { service } = props\n    const { device } = service\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n\n    const regs = service.registers()\n    const rws = service\n        .registers()\n        .filter(reg => reg.specification.kind == \"rw\")\n        .map(rw => {\n            const roname = rw.name.replace(/^rw_/, \"ro_\")\n            const ro = regs.find(\n                r =>\n                    r.specification.kind === \"ro\" &&\n                    r.specification.name === roname\n            )\n            const ev = service.event(rw.code)\n            return { rw, ro, ev }\n        })\n\n    const outPipeTest = async log => {\n        // fill bytes with data\n        const rw = service.register(ProtoTestReg.RwBytes)\n        const [data] = randomPayload<[Uint8Array]>(\"b\", rw.fields)\n        log(`data: ${toHex(data)}`)\n        // send over cmd packet\n        rw.service.registersUseAcks = true\n        await rw.sendSetAsync(data)\n        await rw.sendGetAsync()\n        // wait for response\n        await bus.delay(100)\n        log(`data recv: ${toHex(rw.data)}`)\n        if (!bufferEq(data, rw.data))\n            throw new Error(\n                `rw write failed, expected ${toHex(data)}, got ${toHex(\n                    rw.data\n                )}`\n            )\n        // read packet back\n        const recv = await service.receiveWithInPipe<[number]>(\n            ProtoTestCmd.CReportPipe,\n            \"u8\"\n        )\n        const recvu = new Uint8Array(recv.map(buf => buf[0]))\n        log(`received ${toHex(recvu)}`)\n        if (!bufferEq(data, recvu))\n            throw new Error(\n                `expected ${toHex(data)}, got ${toHex(recv.map(buf => buf[0]))}`\n            )\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs={10}>\n                <Typography variant=\"h4\">\n                    <DeviceName device={device} />\n                </Typography>\n            </Grid>\n            <Grid item xs={2}>\n                <DeviceActions device={device} showReset={true} />\n            </Grid>\n            {rws?.map(rw => (\n                <Grid key={rw.rw.id} item xs={12} md={6}>\n                    <RegisterProtocolTest {...rw} />\n                </Grid>\n            ))}\n            <Grid key={\"cpipe\"} item xs={12} md={6}>\n                <TestCard\n                    title={\"out pipe\"}\n                    subheader={\"\"}\n                    onTest={outPipeTest}\n                />\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default function ProtocolTest() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const labelId = useId()\n    const switchId = useId()\n    const [host, setHost] = useState(false)\n    const services = useChange(bus, b =>\n        b.services({ serviceClass: SRV_PROTO_TEST })\n    )\n\n    const toggleHost = () => setHost(!host)\n\n    // add virtual device\n    useEffect(() => {\n        if (!host) return () => {}\n\n        const d = new JDServerServiceProvider(\"test\", [\n            new ProtocolTestServer(),\n        ])\n        bus.addServiceProvider(d)\n        return () => bus.removeServiceProvider(d)\n    }, [host])\n\n    return (\n        <>\n            <h1>Protocol Test</h1>\n            <p>\n                A helper page to test the Jacdac protocol against a &nbsp;\n                <Link to=\"/services/prototest/\">protocol test</Link> service.\n            </p>\n            <Grid container direction=\"row\" spacing={2}>\n                <Grid key=\"connect\" item xs={12}>\n                    <ConnectAlert serviceClass={SRV_PROTO_TEST} />\n                </Grid>\n                {services?.map(service => (\n                    <Grid key={service.nodeId} item xs={12}>\n                        <ServiceProtocolTest service={service} />\n                    </Grid>\n                ))}\n                <Grid item xs={12}>\n                    <Alert severity=\"info\">\n                        <AlertTitle>Developer zone</AlertTitle>\n                        <Switch\n                            id={switchId}\n                            checked={host}\n                            onChange={toggleHost}\n                        />\n                        <label id={labelId} htmlFor={switchId}>\n                            Add simulator\n                        </label>\n                    </Alert>\n                </Grid>\n            </Grid>\n        </>\n    )\n}\n"],"names":["Box","Alert","React","useContext","serviceSpecificationFromClassIdentifier","JacdacContext","NoSsr","ConnectButtons","useDevices","NoSsrConnectAlert","props","serviceClass","closeable","bus","transports","devices","ignoreInfrastructure","spec","length","name","ConnectAlert","Typography","CodeBlock","Snippet","value","mode","download","url","caption","actions","v","className","Card","CardActions","CardContent","CardHeader","useState","toHex","CmdButton","TestCard","title","subheader","onTest","children","autoRun","output","setOutput","runTest","log","toValue","msg","undefined","Uint8Array","Array","isArray","map","JSON","stringify","logger","Error","push","Object","keys","forEach","k","e","join","handleClick","Grid","Switch","useEffect","bufferEq","pick","randomRange","ProtoTestCmd","ProtoTestReg","SRV_PROTO_TEST","useChange","jdpack","jdpackEqual","jdunpack","DeviceName","DeviceActions","useEffectAsync","Packet","AlertTitle","ProtocolTestServer","Link","cryptoRandomUint32","JDServerServiceProvider","useId","randomFieldPayload","field","specification","r","type","Math","random","unsigned","n","min","parseInt","slice","typicalMin","absoluteMin","max","typicalMax","absoluteMax","a","buffer","ch_a","charCodeAt","ch_z","s","i","String","fromCharCode","randomPayload","packFormat","fields","rs","some","RegisterProtocolTest","rw","ro","ev","replace","sendGetAsync","testRwRo","payload","data","evCount","count","sendSetAsync","delay","rwdata","rwpayload","ropayload","testCommand","service","sendPacketAsync","from","code","test","registersUseAcks","ServiceProtocolTest","device","regs","registers","rws","filter","reg","kind","roname","find","event","outPipeTest","register","RwBytes","recv","receiveWithInPipe","CReportPipe","recvu","buf","id","ProtocolTest","labelId","switchId","host","setHost","services","b","toggleHost","d","addServiceProvider","removeServiceProvider","nodeId"],"sourceRoot":""}