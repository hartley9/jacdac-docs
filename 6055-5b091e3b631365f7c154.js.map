{"version":3,"file":"6055-5b091e3b631365f7c154.js","mappings":";;;;;;;;;;;;AAAA;AACA;AAEe,SAASG,iBAAT,CAA2BC,KAA3B,EAGZ;AACC,MAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBF,KAA1B;AACA,MAAM;AAAEG,IAAAA,EAAE,GAAG,EAAP;AAAWC,IAAAA,IAAI,GAAG;AAAlB,MAAyBF,MAA/B;AAEA,MAAMG,KAAK,GAAGR,kDAAW,CAAC,MAAM;AAC5B;AACA,QAAMS,CAAC,GAAGH,EAAE,CAACI,OAAH,CAAW,MAAX,CAAV;AACA,QAAMC,OAAO,GAAGL,EAAE,CAACM,KAAH,CAAS,CAAT,EAAYH,CAAZ,CAAhB;AACA,QAAMI,IAAI,GAAGP,EAAE,CAACM,KAAH,CAASH,CAAC,GAAG,CAAb,EAAgBK,IAAhB,EAAb;AAEA,QAAMC,OAAO,gGAGnBJ,OAHmB,ouBA2BnBE,IA3BmB,OAAb;AA6BA,QAAMG,SAAS,kDAGFZ,KAAK,IAAI,MAHP,yGAQrBG,IARqB,2dAAf;AA4BA,WAAO;AACH,sBAAgB;AACZU,QAAAA,OAAO,EAAE;AACLC,UAAAA,IAAI,EAAE,2BADD;AAELC,UAAAA,OAAO,EAAE,OAFJ;AAGLC,UAAAA,WAAW,EACP,6DAJC;AAKLC,UAAAA,IAAI,EAAE,YALD;AAMLC,UAAAA,OAAO,EAAE;AACLC,YAAAA,KAAK,EAAE,0BADF;AAELC,YAAAA,KAAK,EAAE;AAFF,WANJ;AAULC,UAAAA,YAAY,EAAE;AACV,yBAAa,UADH;AAEVC,YAAAA,SAAS,EAAE,QAFD;AAGV,8BAAkB;AAHR,WAVT;AAeLC,UAAAA,eAAe,EAAE;AACbC,YAAAA,UAAU,EAAE;AADC,WAfZ;AAkBLC,UAAAA,WAAW,EAAE;AACT,iCAAqB;AADZ,WAlBR;AAqBLC,UAAAA,QAAQ,EAAE,CAAC,QAAD,EAAW,YAAX,EAAyB,YAAzB,CArBL;AAsBLC,UAAAA,YAAY,EAAE,CAAC,UAAD;AAtBT;AADG,OADb;AA2BH,kBAAY;AACRd,QAAAA,OAAO,EAAEF;AADD,OA3BT;AA8BH,oBAAc;AACVE,QAAAA,OAAO,EAAED;AADC;AA9BX,KAAP;AAkCH,GAjGwB,EAiGtB,CAACZ,KAAD,EAAQC,MAAR,EAAgBC,EAAhB,EAAoBC,IAApB,CAjGsB,CAAzB;AAmGA,sBAAO,iDAAC,mEAAD;AAAmB,SAAK,EAAEC;AAA1B,IAAP;AACH","sources":["webpack://jacdac-docs/./src/components/ui/VanillaCodeButton.tsx"],"sourcesContent":["import React, { useCallback } from \"react\"\nimport CodeSandboxButton from \"./CodeSandboxButton\"\n\nexport default function VanillaCodeButton(props: {\n    title?: string\n    source: { js?: string; html?: string }\n}) {\n    const { title, source } = props\n    const { js = \"\", html = \"\" } = source\n\n    const files = useCallback(() => {\n        // find imports\n        const i = js.indexOf(\"\\n\\n\")\n        const imports = js.slice(0, i)\n        const code = js.slice(i + 2).trim()\n\n        const indexTs = `\nimport \"milligram\";\nimport { createWebBus, CONNECTION_STATE } from \"jacdac-ts\";\n${imports}\n\nconst connectEl = document.getElementById(\"connectbtn\") as HTMLButtonElement;\nconst logEl = document.getElementById(\"log\") as HTMLPreElement;\nconst log = (msg: any) => {\n  console.log(msg);\n  logEl.innerText += msg + \"\\\\n\";\n};\n// create WebUSB bus\nconst bus = createWebBus();\n// track connection state and update button\nbus.on(CONNECTION_STATE, () => {\n  connectEl.innerText = bus.connected\n    ? \"connected ðŸŽ‰\"\n    : bus.disconnected\n    ? \"connect\"\n    : \"ðŸ‘€ðŸ‘€ðŸ‘€\";\n});\n// connect must be triggered by a user interaction\nconnectEl.onclick = async () =>\n  bus.connected ? bus.disconnect() : bus.connect();\n// we're ready\nlog(\"click connect to start\")\n\n${code}\n`\n        const indexHtml = `\n<html>\n    <body>\n        <h1>Jacdac ${title || \"demo\"}</h1>\n        <div>\n        <button id=\"connectbtn\">connect</button>\n        </div>    \n\n${html}\n        <pre id=\"log\"></pre>\n\n    <footer>\n        <small>\n        Need to learn more about Jacdac?\n        <a target=\"_blank\" href=\"https://aka.ms/jacdac\">Read the docs</a>\n        or\n        <a\n            target=\"_blank\"\n            href=\"https://github.com/microsoft/jacdac/discussions\"\n            >start a discussion</a\n        >.\n        </small>\n    </footer>\n    <script src=\"./index.ts\"></script>\n    </body>\n</html>    \n        `\n\n        return {\n            \"package.json\": {\n                content: {\n                    name: \"vanilla-jacdac-typescript\",\n                    version: \"0.0.0\",\n                    description:\n                        \"Vanilla Jacdac + TypeScript sandbox - https://aka.ms/jacdac\",\n                    main: \"index.html\",\n                    scripts: {\n                        start: \"parcel index.html --open\",\n                        build: \"parcel build index.html\",\n                    },\n                    dependencies: {\n                        \"jacdac-ts\": \"^1.18.16\",\n                        milligram: \"^1.4.1\",\n                        \"parcel-bundler\": \"^2.0.0\",\n                    },\n                    devDependencies: {\n                        typescript: \"^4.4.3\",\n                    },\n                    resolutions: {\n                        \"@babel/preset-env\": \"^7.15.8\",\n                    },\n                    keywords: [\"jacdac\", \"typescript\", \"javascript\"],\n                    browserslist: [\"defaults\"],\n                },\n            },\n            \"index.ts\": {\n                content: indexTs,\n            },\n            \"index.html\": {\n                content: indexHtml,\n            },\n        }\n    }, [title, source, js, html])\n\n    return <CodeSandboxButton files={files} />\n}\n"],"names":["React","useCallback","CodeSandboxButton","VanillaCodeButton","props","title","source","js","html","files","i","indexOf","imports","slice","code","trim","indexTs","indexHtml","content","name","version","description","main","scripts","start","build","dependencies","milligram","devDependencies","typescript","resolutions","keywords","browserslist"],"sourceRoot":""}