{"version":3,"file":"component---src-pages-tools-collector-tsx-efd979feda0ffe9d8f43.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/InputAdornment/InputAdornment.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/FiberManualRecord.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/HourglassEmpty.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/OpenInBrowser.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/PlayArrow.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/SaveAlt.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Stop.js","webpack://jacdac-docs/./jacdac-ts/src/clients/sensoraggregatorclient.ts","webpack://jacdac-docs/./src/components/ReadingFieldGrid.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceItem.tsx","webpack://jacdac-docs/./src/components/fs/FileSystemChip.tsx","webpack://jacdac-docs/./src/components/fs/FileNewFileChip.tsx","webpack://jacdac-docs/./src/components/fs/FileSystemNodeChip.tsx","webpack://jacdac-docs/./src/components/fs/FileTabs.tsx","webpack://jacdac-docs/./src/components/hooks/useArrowKeys.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigation.ts","webpack://jacdac-docs/./src/components/hooks/useKeyboardNavigationProps.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/SelectWithLabel.tsx","webpack://jacdac-docs/./src/components/ui/SwitchWithLabel.tsx","webpack://jacdac-docs/./src/components/useGridBreakpoints.ts","webpack://jacdac-docs/./src/components/select/SelectEvent.tsx","webpack://jacdac-docs/./src/components/DataSetGrid.tsx","webpack://jacdac-docs/./src/components/hooks/useEvents.ts","webpack://jacdac-docs/./src/pages/tools/collector.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '../Typography';\nimport withStyles from '../styles/withStyles';\nimport FormControlContext, { useFormControl } from '../FormControl/FormControlContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    height: '0.01em',\n    // Fix IE 11 flexbox alignment. To remove at some point.\n    maxHeight: '2em',\n    alignItems: 'center',\n    whiteSpace: 'nowrap'\n  },\n\n  /* Styles applied to the root element if `variant=\"filled\"`. */\n  filled: {\n    '&$positionStart:not($hiddenLabel)': {\n      marginTop: 16\n    }\n  },\n\n  /* Styles applied to the root element if `position=\"start\"`. */\n  positionStart: {\n    marginRight: 8\n  },\n\n  /* Styles applied to the root element if `position=\"end\"`. */\n  positionEnd: {\n    marginLeft: 8\n  },\n\n  /* Styles applied to the root element if `disablePointerEvents=true`. */\n  disablePointerEvents: {\n    pointerEvents: 'none'\n  },\n\n  /* Styles applied if the adornment is used inside <FormControl hiddenLabel />. */\n  hiddenLabel: {},\n\n  /* Styles applied if the adornment is used inside <FormControl margin=\"dense\" />. */\n  marginDense: {}\n};\nvar InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disablePointer = props.disablePointerEvents,\n      disablePointerEvents = _props$disablePointer === void 0 ? false : _props$disablePointer,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      position = props.position,\n      variantProp = props.variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"]);\n\n  var muiFormControl = useFormControl() || {};\n  var variant = variantProp;\n\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('Material-UI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n\n  return /*#__PURE__*/React.createElement(FormControlContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, position === 'end' ? classes.positionEnd : classes.positionStart, disablePointerEvents && classes.disablePointerEvents, muiFormControl.hiddenLabel && classes.hiddenLabel, variant === 'filled' && classes.filled, muiFormControl.margin === 'dense' && classes.marginDense),\n    ref: ref\n  }, other), typeof children === 'string' && !disableTypography ? /*#__PURE__*/React.createElement(Typography, {\n    color: \"textSecondary\"\n  }, children) : children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiInputAdornment'\n})(InputAdornment);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"8\"\n}), 'FiberManualRecord');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"\n}), 'HourglassEmpty');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z\"\n}), 'OpenInBrowser');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8 5v14l11-7z\"\n}), 'PlayArrow');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"\n}), 'SaveAlt');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 6h12v12H6z\"\n}), 'Stop');\n\nexports.default = _default;","import {\n    SensorAggregatorReg,\n    SensorAggregatorSampleType,\n    SRV_SENSOR_AGGREGATOR,\n} from \"../../jacdac-spec/dist/specconstants\"\nimport { bufferToArray, NumberFormat } from \"../jdom/buffer\"\nimport { JD_SERIAL_MAX_PAYLOAD_SIZE, REPORT_RECEIVE } from \"../jdom/constants\"\nimport { jdpack } from \"../jdom/pack\"\nimport JDRegister from \"../jdom/register\"\nimport JDService from \"../jdom/service\"\nimport { JDServiceClient } from \"../jdom/serviceclient\"\nimport {\n    isReading,\n    serviceSpecificationFromClassIdentifier,\n} from \"../jdom/spec\"\nimport { assert, bufferConcat, bufferConcatMany, fromHex } from \"../jdom/utils\"\n\nexport interface SensorAggregatorInputConfig {\n    serviceClass: number\n    // if specified, also specify serviceIndex\n    deviceId?: string\n    serviceIndex?: number\n}\n\nexport interface SensorAggregatorConfig {\n    samplingInterval: number // ms\n    samplesInWindow: number\n    inputs: SensorAggregatorInputConfig[]\n}\n\nexport interface SensorAggregatorStats {\n    numSamples: number\n    sampleSize: number\n}\n\n/**\n * A client for the sensor aggregator service\n * @category Clients\n */\nexport class SensorAggregatorClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        assert(service.serviceClass === SRV_SENSOR_AGGREGATOR)\n        this.service.registersUseAcks = true\n    }\n\n    async setInputs(cfg: SensorAggregatorConfig) {\n        function error(msg: string) {\n            throw new Error(\"Aggregator inputs: \" + msg)\n        }\n        function mapType(tp: number) {\n            switch (tp) {\n                case 1:\n                    return SensorAggregatorSampleType.U8\n                case 2:\n                    return SensorAggregatorSampleType.U16\n                case 4:\n                    return SensorAggregatorSampleType.U32\n                case -1:\n                    return SensorAggregatorSampleType.I8\n                case -2:\n                    return SensorAggregatorSampleType.I16\n                case -4:\n                    return SensorAggregatorSampleType.I32\n                default:\n                    error(\"unknown storage type\")\n            }\n        }\n\n        if (!cfg || !cfg.inputs) error(\"invalid input format\")\n\n        let totalSampleSize = 0\n        const inputs = cfg.inputs?.map(input => {\n            const { deviceId, serviceIndex, serviceClass } = input\n            if (!!deviceId !== !!serviceIndex)\n                error(`deviceId and serviceIndex must be specified together`)\n            const specification =\n                serviceSpecificationFromClassIdentifier(serviceClass)\n            if (!specification)\n                error(\n                    `missing specification from service 0x${serviceClass.toString(\n                        16\n                    )}`\n                )\n            const freeze = !!deviceId\n            const readingReg = specification.packets.find(isReading)\n            if (!readingReg)\n                error(\n                    `service 0x${serviceClass.toString(\n                        16\n                    )} does not have a reading register`\n                )\n            let sampleType: SensorAggregatorSampleType = undefined\n            let sampleSize = 0\n            let sampleShift = 0\n            for (const field of readingReg.fields) {\n                sampleSize += Math.abs(field.storage)\n                if (sampleType === undefined) {\n                    sampleType = mapType(field.storage)\n                    sampleShift = field.shift || 0\n                }\n                if (\n                    sampleType != mapType(field.storage) ||\n                    sampleShift != (field.shift || 0)\n                )\n                    error(\"heterogenous field types\")\n            }\n            totalSampleSize += sampleSize\n            return bufferConcat(\n                freeze ? fromHex(deviceId) : new Uint8Array(8),\n                jdpack(\"u32 u8 u8 u8 i8\", [\n                    serviceClass,\n                    freeze ? serviceIndex : 0,\n                    sampleSize,\n                    sampleType,\n                    sampleShift,\n                ])\n            )\n        })\n\n        if (totalSampleSize > JD_SERIAL_MAX_PAYLOAD_SIZE)\n            error(\"samples won't fit in packet\")\n\n        // u32 is x[4]\n        inputs.unshift(\n            jdpack(\"u16 u16 u32\", [\n                cfg.samplingInterval,\n                cfg.samplesInWindow,\n                0,\n            ])\n        )\n        await this.service\n            .register(SensorAggregatorReg.Inputs)\n            .sendSetAsync(bufferConcatMany(inputs))\n    }\n\n    async collect(numSamples: number) {\n        await this.service\n            .register(SensorAggregatorReg.StreamingSamples)\n            .sendSetPackedAsync([numSamples])\n    }\n\n    subscribeSample(handler: (sample: number[]) => void): () => void {\n        const reg = this.service.register(SensorAggregatorReg.CurrentSample)\n        return this.mount(\n            reg.subscribe(REPORT_RECEIVE, () =>\n                handler(bufferToArray(reg.data, NumberFormat.Float32LE))\n            )\n        )\n    }\n\n    private async getReg(id: SensorAggregatorReg, f: (v: JDRegister) => any) {\n        const reg = this.service.register(id)\n        await reg.refresh()\n        return f(reg)\n    }\n\n    async stats(): Promise<SensorAggregatorStats> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const info: any = {\n            numSamples: this.getReg(\n                SensorAggregatorReg.NumSamples,\n                r => r.intValue\n            ),\n            sampleSize: this.getReg(\n                SensorAggregatorReg.SampleSize,\n                r => r.intValue\n            ),\n        }\n        for (const id of Object.keys(info)) {\n            info[id] = await info[id]\n        }\n        return info\n    }\n}\nexport default SensorAggregatorClient\n","import {\n    Card,\n    CardActions,\n    CardContent,\n    CardHeader,\n    createStyles,\n    Grid,\n    makeStyles,\n} from \"@material-ui/core\"\nimport React from \"react\"\nimport JDRegister from \"../../jacdac-ts/src/jdom/register\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport useDeviceName from \"./devices/useDeviceName\"\nimport SwitchWithLabel from \"./ui/SwitchWithLabel\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        vmiddle: {\n            verticalAlign: \"middle\",\n        },\n    })\n)\n\nfunction ReadingFieldGridItem(props: {\n    register: JDRegister\n    handleRegisterCheck: (register: JDRegister) => void\n    recording: boolean\n    registerChecked: boolean\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        register,\n        handleRegisterCheck,\n        recording,\n        registerChecked,\n        liveDataSet,\n    } = props\n    const { service } = register\n    const { device } = service\n    const gridBreakpoints = useGridBreakpoints()\n    const classes = useStyles()\n    const deviceName = useDeviceName(device)\n    const handleCheck = () => handleRegisterCheck(register)\n\n    return (\n        <Grid item {...gridBreakpoints} key={\"source\" + register.id}>\n            <Card>\n                <CardHeader\n                    subheader={register.service.name}\n                    title={`${deviceName}/${register.name}`}\n                />\n                <CardContent>\n                    {register.fields.map(field => (\n                        <span key={field.id}>\n                            <FiberManualRecordIcon\n                                className={classes.vmiddle}\n                                fontSize=\"large\"\n                                style={{\n                                    color:\n                                        (registerChecked &&\n                                            liveDataSet?.colorOf(field)) ||\n                                        \"#ccc\",\n                                }}\n                            />\n                            {field.name}\n                        </span>\n                    ))}\n                </CardContent>\n                <CardActions>\n                    <SwitchWithLabel\n                        disabled={recording}\n                        onChange={handleCheck}\n                        checked={registerChecked}\n                        label={`record ${deviceName}/${register.name}`}\n                    />\n                </CardActions>\n            </Card>\n        </Grid>\n    )\n}\n\nexport default function ReadingFieldGrid(props: {\n    readingRegisters: JDRegister[]\n    registerIdsChecked: string[]\n    recording?: boolean\n    handleRegisterCheck: (register: JDRegister) => void\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        readingRegisters,\n        registerIdsChecked,\n        recording,\n        handleRegisterCheck,\n        liveDataSet,\n    } = props\n\n    return (\n        <Grid container spacing={2}>\n            {readingRegisters.map(register => {\n                const registerChecked =\n                    registerIdsChecked.indexOf(register.id) > -1\n                return (\n                    <ReadingFieldGridItem\n                        key={register.id}\n                        register={register}\n                        registerChecked={registerChecked}\n                        recording={recording}\n                        handleRegisterCheck={handleRegisterCheck}\n                        liveDataSet={liveDataSet}\n                    />\n                )\n            })}\n        </Grid>\n    )\n}\n","import { Grid } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\"\nimport DashboardDevice from \"./DashboardDevice\"\nimport { GridBreakpoints } from \"../useGridBreakpoints\"\nimport { DashboardDeviceProps } from \"./Dashboard\"\nimport useChange from \"../../jacdac/useChange\"\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\"\nimport AppContext, { DrawerType } from \"../AppContext\"\n\nexport default function DashboardDeviceItem(\n    props: {\n        device: JDDevice\n        variant?: \"icon\" | \"\"\n    } & DashboardDeviceProps\n) {\n    const { device, variant, ...other } = props\n    const { drawerType } = useContext(AppContext)\n    const breakpoints: GridBreakpoints = useChange(\n        device,\n        () => {\n            const breakpointWeight = device\n                .services()\n                .map(srv => {\n                    return (\n                        dashboardServiceWeight(srv) ||\n                        (srv.readingRegister ||\n                        srv.valueRegister ||\n                        srv.intensityRegister\n                            ? 1\n                            : 0)\n                    )\n                })\n                .reduce((c: number, v) => c + v, 0)\n\n            if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n                return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 }\n            else if (breakpointWeight == 3)\n                return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 }\n            else if (breakpointWeight == 2)\n                return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 }\n            else\n                return {\n                    xs: 6,\n                    sm: 4,\n                    md: 3,\n                    lg: 2,\n                    xl: \"auto\",\n                }\n        },\n        [drawerType]\n    )\n\n    // based on size, expanded or reduce widget size\n    return (\n        <Grid item {...breakpoints}>\n            <DashboardDevice device={device} variant={variant} {...other} />\n        </Grid>\n    )\n}\n","import { Chip } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport OpenInBrowserIcon from \"@material-ui/icons/OpenInBrowser\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function FileSystemChip() {\n    const { fileSystem, showDirectoryPicker } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const handleOpenDirectory = showDirectoryPicker\n    const handleCloseDirectory = () => (fileSystem.root = undefined)\n\n    if (!fileSystem) return null\n\n    return (\n        <Chip\n            clickable\n            avatar={<OpenInBrowserIcon />}\n            label={root?.name || \"open directory\"}\n            onClick={handleOpenDirectory}\n            onDelete={root ? handleCloseDirectory : undefined}\n        />\n    )\n}\n","import {\n    Chip,\n    Dialog,\n    DialogContent,\n    DialogContentText,\n    TextField,\n    DialogActions,\n    Button,\n} from \"@material-ui/core\"\nimport React, { ChangeEvent, useContext, useState } from \"react\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport { useId } from \"react-use-id-hook\"\nimport FileSystemContext from \"../FileSystemContext\"\n\nexport default function FileNewFileChip(props: {\n    name?: string\n    content: string\n    label?: string\n    extension?: string\n}) {\n    const {\n        name: newFileName,\n        content: newFileContent,\n        label,\n        extension,\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const [open, setOpen] = useState(false)\n    const [value, setValue] = useState(\"\")\n    const valueId = useId()\n\n    const handleOpen = () => {\n        setValue(\"\")\n        setOpen(true)\n    }\n    const handleOk = async () => {\n        setOpen(false)\n        let name = value.toLocaleLowerCase().replace(/\\s+/g, \"\")\n        if (newFileName)\n            await fileSystem.createWorkingDirectory(\n                name,\n                newFileName,\n                newFileContent\n            )\n        else {\n            if (extension) name += `.${extension}`\n            const d = fileSystem.workingDirectory || fileSystem.root\n            const f = await d.fileAsync(name, { create: true })\n            await f.write(newFileContent)\n            fileSystem.workingFile = f\n        }\n    }\n    const handleCancel = () => setOpen(false)\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setValue(event.target.value)\n    }\n\n    return (\n        <>\n            <Chip\n                clickable\n                label={label || \"new...\"}\n                icon={<AddIcon />}\n                onClick={handleOpen}\n            />\n            <Dialog open={open} fullWidth={true}>\n                <DialogContent>\n                    <DialogContentText>Choose a project name</DialogContentText>\n                    <TextField\n                        id={valueId}\n                        value={value}\n                        label=\"Value\"\n                        fullWidth={true}\n                        onChange={handleValueChange}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        disabled={!value}\n                        onClick={handleOk}\n                    >\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    )\n}\n","import { Chip } from \"@material-ui/core\"\nimport React from \"react\"\nimport { FileSystemNode } from \"./fsdom\"\n\nexport default function FileSystemNodeChip(props: {\n    node: FileSystemNode\n    selected?: boolean\n    onClick: () => void\n}) {\n    const { node, selected, onClick } = props\n    const { name } = node\n    return (\n        <Chip\n            clickable\n            label={name.replace(/\\.json$/i, \"\")}\n            color={selected ? \"primary\" : undefined}\n            onClick={onClick}\n        />\n    )\n}\n","import { Grid } from \"@material-ui/core\"\nimport React, { useContext, useRef } from \"react\"\nimport useKeyboardNavigationProps from \"../hooks/useKeyboardNavigationProps\"\nimport FileSystemContext from \"../FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\nimport FileSystemChip from \"./FileSystemChip\"\nimport FileNewFileChip from \"./FileNewFileChip\"\nimport FileSystemNodeChip from \"./FileSystemNodeChip\"\n\nexport default function FileTabs(props: {\n    newFileName?: string\n    newFileExtension?: string\n    newFileContent?: string\n    newFileLabel?: string\n    hideDirectories?: boolean\n    hideFiles?: boolean\n    directoryFilter?: (directory: string) => boolean\n    fileFilter?: (file: string) => boolean\n}) {\n    const {\n        newFileName,\n        newFileContent,\n        hideDirectories,\n        hideFiles,\n        directoryFilter,\n        fileFilter,\n        newFileLabel,\n        newFileExtension\n    } = props\n    const { fileSystem } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const workingDirectory = useChange(fileSystem, _ => _?.workingDirectory)\n    const workingFile = useChange(fileSystem, _ => _?.workingFile)\n    const directories = useChange(root, _ =>\n        _?.directories?.filter(d => !directoryFilter || directoryFilter(d.name))\n    )\n    const files = useChange(root, _ =>\n        _?.files?.filter(d => !fileFilter || fileFilter(d.name))\n    )\n    const gridRef = useRef()\n    const keyboardProps = useKeyboardNavigationProps(gridRef.current)\n    const handleDirectorySelected = handle => () =>\n        (fileSystem.workingDirectory = handle)\n    const handleFileSelected = handle => () => (fileSystem.workingFile = handle)\n\n    if (!fileSystem) return null\n\n    return (\n        <Grid ref={gridRef} container spacing={1} {...keyboardProps}>\n            <Grid item>\n                <FileSystemChip />\n            </Grid>\n            {!hideDirectories &&\n                directories?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingDirectory}\n                            onClick={handleDirectorySelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {!hideFiles &&\n                files?.map(node => (\n                    <Grid item key={node.name}>\n                        <FileSystemNodeChip\n                            node={node}\n                            selected={node === workingFile}\n                            onClick={handleFileSelected(node)}\n                        />\n                    </Grid>\n                ))}\n            {root && newFileContent && (\n                <Grid item>\n                    <FileNewFileChip\n                        name={newFileName}\n                        content={newFileContent}\n                        label={newFileLabel}\n                        extension={newFileExtension}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { KeyboardEvent } from \"react\"\nimport { keyCodeFromEvent } from \"./useFireKey\";\n\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\n\nexport default function useArrowKeys(options: {\n    onLeft?: () => void,\n    onRight?: () => void,\n    onUp?: () => void,\n    onDown?: () => void,\n    symmetric?: boolean;\n}) {\n    const { onLeft, onUp, onRight, onDown, symmetric } = options;\n\n    if (!onLeft && !onUp && !onRight && !onDown)\n        return undefined;\n\n    const handlers = {\n        [LEFT_KEY]: onLeft,\n        [RIGHT_KEY]: onRight,\n        [UP_KEY]: onUp || (symmetric && onRight),\n        [DOWN_KEY]: onDown || (symmetric && onLeft)\n    }\n\n    return (e: KeyboardEvent<Element>) => {\n        const charCode = keyCodeFromEvent(e);\n        const handler = handlers[charCode];\n        if (handler) {\n            e.preventDefault();\n            handler();\n        }\n    }\n}\n","import React from \"react\"\n\nexport default function useKeyboardNavigation(parentRef: Element) {\n    const query = '[tabindex=\"0\"]';\n    const onMove = (offset: number) => () => {\n        console.log('keyboard move', { offset })\n        const focusable = Array.from<SVGElement>(parentRef?.querySelectorAll(query) || []);\n        if (focusable.length) {\n            const me = focusable.findIndex(f => f === document.activeElement);\n            const next = ((me + offset) + focusable.length) % focusable.length;\n            focusable[next].focus();\n        }\n    }\n    return onMove;\n}","import useArrowKeys from \"./useArrowKeys\";\nimport useKeyboardNavigation from \"./useKeyboardNavigation\";\n\nexport default function useKeyboardNavigationProps(parentRef: Element, vertical?: boolean) {\n    const onMove = useKeyboardNavigation(parentRef);\n\n    const onKeyDown = useArrowKeys({\n        onLeft: !vertical && onMove(-1),\n        onRight: !vertical && onMove(1),\n        onDown: vertical && onMove(1),\n        onUp: vertical && onMove(-1),\n    });\n\n    return {\n        onKeyDown: parentRef && onKeyDown\n    }\n}","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import {\n    FormControl,\n    FormHelperText,\n    InputLabel,\n    MenuItem,\n    Select,\n} from \"@material-ui/core\"\nimport React, { ChangeEvent, ReactNode } from \"react\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function SelectWithLabel(props: {\n    required?: boolean\n    label?: string\n    disabled?: boolean\n    error?: string\n    value?: string\n    placeholder?: string\n    type?: string\n    fullWidth?: boolean\n    onChange?: (ev: ChangeEvent<{ name?: string; value: unknown }>) => void\n    onClose?: (ev: ChangeEvent<unknown>) => void\n    helperText?: string\n    children?: ReactNode\n    none?: ReactNode\n}) {\n    const {\n        label,\n        fullWidth,\n        required,\n        disabled,\n        value,\n        error,\n        placeholder,\n        onChange,\n        onClose,\n        children,\n        helperText,\n        type,\n        none,\n    } = props\n    const labelId = useId()\n    const descrId = useId()\n    const id = useId()\n    const hasDescr = !!helperText || !!error\n\n    return (\n        <FormControl fullWidth={fullWidth} variant=\"outlined\">\n            <InputLabel id={labelId} key=\"label\">\n                {required ? `${label} *` : label}\n            </InputLabel>\n            <Select\n                id={id}\n                disabled={disabled}\n                label={label}\n                value={value}\n                error={!!error}\n                fullWidth={true}\n                placeholder={placeholder}\n                type={type}\n                labelId={labelId}\n                aria-describedby={hasDescr ? descrId : undefined}\n                onChange={onChange}\n                onClose={onClose}\n            >\n                {none !== undefined && (\n                    <MenuItem key={\"none\"} value={\"\"}>\n                        {none}\n                    </MenuItem>\n                )}\n                {children}\n            </Select>\n            {hasDescr && (\n                <FormHelperText id={descrId}>\n                    {error || helperText}\n                </FormHelperText>\n            )}\n        </FormControl>\n    )\n}\n","import { FormControlLabel, Switch, SwitchProps } from \"@material-ui/core\"\nimport React, { ReactNode } from \"react\"\n\nexport default function SwitchWithLabel(\n    props: { label: ReactNode } & SwitchProps\n) {\n    const { label, ...rest } = props\n    return <FormControlLabel control={<Switch {...rest} />} label={label} />\n}\n","import { GridSize } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize,\n    md?: GridSize,\n    sm?: GridSize,\n    lg?: GridSize,\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(itemCount?: number): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2: return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3: return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else return {\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 4,\n        xl: 3\n    }\n}","import React from \"react\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport JDEvent from \"../../../jacdac-ts/src/jdom/event\"\nimport SelectWithLabel from \"../ui/SelectWithLabel\"\n\nexport default function SelectEvent(props: {\n    events: JDEvent[]\n    eventId: string\n    onChange: (eventId: string) => void\n    friendlyName?: boolean,\n    label?: string\n}) {\n    const { events, eventId, onChange, friendlyName, label } = props\n\n    const handleChange = (ev: React.ChangeEvent<{ value: unknown }>) => {\n        onChange(ev.target.value as string)\n    }\n\n    return (\n        <SelectWithLabel\n            helperText={label || \"choose an event\"}\n            value={eventId}\n            onChange={handleChange}\n            disabled={!events?.length}\n            none={\"None\"}\n        >\n            {events?.map(ev => (\n                <MenuItem key={ev.id} value={ev.id}>\n                    {friendlyName ? ev.friendlyName : ev.name}\n                </MenuItem>\n            ))}\n        </SelectWithLabel>\n    )\n}\n","import {\n    Card,\n    CardActions,\n    CardContent,\n    CardHeader,\n    Grid,\n} from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { useContext } from \"react\"\nimport { prettyDuration } from \"../../jacdac-ts/src/jdom/pretty\"\nimport ServiceManagerContext from \"./ServiceManagerContext\"\nimport Trend from \"./Trend\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveAltIcon from \"@material-ui/icons/SaveAlt\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\n\nexport default function DataSetGrid(props: {\n    tables: FieldDataSet[]\n    handleDeleteTable?: (table: FieldDataSet) => void\n}) {\n    const { tables, handleDeleteTable } = props\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const gridBreakpoints = useGridBreakpoints(tables?.length)\n\n    const handleDownload = (table: FieldDataSet) => () => {\n        const sep = \",\"\n        const csv = table.toCSV(sep)\n        fileStorage.saveText(`${table.name}.csv`, csv)\n    }\n    const handelDelete = (table: FieldDataSet) => () => handleDeleteTable(table)\n    return (\n        <Grid container spacing={2}>\n            {tables.map(table => (\n                <Grid item {...gridBreakpoints} key={`result` + table.id}>\n                    <Card>\n                        <CardHeader\n                            subheader={`${\n                                table.rows.length\n                            } rows, ${prettyDuration(table.duration)}`}\n                        />\n                        <CardContent>\n                            <div>{table.headers.join(\", \")}</div>\n                            <Trend dataSet={table} height={8} mini={true} />\n                        </CardContent>\n                        <CardActions>\n                            <Button\n                                variant=\"contained\"\n                                color=\"primary\"\n                                startIcon={<SaveAltIcon />}\n                                onClick={handleDownload(table)}\n                            >\n                                Save\n                            </Button>\n                            {handleDeleteTable && (\n                                <IconButtonWithTooltip\n                                    title=\"delete\"\n                                    onClick={handelDelete(table)}\n                                >\n                                    <DeleteIcon />\n                                </IconButtonWithTooltip>\n                            )}\n                        </CardActions>\n                    </Card>\n                </Grid>\n            ))}\n        </Grid>\n    )\n}\n","import { SystemEvent } from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { arrayConcatMany } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useServices from \"./useServices\"\n\nexport default function useEvents(options?: {\n    serviceName?: string\n    serviceClass?: number\n    specification?: boolean\n    ignoreChange?: boolean\n}) {\n    const { ignoreChange } = options || {}\n    const services = useServices(options)\n    let events = arrayConcatMany(services.map(srv => srv.events))\n    if (ignoreChange)\n        events = events.filter(ev => ev.code !== SystemEvent.StatusCodeChanged && ev.code !== SystemEvent.Change)\n    return events\n}\n","import React, { useState, useContext, useEffect } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles, Theme } from \"@material-ui/core/styles\"\nimport {\n    Grid,\n    Button,\n    TextField,\n    InputAdornment,\n    createStyles,\n    Switch,\n    Card,\n    CardActions,\n} from \"@material-ui/core\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport StopIcon from \"@material-ui/icons/Stop\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveIcon from \"@material-ui/icons/Save\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\"\nimport JDBus from \"../../../jacdac-ts/src/jdom/bus\"\nimport FieldDataSet from \"../../components/FieldDataSet\"\nimport Trend from \"../../components/Trend\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../../components/ui/Alert\"\nimport SelectEvent from \"../../components/select/SelectEvent\"\nimport JDEvent from \"../../../jacdac-ts/src/jdom/event\"\nimport {\n    EVENT,\n    REPORT_UPDATE,\n    SRV_SENSOR_AGGREGATOR,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport {\n    arrayConcatMany,\n    throttle,\n    uniqueMap,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport DataSetGrid from \"../../components/DataSetGrid\"\nimport JDRegister from \"../../../jacdac-ts/src/jdom/register\"\nimport ReadingFieldGrid from \"../../components/ReadingFieldGrid\"\nimport DeviceCardHeader from \"../../components/devices/DeviceCardHeader\"\nimport SensorAggregatorClient from \"../../../jacdac-ts/src/clients/sensoraggregatorclient\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport JDService from \"../../../jacdac-ts/src/jdom/service\"\nimport ServiceManagerContext from \"../../components/ServiceManagerContext\"\nimport useChartPalette from \"../../components/useChartPalette\"\nimport { isSensor } from \"../../../jacdac-ts/src/jdom/spec\"\nimport useEvents from \"../../components/hooks/useEvents\"\nimport useDevices from \"../../components/hooks/useDevices\"\nimport { useId } from \"react-use-id-hook\"\nimport DashboardDeviceItem from \"../../components/dashboard/DashboardDeviceItem\"\nimport IconButtonWithTooltip from \"../../components/ui/IconButtonWithTooltip\"\nimport AppContext from \"../../components/AppContext\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport useServices from \"../../components/hooks/useServices\"\nimport { delay } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useLocalStorage from \"../../components/hooks/useLocalStorage\"\nimport FileTabs from \"../../components/fs/FileTabs\"\nimport FileSystemContext from \"../../components/FileSystemContext\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            marginBottom: theme.spacing(1),\n        },\n        grow: {\n            flexGrow: 1,\n        },\n        field: {\n            marginRight: theme.spacing(1),\n            marginBottom: theme.spacing(1.5),\n        },\n        segment: {\n            marginTop: theme.spacing(2),\n            marginBottom: theme.spacing(2),\n        },\n        row: {\n            marginBottom: theme.spacing(0.5),\n        },\n        buttons: {\n            marginRight: theme.spacing(1),\n            marginBottom: theme.spacing(2),\n        },\n        trend: {\n            width: theme.spacing(10),\n        },\n        vmiddle: {\n            verticalAlign: \"middle\",\n        },\n    })\n)\n\nconst LIVE_HORIZON = 24\nfunction createDataSet(\n    bus: JDBus,\n    registers: JDRegister[],\n    name: string,\n    live: boolean,\n    palette: string[]\n) {\n    const fields = arrayConcatMany(registers.map(reg => reg.fields))\n    const colors = fields.map((f, i) => palette[i % palette.length])\n    const set = new FieldDataSet(bus, name, fields, colors)\n    if (live) set.maxRows = LIVE_HORIZON + 4\n\n    return set\n}\n\nconst COLLECTOR_PREFIX = \"jacdac:collector:prefix\"\nconst COLLECTOR_SAMPLING_INTERVAL = \"jacdac:collector:samplinginterval\"\nconst COLLECTOR_SAMPLING_DURATION = \"jacdac:collector:samplingduration\"\nconst COLLECTOR_START_DELAY = \"jacdac:collector:startdelay\"\n\nexport default function Collector() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { toggleShowDeviceHostsDialog, enqueueSnackbar } =\n        useContext(AppContext)\n    const classes = useStyles()\n    const { fileSystem } = useContext(FileSystemContext)\n    const root = useChange(fileSystem, _ => _?.root)\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const [registerIdsChecked, setRegisterIdsChecked] = useState<string[]>([])\n    const [aggregatorId, setAggregatorId] = useState<string>(\"\")\n    const [recording, setRecording] = useState(false)\n    const [tables, setTables] = useState<FieldDataSet[]>([])\n    const [, setRecordingLength] = useState(0)\n\n    const [prefix, setPrefix] = useLocalStorage(COLLECTOR_PREFIX, \"data\")\n    const [samplingIntervalDelay, setSamplingIntervalDelay] = useLocalStorage(\n        COLLECTOR_SAMPLING_INTERVAL,\n        100\n    )\n    const [samplingDuration, setSamplingDuration] = useLocalStorage(\n        COLLECTOR_SAMPLING_DURATION,\n        10\n    )\n    const [startDelay, setStartDelay] = useLocalStorage(\n        COLLECTOR_START_DELAY,\n        0\n    )\n\n    const [liveDataSet, setLiveDataSet] = useState<FieldDataSet>(undefined)\n    const [, setLiveDataTimestamp] = useState(0)\n    const [triggerEventId, setTriggerEventId] = useState<string>(\"\")\n    const [countdown, setCountdown] = useState(-1)\n    const starting = countdown > 0\n    const chartPalette = useChartPalette()\n    const devices = useDevices({ ignoreInfrastructure: true, announced: true })\n    const readingRegisters = arrayConcatMany(\n        devices.map(device =>\n            device\n                .services()\n                .filter(srv => isSensor(srv.specification))\n                .map(srv => srv.readingRegister)\n        )\n    )\n    const recordingRegisters = readingRegisters.filter(\n        reg => registerIdsChecked.indexOf(reg.id) > -1\n    )\n    const recordingDevices = uniqueMap(\n        recordingRegisters,\n        reg => reg.service.device.deviceId,\n        reg => reg.service.device\n    )\n    const aggregators: JDService[] = useServices({\n        serviceClass: SRV_SENSOR_AGGREGATOR,\n    })\n    const aggregator: JDService = aggregators.find(\n        srv => srv.id == aggregatorId\n    )\n    const samplingCount = Math.ceil(\n        (samplingDuration * 1000) / samplingIntervalDelay\n    )\n    const triggerEvent = bus.node(triggerEventId) as JDEvent\n    const startEnabled = !starting && !!recordingRegisters?.length\n    const events = useEvents({ ignoreChange: true })\n    const aggregatorsId = useId()\n    const sensorsId = useId()\n    const recordId = useId()\n    const recordingsId = useId()\n    const dashboardId = useId()\n    const samplingIntervalId = useId()\n    const samplingDurationId = useId()\n    const startDelayId = useId()\n    const prefixId = useId()\n\n    useEffect(() => {\n        //console.log(`trigger event`, triggerEventId, triggerEvent)\n        const un = triggerEvent?.subscribe(EVENT, () => {\n            //console.log(`trigger toggle recoring`, recording)\n            toggleRecording()\n        })\n        //console.log(`mounted`, triggerEvent)\n        return () => {\n            //console.log(`unmount trigger`)\n            if (un) un()\n        }\n    }, [triggerEvent, recording, registerIdsChecked, liveDataSet])\n\n    const createSensorConfig = () => ({\n        samplingInterval: samplingIntervalDelay,\n        samplesInWindow: 10,\n        inputs: recordingRegisters.map(reg => ({\n            serviceClass: reg.service.serviceClass,\n        })),\n    })\n    const saveConfig = () => {\n        const sensorConfig = JSON.stringify(createSensorConfig(), null, 2)\n        fileStorage.saveText(\n            `${prefix || \"jacdac\"}-sensor-config.json`,\n            sensorConfig\n        )\n    }\n    const newDataSet = (registerIds: string[], live: boolean) =>\n        registerIds.length\n            ? createDataSet(\n                  bus,\n                  readingRegisters.filter(\n                      reg => registerIds.indexOf(reg.id) > -1\n                  ),\n                  `${prefix || \"data\"}${tables.length}`,\n                  live,\n                  chartPalette\n              )\n            : undefined\n    const handleRegisterCheck = (reg: JDRegister) => {\n        const i = registerIdsChecked.indexOf(reg.id)\n        if (i > -1) registerIdsChecked.splice(i, 1)\n        else registerIdsChecked.push(reg.id)\n        registerIdsChecked.sort()\n        setRegisterIdsChecked([...registerIdsChecked])\n        setLiveDataSet(newDataSet(registerIdsChecked, true))\n    }\n    const stopRecording = () => {\n        if (recording) {\n            if (root) {\n                const csv = liveDataSet.toCSV()\n                // write async\n                const now = new Date()\n                const name = `data-${now.getFullYear()}-${\n                    now.getMonth() + 1\n                }-${now.getDate()}-${now.getHours()}-${now.getMinutes()}-${now.getSeconds()}.csv`\n                root.fileAsync(name, { create: true })\n                    .then(f => f.write(csv))\n            }\n            setTables([liveDataSet, ...tables])\n            setLiveDataSet(newDataSet(registerIdsChecked, true))\n            setRecording(false)\n\n            enqueueSnackbar(`recording stopped`)\n        }\n    }\n    const startRecording = async () => {\n        if (!starting && !recording && recordingRegisters.length) {\n            // do countdown\n            if (startDelay > 0) {\n                let countdown = Math.ceil(startDelay)\n                while (countdown > 0) {\n                    setCountdown(countdown)\n                    await delay(1000)\n                    countdown--\n                }\n            }\n            setCountdown(-1)\n            setLiveDataSet(newDataSet(registerIdsChecked, false))\n            setRecording(true)\n            if (aggregator) {\n                const client = new SensorAggregatorClient(aggregator)\n                await client.setInputs(createSensorConfig())\n                client.collect(samplingCount)\n            }\n            enqueueSnackbar(`recording started`)\n        }\n    }\n    const startStreamingRegisters = () => {\n        console.log(`start streaming`)\n        const streamers = recordingRegisters?.map(reg =>\n            reg.subscribe(REPORT_UPDATE, () => {})\n        )\n        return () => {\n            console.log(`stop streaming`)\n            streamers.map(streamer => streamer())\n        }\n    }\n    const toggleRecording = () => {\n        if (recording) stopRecording()\n        else startRecording()\n    }\n    const handleSamplingIntervalChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setSamplingIntervalDelay(v)\n    }\n    const handleSamplingDurationChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setSamplingDuration(v)\n    }\n    const handleStartDelayChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const v = parseInt(event.target.value)\n        if (!isNaN(v)) setStartDelay(v)\n    }\n    const handlePrefixChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setPrefix(event.target.value.trim())\n    }\n    const handleTriggerChange = (eventId: string) => setTriggerEventId(eventId)\n    const handleDeleteTable = (table: FieldDataSet) => {\n        const i = tables.indexOf(table)\n        if (i > -1) {\n            tables.splice(i, 1)\n            setTables([...tables])\n        }\n    }\n    const handleAggregatorChecked = (srv: JDService) => () => {\n        const id = srv?.id == aggregatorId ? \"\" : srv?.id\n        setAggregatorId(id)\n    }\n    const updateLiveData = () => {\n        setLiveDataSet(liveDataSet)\n        setRecordingLength(liveDataSet.rows.length)\n        setLiveDataTimestamp(bus.timestamp)\n    }\n    const throttleUpdate = throttle(() => updateLiveData(), 30)\n    // data collection\n    // interval add data entry\n    const addRow = (values?: number[]) => {\n        if (!liveDataSet) return\n        //console.log(values)\n        liveDataSet.addRow(values)\n        if (recording && liveDataSet.length >= samplingCount) {\n            // stop recording\n            updateLiveData()\n            stopRecording()\n        } else {\n            throttleUpdate()\n        }\n    }\n    // setting interval\n    useEffect(() => {\n        console.log(`set interval to ${samplingIntervalDelay}`)\n        recordingRegisters.forEach(reg =>\n            reg.sendSetPackedAsync([samplingIntervalDelay])\n        )\n    }, [samplingIntervalDelay, registerIdsChecked])\n    // collecting\n    useEffect(() => {\n        if (aggregator && recording) return undefined\n        const interval = setInterval(() => addRow(), samplingIntervalDelay)\n        const stopStreaming = startStreamingRegisters()\n        return () => {\n            clearInterval(interval)\n            stopStreaming()\n        }\n    }, [\n        recording,\n        samplingIntervalDelay,\n        samplingCount,\n        registerIdsChecked,\n        aggregator,\n    ])\n    useEffect(() => {\n        if (aggregator) {\n            const client = new SensorAggregatorClient(aggregator)\n            return client.subscribeSample(values => addRow(values))\n        }\n        return () => {}\n    }, [recording, liveDataSet, registerIdsChecked, aggregator])\n\n    return (\n        <div className={classes.root}>\n            <h1>Data Collector</h1>\n            <p>\n                Use this page to collect streaming data from Jacdac devices into\n                various output formats.\n            </p>\n            {!!aggregators.length && (\n                <section id={aggregatorsId}>\n                    <h3>(Optional) Choose a data aggregator</h3>\n                    <p>\n                        A <Link to=\"/services/aggregator\">data aggregator</Link>{\" \"}\n                        service collects collects sensor data on the bus and\n                        returns an aggregated at regular intervals.\n                    </p>\n                    <Grid container spacing={1}>\n                        {aggregators.map(aggregator => (\n                            <Grid key={aggregator.id} item xs={4}>\n                                <Card>\n                                    <DeviceCardHeader\n                                        device={aggregator.device}\n                                        showAvatar={true}\n                                    />\n                                    <CardActions>\n                                        <Switch\n                                            checked={\n                                                aggregatorId == aggregator.id\n                                            }\n                                            disabled={recording}\n                                            onChange={handleAggregatorChecked(\n                                                aggregator\n                                            )}\n                                        />\n                                    </CardActions>\n                                </Card>\n                            </Grid>\n                        ))}\n                    </Grid>\n                </section>\n            )}\n            <section id={sensorsId}>\n                <h3>\n                    Choose sensors &nbsp;\n                    <IconButtonWithTooltip\n                        title=\"start simulator\"\n                        onClick={toggleShowDeviceHostsDialog}\n                    >\n                        <AddIcon />\n                    </IconButtonWithTooltip>\n                </h3>\n                {!readingRegisters.length && (\n                    <Alert className={classes.grow} severity=\"info\">\n                        Waiting for sensor...\n                    </Alert>\n                )}\n                {!!readingRegisters.length && (\n                    <ReadingFieldGrid\n                        readingRegisters={readingRegisters}\n                        registerIdsChecked={registerIdsChecked}\n                        recording={recording}\n                        liveDataSet={liveDataSet}\n                        handleRegisterCheck={handleRegisterCheck}\n                    />\n                )}\n            </section>\n            <section id={recordId}>\n                <h3>Record data</h3>\n                {aggregator && (\n                    <p>\n                        Record the sensor input configuration in order to up\n                        your ML model later on.\n                    </p>\n                )}\n                <div className={classes.buttons}>\n                    <Button\n                        size=\"large\"\n                        variant=\"contained\"\n                        color={recording ? \"secondary\" : \"primary\"}\n                        title={\n                            starting\n                                ? `starting in ${countdown}`\n                                : recording\n                                ? \"stop recording\"\n                                : \"start recording\"\n                        }\n                        onClick={toggleRecording}\n                        startIcon={\n                            starting ? (\n                                <HourglassEmptyIcon />\n                            ) : recording ? (\n                                <StopIcon />\n                            ) : (\n                                <PlayArrowIcon />\n                            )\n                        }\n                        disabled={!startEnabled}\n                    >\n                        {starting\n                            ? countdown + \"\"\n                            : recording\n                            ? \"Stop\"\n                            : \"Start\"}\n                    </Button>\n                    {aggregator && (\n                        <Button\n                            variant=\"contained\"\n                            title=\"save sensor input configuration\"\n                            onClick={saveConfig}\n                            startIcon={<SaveIcon />}\n                            disabled={recording}\n                        >\n                            Save configuration\n                        </Button>\n                    )}\n                </div>\n                <div className={classes.row}>\n                    <TextField\n                        id={samplingIntervalId}\n                        className={classes.field}\n                        disabled={recording}\n                        type=\"number\"\n                        label=\"Sampling interval\"\n                        value={samplingIntervalDelay}\n                        variant=\"outlined\"\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    ms\n                                </InputAdornment>\n                            ),\n                        }}\n                        onChange={handleSamplingIntervalChange}\n                    />\n                    <TextField\n                        id={samplingDurationId}\n                        className={classes.field}\n                        type=\"number\"\n                        disabled={recording}\n                        label=\"Sampling duration\"\n                        value={samplingDuration}\n                        variant=\"outlined\"\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    s\n                                </InputAdornment>\n                            ),\n                        }}\n                        onChange={handleSamplingDurationChange}\n                    />\n                    <TextField\n                        id={startDelayId}\n                        className={classes.field}\n                        type=\"number\"\n                        disabled={recording}\n                        label=\"Start delay\"\n                        value={startDelay}\n                        variant=\"outlined\"\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    s\n                                </InputAdornment>\n                            ),\n                        }}\n                        onChange={handleStartDelayChange}\n                    />\n                    <TextField\n                        id={prefixId}\n                        className={classes.field}\n                        disabled={recording}\n                        label=\"File name prefix\"\n                        value={prefix}\n                        variant=\"outlined\"\n                        onChange={handlePrefixChange}\n                    />\n                    <SelectEvent\n                        events={events}\n                        eventId={triggerEventId}\n                        onChange={handleTriggerChange}\n                        label={\"Start Event\"}\n                        friendlyName={true}\n                    />\n                </div>\n            </section>\n            {!!recordingDevices?.length && (\n                <section id={dashboardId}>\n                    <Grid container spacing={1}>\n                        {recordingDevices?.map(device => (\n                            <DashboardDeviceItem\n                                key={device.id}\n                                device={device}\n                                showAvatar={true}\n                                showHeader={true}\n                            />\n                        ))}\n                    </Grid>\n                </section>\n            )}\n            {liveDataSet && (\n                <Trend\n                    key=\"trends\"\n                    height={12}\n                    dataSet={liveDataSet}\n                    horizon={LIVE_HORIZON}\n                    dot={true}\n                    gradient={true}\n                />\n            )}\n            <FileTabs hideFiles={true} hideDirectories={true} />\n            {!!tables.length && (\n                <section id={recordingsId}>\n                    <h3>Recordings</h3>\n                    <DataSetGrid\n                        tables={tables}\n                        handleDeleteTable={handleDeleteTable}\n                    />\n                </section>\n            )}\n        </div>\n    )\n\n    //{liveDataSet && <DataSetTable key=\"datasettable\" className={classes.segment} dataSet={liveDataSet} maxRows={3} minRows={3} />}\n}\n"],"names":["SensorAggregatorReg","SensorAggregatorSampleType","SRV_SENSOR_AGGREGATOR","bufferToArray","NumberFormat","JD_SERIAL_MAX_PAYLOAD_SIZE","REPORT_RECEIVE","jdpack","JDServiceClient","isReading","serviceSpecificationFromClassIdentifier","assert","bufferConcat","bufferConcatMany","fromHex","SensorAggregatorClient","service","serviceClass","registersUseAcks","setInputs","cfg","error","msg","Error","mapType","tp","U8","U16","U32","I8","I16","I32","inputs","totalSampleSize","map","input","deviceId","serviceIndex","specification","toString","freeze","readingReg","packets","find","sampleType","undefined","sampleSize","sampleShift","field","fields","Math","abs","storage","shift","Uint8Array","unshift","samplingInterval","samplesInWindow","register","Inputs","sendSetAsync","collect","numSamples","StreamingSamples","sendSetPackedAsync","subscribeSample","handler","reg","CurrentSample","mount","subscribe","data","Float32LE","getReg","id","f","refresh","stats","info","NumSamples","r","intValue","SampleSize","Object","keys","Card","CardActions","CardContent","CardHeader","createStyles","Grid","makeStyles","React","useGridBreakpoints","FiberManualRecordIcon","useDeviceName","SwitchWithLabel","useStyles","vmiddle","verticalAlign","ReadingFieldGridItem","props","handleRegisterCheck","recording","registerChecked","liveDataSet","device","gridBreakpoints","classes","deviceName","handleCheck","name","color","colorOf","ReadingFieldGrid","readingRegisters","registerIdsChecked","indexOf","useContext","DashboardDevice","useChange","dashboardServiceWeight","AppContext","DrawerType","DashboardDeviceItem","variant","other","drawerType","breakpoints","breakpointWeight","services","srv","readingRegister","valueRegister","intensityRegister","reduce","c","v","None","xs","sm","md","lg","xl","Chip","OpenInBrowserIcon","FileSystemContext","FileSystemChip","fileSystem","showDirectoryPicker","root","_","handleOpenDirectory","handleCloseDirectory","Dialog","DialogContent","DialogContentText","TextField","DialogActions","Button","useState","AddIcon","useId","FileNewFileChip","newFileName","content","newFileContent","label","extension","open","setOpen","value","setValue","valueId","handleOpen","handleOk","toLocaleLowerCase","replace","createWorkingDirectory","d","workingDirectory","fileAsync","create","write","workingFile","handleCancel","handleValueChange","event","target","FileSystemNodeChip","node","selected","onClick","useRef","useKeyboardNavigationProps","FileTabs","hideDirectories","hideFiles","directoryFilter","fileFilter","newFileLabel","newFileExtension","directories","filter","files","gridRef","keyboardProps","current","handleDirectorySelected","handle","handleFileSelected","keyCodeFromEvent","LEFT_KEY","UP_KEY","RIGHT_KEY","DOWN_KEY","useArrowKeys","options","onLeft","onUp","onRight","onDown","symmetric","handlers","e","charCode","preventDefault","useKeyboardNavigation","parentRef","query","onMove","offset","console","log","focusable","Array","from","querySelectorAll","length","me","findIndex","document","activeElement","next","focus","vertical","onKeyDown","JacdacContext","useServices","bus","JSON","stringify","FormControl","FormHelperText","InputLabel","MenuItem","Select","SelectWithLabel","fullWidth","required","disabled","placeholder","onChange","onClose","children","helperText","type","none","labelId","descrId","hasDescr","FormControlLabel","Switch","rest","itemCount","SelectEvent","events","eventId","friendlyName","handleChange","ev","prettyDuration","ServiceManagerContext","Trend","SaveAltIcon","DeleteIcon","IconButtonWithTooltip","DataSetGrid","tables","handleDeleteTable","fileStorage","handleDownload","table","sep","csv","toCSV","saveText","handelDelete","rows","duration","headers","join","SystemEvent","arrayConcatMany","useEvents","ignoreChange","code","StatusCodeChanged","Change","useEffect","InputAdornment","PlayArrowIcon","StopIcon","SaveIcon","HourglassEmptyIcon","FieldDataSet","Alert","EVENT","REPORT_UPDATE","throttle","uniqueMap","DeviceCardHeader","Link","useChartPalette","isSensor","useDevices","delay","useLocalStorage","theme","marginBottom","spacing","grow","flexGrow","marginRight","segment","marginTop","row","buttons","trend","width","LIVE_HORIZON","createDataSet","registers","live","palette","colors","i","set","maxRows","COLLECTOR_PREFIX","COLLECTOR_SAMPLING_INTERVAL","COLLECTOR_SAMPLING_DURATION","COLLECTOR_START_DELAY","Collector","toggleShowDeviceHostsDialog","enqueueSnackbar","setRegisterIdsChecked","aggregatorId","setAggregatorId","setRecording","setTables","setRecordingLength","prefix","setPrefix","samplingIntervalDelay","setSamplingIntervalDelay","samplingDuration","setSamplingDuration","startDelay","setStartDelay","setLiveDataSet","setLiveDataTimestamp","triggerEventId","setTriggerEventId","countdown","setCountdown","starting","chartPalette","devices","ignoreInfrastructure","announced","recordingRegisters","recordingDevices","aggregators","aggregator","samplingCount","ceil","triggerEvent","startEnabled","aggregatorsId","sensorsId","recordId","recordingsId","dashboardId","samplingIntervalId","samplingDurationId","startDelayId","prefixId","un","toggleRecording","createSensorConfig","saveConfig","sensorConfig","newDataSet","registerIds","splice","push","sort","stopRecording","now","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","then","startRecording","client","startStreamingRegisters","streamers","streamer","handleSamplingIntervalChange","parseInt","isNaN","handleSamplingDurationChange","handleStartDelayChange","handlePrefixChange","trim","handleTriggerChange","handleAggregatorChecked","updateLiveData","timestamp","throttleUpdate","addRow","values","forEach","interval","setInterval","stopStreaming","clearInterval","startAdornment"],"sourceRoot":""}