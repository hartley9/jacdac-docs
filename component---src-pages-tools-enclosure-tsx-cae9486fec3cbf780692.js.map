{"version":3,"file":"component---src-pages-tools-enclosure-tsx-cae9486fec3cbf780692.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,YAAY;AAClC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,4BAA4B,oBAAoB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc;AACd,UAAU,kBAAQ;AAClB,UAAU,kBAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,UAAU,iBAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,EAAE,yBAAe;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE,yBAAe;AACjB;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA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","sources":["webpack://jacdac-docs/./node_modules/use-editable/dist/use-editable.es.js","webpack://jacdac-docs/./src/components/ui/HighlightTextField.tsx","webpack://jacdac-docs/./src/components/tools/EnclosureEditor.tsx","webpack://jacdac-docs/./src/pages/tools/enclosure.tsx"],"sourcesContent":["import { useState, useMemo, useLayoutEffect } from \"react\";\nvar m = {\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n};\n\nfunction p(c) {\n  var a = window.getSelection();\n  a.empty();\n  a.addRange(c);\n}\n\nfunction q(c) {\n  return (c.metaKey || c.ctrlKey) && !c.altKey && \"KeyZ\" === c.code;\n}\n\nfunction r(c) {\n  c = [c.firstChild];\n\n  for (var b, a = \"\"; b = c.pop();) {\n    b.nodeType === Node.TEXT_NODE ? a += b.textContent : b.nodeType === Node.ELEMENT_NODE && \"BR\" === b.nodeName && (a += \"\\n\"), b.nextSibling && c.push(b.nextSibling), b.firstChild && c.push(b.firstChild);\n  }\n\n  \"\\n\" !== a[a.length - 1] && (a += \"\\n\");\n  return a;\n}\n\nfunction w(c) {\n  var a = window.getSelection().getRangeAt(0),\n      b = a.collapsed ? 0 : a.toString().length,\n      f = document.createRange();\n  f.setStart(c, 0);\n  f.setEnd(a.startContainer, a.startOffset);\n  return {\n    position: c = (f = f.toString()).length,\n    extent: b,\n    content: f = (f = f.split(\"\\n\"))[a = f.length - 1],\n    line: a\n  };\n}\n\nfunction C(c, a, b) {\n  0 >= a && (a = 0);\n\n  if (!b || 0 > b) {\n    b = a;\n  }\n\n  var f = document.createRange();\n  c = [c.firstChild];\n\n  for (var d, l = 0, g = a; d = c[c.length - 1];) {\n    if (d.nodeType === Node.TEXT_NODE) {\n      if (l + d.textContent.length >= g) {\n        var h = g - l;\n\n        if (g === a) {\n          if (g = f, h < d.textContent.length ? g.setStart(d, h) : g.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          h < (b = d).textContent.length ? a.setEnd(b, h) : a.setEndAfter(b);\n          break;\n        }\n      }\n\n      l += d.textContent.length;\n    } else if (d.nodeType === Node.ELEMENT_NODE && \"BR\" === d.nodeName) {\n      if (l + 1 >= g) {\n        if (g === a) {\n          if (h = f, 0 < d.textContent.length ? h.setStart(d, 0) : h.setStartAfter(d), b !== a) {\n            g = b;\n            continue;\n          } else {\n            break;\n          }\n        } else {\n          a = f;\n          0 < (b = d).textContent.length ? a.setEnd(b, 0) : a.setEndAfter(b);\n          break;\n        }\n      }\n\n      l++;\n    }\n\n    c.pop();\n    d.nextSibling && c.push(d.nextSibling);\n    d.firstChild && c.push(d.firstChild);\n  }\n\n  return f;\n}\n\nexport function useEditable(c, a, b) {\n  function f(k) {\n    var b = c.current;\n\n    if (b) {\n      var a = w(b);\n      b = r(b);\n      a.position += k.length - b.length;\n      e.position = a;\n      e.onChange(k, a);\n    }\n  }\n\n  function l(k, b) {\n    var e = c.current;\n\n    if (e) {\n      var a = window.getSelection().getRangeAt(0);\n      a.deleteContents();\n      a.collapse();\n      var d = b || 0;\n      (a = C(e, b = (a = w(e)).position + (0 > d ? d : 0), a.position + (0 < d ? d : 0))).deleteContents();\n      k && a.insertNode(document.createTextNode(k));\n      p(C(e, b + k.length));\n    }\n  }\n\n  function d(b) {\n    var a = c.current;\n\n    if (a) {\n      a.focus();\n      var e = 0;\n\n      if (\"number\" == typeof b) {\n        e = b;\n      } else {\n        var k = r(a).split(\"\\n\").slice(0, b.row);\n        b.row && (e += k.join(\"\\n\").length + 1);\n        e += b.column;\n      }\n\n      p(C(a, e));\n    }\n  }\n\n  function g() {\n    var b = c.current;\n    return {\n      text: r(b),\n      position: b = w(b)\n    };\n  }\n\n  function h() {\n    e.observer.disconnect();\n  }\n\n  b || (b = {});\n  var D = useState([])[1],\n      e = useState(function () {\n    var e = {\n      observer: null,\n      disconnected: !1,\n      onChange: a,\n      queue: [],\n      history: [],\n      historyAt: -1,\n      position: null\n    };\n    \"undefined\" != typeof MutationObserver && (e.observer = new MutationObserver(function b(b) {\n      var a;\n      (a = e.queue).push.apply(a, b);\n    }));\n    return e;\n  })[0],\n      n = useMemo(function () {\n    return {\n      update: f,\n      insert: l,\n      move: d,\n      getState: g\n    };\n  }, []);\n\n  if (\"object\" != typeof navigator) {\n    return n;\n  }\n\n  useLayoutEffect(function () {\n    e.onChange = a;\n\n    if (c.current && !b.disabled) {\n      e.disconnected = !1;\n      e.observer.observe(c.current, m);\n\n      if (e.position) {\n        var k = e.position,\n            d = k.position;\n        p(C(c.current, d, d + k.extent));\n      }\n\n      return h;\n    }\n  });\n  useLayoutEffect(function () {\n    if (!c.current || b.disabled) {\n      e.history.length = 0, e.historyAt = -1;\n    } else {\n      var a = c.current;\n\n      if (e.position) {\n        a.focus();\n        var d = e.position,\n            f = d.position;\n        p(C(a, f, f + d.extent));\n      }\n\n      var g = a.style.whiteSpace,\n          h = a.contentEditable,\n          l = !0;\n\n      try {\n        a.contentEditable = \"plaintext-only\";\n      } catch (u) {\n        a.contentEditable = \"true\", l = !1;\n      }\n\n      \"pre\" !== g && (a.style.whiteSpace = \"pre-wrap\");\n      b.indentation && (a.style.tabSize = a.style.MozTabSize = \"\" + b.indentation);\n      d = \"\" + \" \".repeat(b.indentation || 0);\n\n      var x,\n          E = new RegExp(\"^(?:\" + d + \")\"),\n          F = new RegExp(\"^(?:\" + d + \")*(\" + d + \")$\"),\n          t = function t(b) {\n        if (c.current && e.position) {\n          var u = r(a),\n              d = w(a),\n              f = new Date().valueOf(),\n              g = e.history[e.historyAt];\n          !b && 500 > f - x || g && g[1] === u ? x = f : (b = ++e.historyAt, e.history[b] = [d, u], e.history.splice(b + 1), 500 < b && (e.historyAt--, e.history.shift()));\n        }\n      },\n          v = function v() {\n        var b;\n        (b = e.queue).push.apply(b, e.observer.takeRecords());\n        b = w(a);\n\n        if (e.queue.length) {\n          e.observer.disconnect();\n          e.disconnected = !0;\n          var d = r(a);\n          e.position = b;\n\n          for (var c, f; c = e.queue.pop();) {\n            null !== c.oldValue && (c.target.textContent = c.oldValue);\n\n            for (f = c.removedNodes.length - 1; 0 <= f; f--) {\n              c.target.insertBefore(c.removedNodes[f], c.nextSibling);\n            }\n\n            for (f = c.addedNodes.length - 1; 0 <= f; f--) {\n              c.addedNodes[f].parentNode && c.target.removeChild(c.addedNodes[f]);\n            }\n          }\n\n          e.onChange(d, b);\n        }\n      },\n          y = function y(c) {\n        if (!c.defaultPrevented && c.target === a) {\n          if (e.disconnected) {\n            return c.preventDefault(), D([]);\n          }\n\n          if (q(c)) {\n            c.preventDefault(), c.shiftKey ? (c = ++e.historyAt, (c = e.history[c]) || (e.historyAt = e.history.length - 1)) : (c = --e.historyAt, (c = e.history[c]) || (e.historyAt = 0)), c && (e.observer.disconnect(), e.disconnected = !0, e.position = c[0], e.onChange(c[1], c[0]));\n          } else {\n            t();\n\n            if (\"Enter\" === c.key) {\n              c.preventDefault();\n              var d = w(a),\n                  f = /\\S/g.exec(d.content);\n              d = \"\\n\" + d.content.slice(0, f ? f.index : d.content.length);\n              n.insert(d);\n            } else if ((!l || b.indentation) && \"Backspace\" === c.key) {\n              c.preventDefault(), window.getSelection().getRangeAt(0).collapsed ? (d = w(a), d = F.exec(d.content), n.insert(\"\", d ? -d[1].length : -1)) : n.insert(\"\", 0);\n            } else if (b.indentation && \"Tab\" === c.key) {\n              c.preventDefault();\n              f = (d = w(a)).position - d.content.length;\n              var g = r(a);\n              d = c.shiftKey ? g.slice(0, f) + d.content.replace(E, \"\") + g.slice(f + d.content.length) : g.slice(0, f) + (b.indentation ? \" \".repeat(b.indentation) : \"\\t\") + g.slice(f);\n              n.update(d);\n            }\n\n            c.repeat && v();\n          }\n        }\n      },\n          z = function z(b) {\n        b.defaultPrevented || b.isComposing || (q(b) || t(), v(), a.focus());\n      },\n          A = function A(b) {\n        e.position = window.getSelection().rangeCount && b.target === a ? w(a) : null;\n      },\n          B = function B(a) {\n        a.preventDefault();\n        t(!0);\n        n.insert(a.clipboardData.getData(\"text/plain\"));\n        t(!0);\n        v();\n      };\n\n      document.addEventListener(\"selectstart\", A);\n      window.addEventListener(\"keydown\", y);\n      a.addEventListener(\"paste\", B);\n      a.addEventListener(\"keyup\", z);\n      return function () {\n        document.removeEventListener(\"selectstart\", A);\n        window.removeEventListener(\"keydown\", y);\n        a.removeEventListener(\"paste\", B);\n        a.removeEventListener(\"keyup\", z);\n        a.style.whiteSpace = g;\n        a.contentEditable = h;\n      };\n    }\n  }, [c.current, b.disabled, b.indentation]);\n  return n;\n}","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/jsx-key */\nimport React, { useContext, useRef, lazy } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/github\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./DarkModeContext\"\nimport { useEditable } from \"use-editable\"\nimport { Alert } from \"@material-ui/lab\"\nimport { Grid, Tooltip, withStyles } from \"@material-ui/core\"\nimport Suspense from \"../ui/Suspense\"\nconst GithubPullRequestButton = lazy(\n    () => import(\"../buttons/GithubPullRequestButton\")\n)\n\nconst AnnotationTooltip = withStyles(theme => ({\n    arrow: {\n        color: theme.palette.error.main,\n    },\n    tooltip: {\n        backgroundColor: theme.palette.error.main,\n        color: theme.palette.common.white,\n        boxShadow: theme.shadows[1],\n        fontSize: theme.typography.body2.fontSize,\n    },\n}))(Tooltip)\n\nexport default function HighlightTextField(props: {\n    language: string\n    code: string\n    onChange: (newValue: string) => void\n    annotations?: jdspec.Diagnostic[]\n    pullRequestTitle?: string\n    pullRequestPath?: string\n    pullRequestDescription?: string\n}) {\n    const {\n        code,\n        onChange,\n        language,\n        annotations,\n        pullRequestTitle,\n        pullRequestPath,\n        pullRequestDescription,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const editorRef = useRef(null)\n\n    useEditable(editorRef, onChange, {\n        disabled: false,\n        indentation: 4,\n    })\n    return (\n        <Grid container spacing={1} direction=\"row\">\n            <Grid item xs={12}>\n                <Highlight\n                    {...defaultProps}\n                    code={code}\n                    language={language as Language}\n                    theme={theme}\n                >\n                    {({ className, style, tokens, getTokenProps }) => (\n                        <pre\n                            ref={editorRef}\n                            className={className}\n                            spellCheck={false}\n                            style={{\n                                ...style,\n                                ...{\n                                    minHeight: \"12rem\",\n                                    whiteSpace: \"pre-wrap\",\n                                    overflowWrap: \"break-word\",\n                                },\n                            }}\n                        >\n                            {tokens.map((line, i) => {\n                                const annotation = annotations?.find(\n                                    a => a.line === i + 1\n                                )\n                                const title = annotation?.message\n                                const el = (\n                                    <span\n                                        key={i}\n                                        style={\n                                            annotation && {\n                                                borderBottom: \"dashed 1px red\",\n                                            }\n                                        }\n                                    >\n                                        {line\n                                            .filter(token => !token.empty)\n                                            .map((token, key) => (\n                                                <span\n                                                    {...getTokenProps({\n                                                        token,\n                                                        key,\n                                                    })}\n                                                />\n                                            ))}\n                                        {i < tokens.length - 1 ? \"\\n\" : null}\n                                    </span>\n                                )\n                                return title ? (\n                                    <AnnotationTooltip\n                                        title={title}\n                                        arrow\n                                        key={i}\n                                    >\n                                        {el}\n                                    </AnnotationTooltip>\n                                ) : (\n                                    el\n                                )\n                            })}\n                        </pre>\n                    )}\n                </Highlight>\n            </Grid>\n            {!!annotations?.length && (\n                <Grid item xs={12}>\n                    <Alert severity=\"error\">\n                        <ul>\n                            {annotations.map((a, i) => (\n                                <li key={i}>\n                                    line {a.line}: {a.message}\n                                </li>\n                            ))}\n                        </ul>\n                    </Alert>\n                </Grid>\n            )}\n            {pullRequestTitle && pullRequestPath && (\n                <Grid item>\n                    <Suspense>\n                        <GithubPullRequestButton\n                            title={pullRequestTitle}\n                            head={pullRequestPath}\n                            description={pullRequestDescription}\n                            files={{\n                                [pullRequestPath + \".md\"]: code,\n                            }}\n                        />\n                    </Suspense>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React, { lazy, useMemo } from \"react\"\nimport { Button, Grid } from \"@material-ui/core\"\nimport useLocalStorage from \"../hooks/useLocalStorage\"\nimport HighlightTextField from \"../ui/HighlightTextField\"\nimport type {\n    EnclosureModel,\n    EnclosureOptions,\n} from \"../../workers/cad/dist/node_modules/enclosurecad\"\nimport Suspense from \"../ui/Suspense\"\nconst EnclosureGenerator = lazy(() => import(\"./EnclosureGenerator\"))\n\nconst STORAGE_KEY = \"jacdac:enclosureeditorkey\"\nconst DEFAULT_MODEL = {\n    box: {\n        width: 22,\n        height: 29,\n        depth: 10,\n    },\n    rings: [\n        {\n            x: 7.5,\n            y: 7.5,\n        },\n        {\n            x: -7.5,\n            y: -7.5,\n        },\n        {\n            x: -7.5,\n            y: 7.5,\n        },\n        {\n            x: 7.5,\n            y: -7.5,\n        },\n    ],\n    connectors: [\n        {\n            x: 0,\n            y: 7.5,\n            dir: \"top\",\n            type: \"jacdac\",\n        },\n        {\n            x: 0,\n            y: 7.5,\n            dir: \"bottom\",\n            type: \"jacdac\",\n        },\n    ],\n}\n\nexport default function EnclosureEditor() {\n    const [source, setSource] = useLocalStorage(\n        STORAGE_KEY,\n        JSON.stringify(DEFAULT_MODEL, null, 4)\n    )\n    const options: EnclosureOptions = useMemo(\n        () => ({\n            legs: { type: \"well\" },\n            cover: {\n                mounts: {\n                    type: \"ring\",\n                },\n            },\n        }),\n        []\n    )\n    const enclosure: EnclosureModel = useMemo(() => {\n        try {\n            return JSON.parse(source)\n        } catch (e) {\n            console.debug(e)\n            return undefined\n        }\n    }, [source])\n    const handleFormat = () => {\n        setSource(JSON.stringify(enclosure, null, 4))\n    }\n    return (\n        <Grid spacing={1} container>\n            <Grid item xs={12}>\n                <Button\n                    variant=\"outlined\"\n                    onClick={handleFormat}\n                    disabled={!enclosure}\n                >\n                    Format code\n                </Button>\n            </Grid>\n            <Grid item xs={12}>\n                <HighlightTextField\n                    code={source}\n                    language={\"json\"}\n                    onChange={setSource}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <Suspense>\n                    <EnclosureGenerator\n                        module={enclosure}\n                        options={options}\n                        color=\"#777\"\n                    />\n                </Suspense>\n            </Grid>\n        </Grid>\n    )\n}\n","import React from \"react\"\nimport EnclosureEditor from \"../../components/tools/EnclosureEditor\"\n\nexport default function Page() {\n    return <EnclosureEditor />\n}\n"],"names":["React","useContext","useRef","lazy","Highlight","defaultProps","LIGHT_THEME","DARK_THEME","DarkModeContext","useEditable","Alert","Grid","Tooltip","withStyles","Suspense","GithubPullRequestButton","AnnotationTooltip","theme","arrow","color","palette","error","main","tooltip","backgroundColor","common","white","boxShadow","shadows","fontSize","typography","body2","HighlightTextField","props","code","onChange","language","annotations","pullRequestTitle","pullRequestPath","pullRequestDescription","darkMode","editorRef","disabled","indentation","className","style","tokens","getTokenProps","minHeight","whiteSpace","overflowWrap","map","line","i","annotation","find","a","title","message","el","borderBottom","filter","token","empty","key","length","useMemo","Button","useLocalStorage","EnclosureGenerator","STORAGE_KEY","DEFAULT_MODEL","box","width","height","depth","rings","x","y","connectors","dir","type","EnclosureEditor","source","setSource","JSON","stringify","options","legs","cover","mounts","enclosure","parse","e","console","debug","undefined","handleFormat","Page"],"sourceRoot":""}