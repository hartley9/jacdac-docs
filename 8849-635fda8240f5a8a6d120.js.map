{"version":3,"file":"8849-635fda8240f5a8a6d120.js","mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA,SAASQ,UAAT,GAAsB;AAClB,MAAMC,UAAU,GAAGP,8CAAO,CACtB;AAAA;;AAAA,WACI,OAAOQ,MAAP,KAAkB,WAAlB,IACA,CAAC,wBAAC,WAAAA,MAAM,EAACC,UAAR,wEAAC,iCAAoB,4BAApB,CAAD,kDAAC,sBAAmDC,OAApD,CAFL;AAAA,GADsB,EAItB,EAJsB,CAA1B;AAMA,SAAO;AAAEH,IAAAA;AAAF,GAAP;AACH;;AAEc,SAASI,gBAAT,CAA0BC,KAA1B,EAA8C;AACzD,MAAM;AAAEL,IAAAA;AAAF,MAAiBD,UAAU,EAAjC;AACA,MAAM;AAAA,OAACO,WAAD;AAAA,OAAcC;AAAd,MAAgCb,+CAAQ,CAAC,KAAD,CAA9C;AACA,MAAM;AAAA,OAACc,aAAD;AAAA,OAAgBC;AAAhB,MAAoCf,+CAAQ,CAAC,IAAD,CAAlD;AACA,MAAM;AAAEgB,IAAAA;AAAF,MAAsBlB,iDAAU,CAACK,6DAAD,CAAtC;AACA,MAAM;AAAEc,IAAAA;AAAF,MAAiBb,yEAAY,EAAnC,CALyD,CAOzD;;AACAH,EAAAA,0EAAc,EACV;AACA,uBAFU,EAGViB,CAAC,IAAI;AACDD,IAAAA,UAAU,CAAC,mBAAD,CAAV;AACAC,IAAAA,CAAC,CAACC,cAAF;AACAN,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAE,IAAAA,gBAAgB,CAACG,CAAD,CAAhB;AACH,GARS,EASV,KATU,EAUV,EAVU,CAAd,CARyD,CAqBzD;;AACAjB,EAAAA,0EAAc,CAAC,cAAD,EAAwB,MAAM;AACxCgB,IAAAA,UAAU,CAAC,eAAD,CAAV;AACAD,IAAAA,eAAe,CAAC,uBAAD,EAA0B,SAA1B,CAAf;AACH,GAHa,CAAd;AAKA,MAAI,CAACJ,WAAD,IAAgBN,UAApB,EAAgC,OAAO,IAAP;;AAEhC,MAAMc,OAAO;AAAA,gHAAG,WAAOC,GAAP,EAAoD;AAChEA,MAAAA,GAAG,CAACF,cAAJ;AACA,YAAML,aAAN,aAAMA,aAAN,uBAAMA,aAAa,CAAEQ,MAAf,EAAN;AACH,KAHY;;AAAA,oBAAPF,OAAO;AAAA;AAAA;AAAA,KAAb;;AAIA,sBACI,iDAAC,8DAAD;AACI,kBAAW,qBADf;AAEI,SAAK,EAAC,qBAFV;AAGI,WAAO,EAAEA,OAHb;AAII,WAAO,EAAC;AAJZ,KAKQT,KALR,aADJ;AAWH","sources":["webpack://jacdac-docs/./src/components/ui/InstallPWAButton.tsx"],"sourcesContent":["import React, { useContext, useMemo, useState } from \"react\"\nimport useWindowEvent from \"../hooks/useWindowEvent\"\nimport { Button, ButtonProps } from \"@mui/material\"\nimport AppContext from \"../AppContext\"\nimport useAnalytics from \"../hooks/useAnalytics\"\n\nfunction usePWAInfo() {\n    const standAlone = useMemo(\n        () =>\n            typeof window !== \"undefined\" &&\n            !!window.matchMedia?.(\"(display-mode: standalone)\")?.matches,\n        []\n    )\n    return { standAlone }\n}\n\nexport default function InstallPWAButton(props: ButtonProps) {\n    const { standAlone } = usePWAInfo()\n    const [supportsPWA, setSupportsPWA] = useState(false)\n    const [promptInstall, setPromptInstall] = useState(null)\n    const { enqueueSnackbar } = useContext(AppContext)\n    const { trackEvent } = useAnalytics()\n\n    // listen for prompt\n    useWindowEvent(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        \"beforeinstallprompt\" as any,\n        e => {\n            trackEvent(\"app.beforeinstall\")\n            e.preventDefault()\n            setSupportsPWA(true)\n            setPromptInstall(e)\n        },\n        false,\n        []\n    )\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    useWindowEvent(\"appinstalled\" as any, () => {\n        trackEvent(\"app.installed\")\n        enqueueSnackbar(\"Jacdac app installed!\", \"success\")\n    })\n\n    if (!supportsPWA || standAlone) return null\n\n    const onClick = async (evt: React.MouseEvent<HTMLButtonElement>) => {\n        evt.preventDefault()\n        await promptInstall?.prompt()\n    }\n    return (\n        <Button\n            aria-label=\"Install application\"\n            title=\"Install application\"\n            onClick={onClick}\n            variant=\"outlined\"\n            {...props}\n        >\n            Install\n        </Button>\n    )\n}\n"],"names":["React","useContext","useMemo","useState","useWindowEvent","Button","AppContext","useAnalytics","usePWAInfo","standAlone","window","matchMedia","matches","InstallPWAButton","props","supportsPWA","setSupportsPWA","promptInstall","setPromptInstall","enqueueSnackbar","trackEvent","e","preventDefault","onClick","evt","prompt"],"sourceRoot":""}