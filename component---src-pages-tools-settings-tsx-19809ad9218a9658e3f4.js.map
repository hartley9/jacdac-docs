{"version":3,"file":"component---src-pages-tools-settings-tsx-19809ad9218a9658e3f4.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/SystemUpdateAlt.js","webpack://jacdac-docs/./jacdac-ts/src/jdom/clients/settingsclient.ts","webpack://jacdac-docs/./src/components/alert/ConnectAlert.tsx","webpack://jacdac-docs/./src/components/hooks/useLocationSearchParam.ts","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/SwitchWithLabel.tsx","webpack://jacdac-docs/./src/components/useServiceClient.ts","webpack://jacdac-docs/./src/components/SettingsCard.tsx","webpack://jacdac-docs/./src/pages/tools/settings.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z\"\n}), 'SystemUpdateAlt');\n\nexports.default = _default;","import { CHANGE, SettingsCmd } from \"../constants\"\nimport { jdpack, jdunpack } from \"../pack\"\nimport Packet from \"../packet\"\nimport { InPipeReader } from \"../pipes\"\nimport JDService from \"../service\"\nimport { JDServiceClient } from \"../serviceclient\"\nimport { bufferToString, stringToBuffer } from \"../utils\"\n\n/**\n * A settings service client implementation.\n * @category Clients\n */\nexport class SettingsClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        service.registersUseAcks = true\n    }\n\n    async clear() {\n        await this.service.sendCmdAsync(SettingsCmd.Clear)\n    }\n\n    async listKeys(): Promise<string[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.ListKeys),\n            true\n        )\n        const { output } = await inp.readAll()\n        const keys = output.map(pkt => pkt.stringData)\n        return keys.filter(k => !!k)\n    }\n\n    async list(): Promise<{ key: string; value?: Uint8Array }[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.List),\n            true\n        )\n        const { output } = await inp.readAll()\n        return output\n            .map(pkt => {\n                const [key, value] = pkt.jdunpack<[string, Uint8Array]>(\"z b\")\n                return key && { key, value }\n            })\n            .filter(kv => !!kv)\n    }\n\n    async setValue(key: string, value: Uint8Array) {\n        key = key.trim()\n        if (value === undefined) {\n            await this.deleteValue(key)\n        } else {\n            const pkt = Packet.from(\n                SettingsCmd.Set,\n                jdpack(\"z b\", [key, value])\n            )\n            await this.service.sendPacketAsync(pkt)\n            this.emit(CHANGE)\n        }\n    }\n\n    async setStringValue(key: string, value: string) {\n        await this.setValue(key, value ? stringToBuffer(value) : undefined)\n    }\n\n    async getValue(key: string): Promise<Uint8Array> {\n        if (!key) return undefined\n\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Get, jdpack(\"s\", [key]))\n        const resp = await this.service.sendCmdAwaitResponseAsync(pkt)\n        const [rkey, value] = jdunpack<[string, Uint8Array]>(resp.data, \"z b\")\n        if (key !== rkey) {\n            console.error(\n                `device returned different key, got \"${rkey}\", expected \"${key}\"`\n            )\n            return undefined\n        }\n        return value\n    }\n\n    async getStringValue(key: string) {\n        const value = await this.getValue(key)\n        return value && bufferToString(value)\n    }\n\n    async deleteValue(key: string) {\n        if (!key) return\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Delete, jdpack(\"s\", [key]))\n        await this.service.sendPacketAsync(pkt)\n\n        this.emit(CHANGE)\n    }\n}\nexport default SettingsClient\n","// tslint:disable-next-line: no-submodule-imports\nimport { Box } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { NoSsr } from \"@material-ui/core\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\nimport useDevices from \"../hooks/useDevices\"\n\nfunction NoSsrConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    const { serviceClass, closeable } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useDevices({ serviceClass, ignoreInfrastructure: true })\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={closeable}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                <Box component=\"span\" ml={2}>\n                    <ConnectButtons full=\"always\" transparent={true} />\n                </Box>\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import { useMemo } from \"react\"\n\nexport function useLocationSearchParamString(key: string): string {\n    return useMemo(() => {\n        if (typeof window !== \"undefined\") {\n            const url = new URL(window.location.href)\n            return url.searchParams.get(key)\n        }\n        return undefined\n    }, [key])\n}\n\nexport function useLocationSearchParamBoolean(\n    key: string,\n    defaultValue: boolean\n): boolean {\n    return useMemo(() => {\n        if (typeof window !== \"undefined\") {\n            const url = new URL(window.location.href)\n            const v = url.searchParams.get(key)\n            console.log({ key, url, v })\n            if (v) {\n                if (v === \"1\" || v === \"true\" || v === \"yes\") return true\n                else if (v === \"0\" || v === \"false\" || v === \"no\") return false\n                else return defaultValue\n            }\n            // empty value means true\n            if (url.searchParams.has(key)) return true\n            return defaultValue\n        }\n        return undefined\n    }, [key, defaultValue])\n}\n","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import { FormControlLabel, Switch, SwitchProps } from \"@material-ui/core\"\nimport React, { ReactNode } from \"react\"\n\nexport default function SwitchWithLabel(\n    props: { label: ReactNode } & SwitchProps\n) {\n    const { label, ...rest } = props\n    return <FormControlLabel control={<Switch {...rest} />} label={label} />\n}\n","import { useEffect, useState } from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport { JDServiceClient } from \"../../jacdac-ts/src/jdom/serviceclient\"\n\nexport default function useServiceClient<T extends JDServiceClient>(\n    service: JDService,\n    factory: (service: JDService) => T,\n    deps: React.DependencyList = []\n) {\n    const [client, setClient] = useState<T>(undefined)\n\n    useEffect(() => {\n        const c = service && factory(service)\n        setClient(c)\n        return () => c?.unmount()\n    }, [service, ...deps]) // don't use factory in cache!\n\n    return client\n}\n","import {\n    Card,\n    CardActions,\n    CardContent,\n    Grid,\n    TextField,\n} from \"@material-ui/core\"\nimport React, {\n    ChangeEvent,\n    lazy,\n    useCallback,\n    useContext,\n    useState,\n} from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport DeviceCardHeader from \"./devices/DeviceCardHeader\"\nimport useServiceClient from \"./useServiceClient\"\nimport SettingsClient from \"../../jacdac-ts/src/jdom/clients/settingsclient\"\nimport { useChangeAsync } from \"../jacdac/useChange\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@material-ui/icons/Delete\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport AddIcon from \"@material-ui/icons/Add\"\nimport CmdButton from \"./CmdButton\"\nimport { useId } from \"react-use-id-hook\"\nimport LoadingProgress from \"./ui/LoadingProgress\"\nimport SwitchWithLabel from \"./ui/SwitchWithLabel\"\nimport { bufferToString } from \"../../jacdac-ts/src/jdom/utils\"\nimport { randomDeviceId } from \"../../jacdac-ts/src/jdom/random\"\nimport { Button } from \"gatsby-material-ui-components\"\nimport ServiceManagerContext from \"./ServiceManagerContext\"\nimport Suspense from \"./ui/Suspense\"\nimport AppContext from \"./AppContext\"\nimport SystemUpdateAltIcon from \"@material-ui/icons/SystemUpdateAlt\"\n\nconst ImportButton = lazy(() => import(\"./ImportButton\"))\n\nfunction SettingRow(props: {\n    client: SettingsClient\n    name: string\n    value?: string\n    mutable: boolean\n    showSecrets: boolean\n    autoKey: boolean\n}) {\n    const { client, name, value, mutable, autoKey } = props\n    const isSecret = name[0] == \"$\"\n    const displayName = isSecret ? name.slice(1) : name\n    const handleComponentDelete = async () => {\n        await client.deleteValue(name)\n    }\n    const keyId = useId()\n    const valueId = useId()\n    const nameError = \"\"\n    const valueError = \"\"\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={1}>\n                {!autoKey && (\n                    <Grid item>\n                        <TextField\n                            id={keyId}\n                            error={!!nameError}\n                            variant=\"outlined\"\n                            label=\"key\"\n                            helperText={nameError}\n                            value={displayName}\n                            disabled={true}\n                        />\n                    </Grid>\n                )}\n                <Grid item xs>\n                    <TextField\n                        id={valueId}\n                        fullWidth={true}\n                        error={!!valueError}\n                        variant=\"outlined\"\n                        helperText={valueError}\n                        value={isSecret ? \"...\" : value}\n                        disabled={true}\n                    />\n                </Grid>\n                {mutable && (\n                    <Grid item>\n                        <CmdButton\n                            trackName=\"settings.delete\"\n                            title=\"Delete settings\"\n                            onClick={handleComponentDelete}\n                            icon={<DeleteIcon />}\n                        />\n                    </Grid>\n                )}\n            </Grid>\n        </Grid>\n    )\n}\n\nfunction AddSettingRow(props: {\n    client: SettingsClient\n    keyPrefix: string\n    showSecrets: boolean\n    autoKey: boolean\n}) {\n    const { client, keyPrefix, showSecrets, autoKey } = props\n    const [name, setName] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const [secret, setSecret] = useState(showSecrets)\n    const keyId = useId()\n    const valueId = useId()\n\n    const handleNameChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setName(ev.target.value.trim())\n    }\n    const handleValueChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setValue(ev.target.value)\n    }\n    const handleChecked = (ev, checked: boolean) => {\n        setSecret(checked)\n    }\n    const handleAdd = async mounted => {\n        const keyName = autoKey ? randomDeviceId() : name\n        const key = `${secret ? \"$\" : \"\"}${keyPrefix || \"\"}${keyName}`\n        await client.setStringValue(key, value)\n        if (!mounted()) return\n        setName(\"\")\n        setValue(\"\")\n        setSecret(showSecrets)\n    }\n    const keyError = \"\"\n    const valueError = \"\"\n\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={1} alignContent=\"center\">\n                {!autoKey && (\n                    <Grid item>\n                        <TextField\n                            id={keyId}\n                            error={!!keyError}\n                            variant=\"outlined\"\n                            label=\"Add key\"\n                            helperText={keyError}\n                            value={name}\n                            onChange={handleNameChange}\n                        />\n                    </Grid>\n                )}\n                <Grid item xs>\n                    <TextField\n                        id={valueId}\n                        fullWidth={true}\n                        error={!!valueError}\n                        variant=\"outlined\"\n                        label=\"value\"\n                        helperText={valueError}\n                        value={value}\n                        onChange={handleValueChange}\n                    />\n                </Grid>\n                {showSecrets && (\n                    <Grid item>\n                        <SwitchWithLabel\n                            checked={secret}\n                            onChange={handleChecked}\n                            label=\"Secret\"\n                        />\n                    </Grid>\n                )}\n                <Grid item>\n                    <CmdButton\n                        trackName=\"settings.add\"\n                        variant=\"contained\"\n                        disabled={\n                            (!autoKey && !name) || !!keyError || !!valueError\n                        }\n                        title=\"Add setting\"\n                        onClick={handleAdd}\n                        icon={<AddIcon />}\n                    />\n                </Grid>\n            </Grid>\n        </Grid>\n    )\n}\n\nfunction ImportSettingsButton(props: { client: SettingsClient }) {\n    const { client } = props\n    const { setError } = useContext(AppContext)\n\n    const handleFilesUploaded = async (files: File[]) => {\n        for (const file of files) {\n            try {\n                const text = await file.text()\n                const json = JSON.parse(text)\n                if (Array.isArray(json)) {\n                    for (const entry of json as {\n                        key: string\n                        value: string\n                    }[]) {\n                        const { key, value } = entry\n                        if (key) await client.setStringValue(key, value)\n                    }\n                }\n            } catch (e) {\n                console.warn(e)\n                setError(`invalid file ${file.name}`)\n            }\n        }\n    }\n    return (\n        <Suspense>\n            <ImportButton\n                icon={false}\n                text=\"Import\"\n                onFilesUploaded={handleFilesUploaded}\n                acceptedFiles={[\"application/json\"]}\n            />\n        </Suspense>\n    )\n}\n\nexport default function SettingsCard(props: {\n    service: JDService\n    mutable?: boolean\n    keyPrefix?: string\n    showSecrets?: boolean\n    autoKey?: boolean\n}) {\n    const { service, mutable, keyPrefix = \"\", showSecrets, autoKey } = props\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const factory = useCallback(srv => new SettingsClient(srv), [])\n    const client = useServiceClient(service, factory)\n    const values = useChangeAsync(\n        client,\n        async c => {\n            const keys = await c?.list()\n            return keys\n                ?.filter(({ key }) => !keyPrefix || key.startsWith(keyPrefix))\n                .map(({ key, value }) => ({\n                    key,\n                    value: bufferToString(value),\n                }))\n        },\n        [keyPrefix]\n    )\n\n    const secrets = values?.filter(value => showSecrets && value.key[0] === \"$\")\n    const publics = values?.filter(value => value.key[0] !== \"$\")\n\n    const handleClear = async () => await client?.clear()\n    const handleExport = () =>\n        fileStorage.saveText(\n            \"settings.json\",\n            JSON.stringify(publics || {}, null, 2)\n        )\n\n    if (!client) return <LoadingProgress /> // wait till loaded\n\n    return (\n        <Card>\n            <DeviceCardHeader device={service.device} showAvatar={true} />\n            <CardContent>\n                <Grid container spacing={2}>\n                    {mutable && (\n                        <AddSettingRow\n                            client={client}\n                            keyPrefix={keyPrefix}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    )}\n                    {publics?.map(({ key, value }) => (\n                        <SettingRow\n                            key={key}\n                            name={key}\n                            value={value}\n                            client={client}\n                            mutable={mutable}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    ))}\n                    {!!secrets?.length && (\n                        <Grid item xs={12}>\n                            Secrets\n                        </Grid>\n                    )}\n                    {secrets?.map(({ key, value }) => (\n                        <SettingRow\n                            key={key}\n                            name={key}\n                            value={value}\n                            client={client}\n                            mutable={mutable}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    ))}\n                </Grid>\n            </CardContent>\n            <CardActions>\n                <Grid container spacing={1} direction=\"row\">\n                    {mutable && (\n                        <Grid item>\n                            <CmdButton\n                                variant=\"outlined\"\n                                trackName=\"settings.clearall\"\n                                title=\"Clear all settings\"\n                                icon={<DeleteIcon />}\n                                onClick={handleClear}\n                            >\n                                Clear\n                            </CmdButton>\n                        </Grid>\n                    )}\n                    <Grid item>\n                        <Button\n                            variant=\"outlined\"\n                            title=\"export\"\n                            disabled={!values}\n                            onClick={handleExport}\n                            startIcon={<SystemUpdateAltIcon />}\n                        >\n                            Export\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <ImportSettingsButton client={client} />\n                    </Grid>\n                </Grid>\n            </CardActions>\n        </Card>\n    )\n}\n","import React from \"react\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { Grid } from \"@material-ui/core\"\nimport { SRV_SETTINGS } from \"../../../jacdac-ts/src/jdom/constants\"\nimport ConnectAlert from \"../../components/alert/ConnectAlert\"\nimport SettingsCard from \"../../components/SettingsCard\"\nimport useServices from \"../../components/hooks/useServices\"\nimport useServiceProviderFromServiceClass from \"../../components/hooks/useServiceProviderFromServiceClass\"\nimport {\n    useLocationSearchParamBoolean,\n    useLocationSearchParamString,\n} from \"../../components/hooks/useLocationSearchParam\"\n\nexport default function Page() {\n    // spin up provider on demand\n    useServiceProviderFromServiceClass(SRV_SETTINGS)\n    const services = useServices({ serviceClass: SRV_SETTINGS })\n    const keyPrefix = useLocationSearchParamString(\"prefix\")\n    const autoKey = useLocationSearchParamBoolean(\"autokey\", false)\n    const showSecrets = useLocationSearchParamBoolean(\"secrets\", true)\n\n    return (\n        <>\n            <h1>Devices Settings</h1>\n            <p>\n                Configure &npsp;<Link to=\"/services/settings/\">settings</Link>{\" \"}\n                services.\n            </p>\n            <ConnectAlert serviceClass={SRV_SETTINGS} />\n            <Grid container spacing={1}>\n                {services.map(service => (\n                    <Grid key={service.id} item xs={12} lg={6}>\n                        <SettingsCard\n                            service={service}\n                            mutable={true}\n                            keyPrefix={keyPrefix}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    </Grid>\n                ))}\n            </Grid>\n            <h2>Advanced</h2>\n            <p>\n                You can use various URL argument to modify the behavior of this\n                page.\n            </p>\n            <ul>\n                <li>\n                    <code>prefix=JD</code>, will prefix and filter keys with{\" \"}\n                    <code>JD</code>.\n                </li>\n                <li>\n                    <code>autokey</code>, will automatically generate random\n                    keys for entries. Default is false.\n                </li>\n                <li>\n                    <code>secrets=0</code>, disables secrets\n                </li>\n            </ul>\n        </>\n    )\n}\n"],"names":["CHANGE","SettingsCmd","jdpack","jdunpack","Packet","InPipeReader","JDServiceClient","bufferToString","stringToBuffer","SettingsClient","service","registersUseAcks","clear","sendCmdAsync","Clear","listKeys","inp","bus","sendPacketAsync","openCommand","ListKeys","output","readAll","keys","map","pkt","stringData","filter","k","list","List","key","value","kv","setValue","trim","undefined","deleteValue","from","Set","emit","setStringValue","getValue","Get","resp","sendCmdAwaitResponseAsync","rkey","data","console","error","getStringValue","Delete","Box","Alert","React","useContext","serviceSpecificationFromClassIdentifier","JacdacContext","NoSsr","ConnectButtons","useDevices","NoSsrConnectAlert","props","serviceClass","closeable","transports","devices","ignoreInfrastructure","spec","length","name","ConnectAlert","useMemo","useLocationSearchParamString","window","url","URL","location","href","searchParams","get","useLocationSearchParamBoolean","defaultValue","v","log","has","useChange","useServices","options","services","_","JSON","stringify","FormControlLabel","Switch","SwitchWithLabel","label","rest","useEffect","useState","useServiceClient","factory","deps","client","setClient","c","unmount","Card","CardActions","CardContent","Grid","TextField","lazy","useCallback","DeviceCardHeader","useChangeAsync","DeleteIcon","AddIcon","CmdButton","useId","LoadingProgress","randomDeviceId","Button","ServiceManagerContext","Suspense","AppContext","SystemUpdateAltIcon","ImportButton","SettingRow","mutable","autoKey","isSecret","displayName","slice","handleComponentDelete","keyId","valueId","nameError","valueError","AddSettingRow","keyPrefix","showSecrets","setName","secret","setSecret","handleNameChange","ev","target","handleValueChange","handleChecked","checked","handleAdd","mounted","keyName","keyError","ImportSettingsButton","setError","handleFilesUploaded","files","file","text","json","parse","Array","isArray","entry","e","warn","SettingsCard","fileStorage","srv","values","startsWith","secrets","publics","handleClear","handleExport","saveText","device","Link","SRV_SETTINGS","useServiceProviderFromServiceClass","Page","id"],"sourceRoot":""}