{"version":3,"file":"010bed8ca38c96135e5d2d69c8213a27f3e3e298-e7b1baec9d7bc069f9c4.js","mappings":";;;;;;;AAAa;;AAEb,6BAA6B,mBAAO,CAAC,KAA8C;;AAEnF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E,kBAAkB,mBAAO,CAAC,KAAmB;;AAE7C;AACA;AACA,CAAC;;AAED,SAAe;;;;;;;;ACjBF;;AAEb,6BAA6B,mBAAO,CAAC,KAA8C;;AAEnF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E,kBAAkB,mBAAO,CAAC,KAAmB;;AAE7C;AACA;AACA,CAAC;;AAED,SAAe;;;;;;;;ACjBF;;AAEb,6BAA6B,mBAAO,CAAC,KAA8C;;AAEnF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E,kBAAkB,mBAAO,CAAC,KAAmB;;AAE7C;AACA;AACA,CAAC;;AAED,SAAe;;;;;;;;ACjBF;;AAEb,6BAA6B,mBAAO,CAAC,KAA8C;;AAEnF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E,kBAAkB,mBAAO,CAAC,KAAmB;;AAE7C;AACA;AACA,CAAC;;AAED,SAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjB0D;AAClE;AACP,SAAS,uCAAoB;AAC7B;AACA,yBAAyB,yCAAsB;AAC/C,mEAAe,kEAAkB;;;;ACLmE;AAC1C;AAC1D;AAC+B;AACP;AAC8C;AAChC;AACc;AACc;AAClB;;AAEhD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,SAAS,iCAAc,QAAQ,0BAA0B;AACzD;;AAEA,sBAAsB,0BAAM;AAC5B;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,CAAC;AACD;AACA;AACA,IAAI;AACJ,SAAS,8BAAQ;AACjB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,+BAA+B,gBAAgB;AAC/C,cAAc,gCAAa;AAC3B;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,IAAI;AACJ,cAAc,+CAA6B;;AAE3C,mBAAmB,8BAAQ,GAAG;AAC9B;AACA,GAAG;;AAEH;AACA,sBAAsB,mBAAI,kBAAkB,8BAAQ;AACpD,eAAe,qBAAI;AACnB;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,4DAAe,WAAW;;;;;;;;;;;;;;;;;;ACrE1B;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;AACO,IAAMS,cAAb;AAAA;;AACI,0BAAYC,OAAZ,EAAgC;AAAA;;AAC5B,wCAAMA,OAAN;AACAA,IAAAA,OAAO,CAACC,gBAAR,GAA2B,IAA3B;AAF4B;AAG/B;;AAJL;;AAAA,SAMUC,KANV;AAAA,kHAMI,aAAc;AACV,YAAM,KAAKF,OAAL,CAAaG,YAAb,CAA0BZ,0EAA1B,CAAN;AACH,KARL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAUUc,QAVV;AAAA,qHAUI,aAAoC;AAChC,UAAMC,GAAG,GAAG,IAAIX,0DAAJ,CAAiB,KAAKY,GAAtB,CAAZ;AACA,YAAM,KAAKP,OAAL,CAAaQ,eAAb,CACFF,GAAG,CAACG,WAAJ,CAAgBlB,gFAAhB,CADE,EAEF,IAFE,CAAN;AAIA,UAAM;AAAEoB,QAAAA;AAAF,gBAAmBL,GAAG,CAACM,OAAJ,EAAzB;AACA,UAAMC,IAAI,GAAGF,MAAM,CAACG,GAAP,CAAWC,GAAG,IAAIA,GAAG,CAACC,UAAtB,CAAb;AACA,aAAOH,IAAI,CAACI,MAAL,CAAYC,CAAC,IAAI,CAAC,CAACA,CAAnB,CAAP;AACH,KAnBL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAqBUC,IArBV;AAAA,iHAqBI,aAA6D;AACzD,UAAMb,GAAG,GAAG,IAAIX,0DAAJ,CAAiB,KAAKY,GAAtB,CAAZ;AACA,YAAM,KAAKP,OAAL,CAAaQ,eAAb,CACFF,GAAG,CAACG,WAAJ,CAAgBlB,wEAAhB,CADE,EAEF,IAFE,CAAN;AAIA,UAAM;AAAEoB,QAAAA;AAAF,gBAAmBL,GAAG,CAACM,OAAJ,EAAzB;AACA,aAAOD,MAAM,CACRG,GADE,CACEC,GAAG,IAAI;AACR,YAAM,CAACM,GAAD,EAAMC,KAAN,IAAeP,GAAG,CAACtB,QAAJ,CAAmC,KAAnC,CAArB;AACA,eAAO4B,GAAG,IAAI;AAAEA,UAAAA,GAAF;AAAOC,UAAAA;AAAP,SAAd;AACH,OAJE,EAKFL,MALE,CAKKM,EAAE,IAAI,CAAC,CAACA,EALb,CAAP;AAMH,KAlCL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAoCUC,QApCV;AAAA,qHAoCI,WAAeH,GAAf,EAA4BC,KAA5B,EAA+C;AAC3CD,MAAAA,GAAG,GAAGA,GAAG,CAACI,IAAJ,EAAN;;AACA,UAAIH,KAAK,KAAKI,SAAd,EAAyB;AACrB,cAAM,KAAKC,WAAL,CAAiBN,GAAjB,CAAN;AACH,OAFD,MAEO;AACH,YAAMN,GAAG,GAAGrB,kEAAA,CACRH,sEADQ,EAERC,uDAAM,CAAC,KAAD,EAAQ,CAAC6B,GAAD,EAAMC,KAAN,CAAR,CAFE,CAAZ;AAIA,cAAM,KAAKtB,OAAL,CAAaQ,eAAb,CAA6BO,GAA7B,CAAN;AACA,aAAKe,IAAL,CAAUxC,yDAAV;AACH;AACJ,KAhDL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAkDUyC,cAlDV;AAAA,2HAkDI,WAAqBV,GAArB,EAAkCC,KAAlC,EAAiD;AAC7C,YAAM,KAAKE,QAAL,CAAcH,GAAd,EAAmBC,KAAK,GAAGxB,gEAAc,CAACwB,KAAD,CAAjB,GAA2BI,SAAnD,CAAN;AACH,KApDL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAsDUM,QAtDV;AAAA,qHAsDI,WAAeX,GAAf,EAAiD;AAC7C,UAAI,CAACA,GAAL,EAAU,OAAOK,SAAP;AAEVL,MAAAA,GAAG,GAAGA,GAAG,CAACI,IAAJ,EAAN;AACA,UAAMV,GAAG,GAAGrB,kEAAA,CAAYH,sEAAZ,EAA6BC,uDAAM,CAAC,GAAD,EAAM,CAAC6B,GAAD,CAAN,CAAnC,CAAZ;AACA,UAAMa,IAAI,SAAS,KAAKlC,OAAL,CAAamC,yBAAb,CAAuCpB,GAAvC,CAAnB;AACA,UAAM,CAACqB,IAAD,EAAOd,KAAP,IAAgB7B,yDAAQ,CAAuByC,IAAI,CAACG,IAA5B,EAAkC,KAAlC,CAA9B;;AACA,UAAIhB,GAAG,KAAKe,IAAZ,EAAkB;AACdE,QAAAA,OAAO,CAACC,KAAR,2CAC2CH,IAD3C,uBAC+Df,GAD/D;AAGA,eAAOK,SAAP;AACH;;AACD,aAAOJ,KAAP;AACH,KApEL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SAsEUkB,cAtEV;AAAA,2HAsEI,WAAqBnB,GAArB,EAAkC;AAC9B,UAAMC,KAAK,SAAS,KAAKU,QAAL,CAAcX,GAAd,CAApB;AACA,aAAOC,KAAK,IAAIzB,gEAAc,CAACyB,KAAD,CAA9B;AACH,KAzEL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA,SA2EUK,WA3EV;AAAA,wHA2EI,WAAkBN,GAAlB,EAA+B;AAC3B,UAAI,CAACA,GAAL,EAAU;AACVA,MAAAA,GAAG,GAAGA,GAAG,CAACI,IAAJ,EAAN;AACA,UAAMV,GAAG,GAAGrB,kEAAA,CAAYH,4EAAZ,EAAgCC,uDAAM,CAAC,GAAD,EAAM,CAAC6B,GAAD,CAAN,CAAtC,CAAZ;AACA,YAAM,KAAKrB,OAAL,CAAaQ,eAAb,CAA6BO,GAA7B,CAAN;AAEA,WAAKe,IAAL,CAAUxC,yDAAV;AACH,KAlFL;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,EAAoCM,oEAApC;AAoFA,yDAAeG,cAAf;;;;;;;;;;;;;;;;;;AChGA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASoD,iBAAT,CAA2BC,KAA3B,EAGG;AACC,MAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAA8BF,KAApC;AACA,MAAM;AAAE7C,IAAAA;AAAF,MAAUsC,iDAAU,CAAqBE,gEAArB,CAA1B;AACA,MAAM;AAAEQ,IAAAA;AAAF,MAAiBhD,GAAvB;AACA,MAAMiD,OAAO,GAAGN,sEAAU,CAAC;AAAEG,IAAAA,YAAF;AAAgBI,IAAAA,oBAAoB,EAAE;AAAtC,GAAD,CAA1B;AACA,MAAMC,IAAI,GAAGZ,2GAAuC,CAACO,YAAD,CAApD,CALD,CAOC;;AACA,MAAI,CAACE,UAAU,CAACI,MAAZ,IAAsBH,OAAtB,aAAsBA,OAAtB,eAAsBA,OAAO,CAAEG,MAAnC,EAA2C,OAAO,IAAP;AAE3C,sBACI,iDAAC,8DAAD;AAAK,gBAAY,EAAC;AAAlB,kBACI,iDAAC,0DAAD;AAAO,YAAQ,EAAC,MAAhB;AAAuB,aAAS,EAAEL;AAAlC,KACK,CAACI,IAAD,iBAAS,8FADd,EAEKA,IAAI,iBAAI,qFAAyBA,IAAI,CAACE,IAA9B,aAFb,eAGI,iDAAC,8DAAD;AAAK,aAAS,EAAC,MAAf;AAAsB,MAAE,EAAE;AAA1B,kBACI,iDAAC,wEAAD;AAAgB,QAAI,EAAC,QAArB;AAA8B,eAAW,EAAE;AAA3C,IADJ,CAHJ,CADJ,CADJ;AAWH;;AAEc,SAASC,YAAT,CAAsBT,KAAtB,EAGZ;AACC,sBACI,iDAAC,8DAAD,qBACI,iDAAC,iBAAD,EAAuBA,KAAvB,CADJ,CADJ;AAKH;;;;;;;;;;;;;;;;;;;;AC9CD;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEe,SAASiB,aAAT,CAAuBjB,KAAvB,EAQZ;AACC,MAAM;AACFkB,IAAAA,IADE;AAEFC,IAAAA,SAFE;AAGFC,IAAAA,WAHE;AAIFC,IAAAA,SAJE;AAKFC,IAAAA,OALE;AAMFC,IAAAA,aANE;AAOFC,IAAAA;AAPE,MAQFxB,KARJ;AASA,MAAM;AAAEyB,IAAAA;AAAF,MAAWJ,SAAjB;AACA,MAAMK,eAAe,GAAGX,sEAAS,CAACM,SAAD,EAAYM,CAAC,IAAIA,CAAC,CAACD,eAAnB,CAAjC;AACA,MAAME,cAAc,GAChBF,eAAe,IAAIf,kHAAnB,IACAe,eAAe,IAAIf,0HAFvB;AAGA,MAAMoB,UAAU,GACZL,eAAe,IAAIf,oHAAnB,IACAe,eAAe,IAAIf,0HAFvB;AAGA,MAAM;AAAEsB,IAAAA;AAAF,MAAajB,2EAAe,EAAlC;AACA,MAAMkB,KAAK,GAAGhB,IAAI,KAAK,IAAT,KAAkB,CAACA,IAAD,IAASe,MAA3B,CAAd;AACA,MAAME,QAAQ,GACVT,eAAe,IAAIf,kHAAnB,IACAe,eAAe,IAAIf,wHAFvB;AAGA,MAAM0B,WAAW,GAAGT,cAAc,iHAC5B,aAAY;AACRN,IAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO;AACP,UAAMD,SAAS,CAACiB,UAAV,EAAN;AACH,GAJ2B,kHAK5B,aAAY;AACRhB,IAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO;AACP,UAAMD,SAAS,CAACkB,OAAV,EAAN;AACH,GAR2B,CAAlC;AASA,MAAMC,IAAI,gBACN,iDAAC,8DAAD;AAAO,SAAK,EAAC,SAAb;AAAuB,WAAO,EAAC,KAA/B;AAAqC,aAAS,EAAE,CAACZ;AAAjD,kBACI,iDAAC,qEAAD;AAAe,QAAI,EAAEP,SAAS,CAACI;AAA/B,IADJ,CADJ;AAKA,MAAMgB,KAAK,GAAGb,cAAc,wBACHH,IADG,oBAER,CAAAF,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEf,IAAf,KAAuBiB,IAFf,CAA5B;AAGA,MAAMiB,KAAK,GAAGd,cAAc,GACtBJ,WAAW,mBACOC,IADP,eADW,GAItBD,WAAW,gBACAC,IADA,YAJjB;AAOA,MAAMkB,SAAS,0BAAwBlB,IAAvC;AACA,MAAMmB,eAAe,GAAG;AACpBvB,IAAAA,SAAS,EAAEI;AADS,GAAxB;AAIA,MAAIS,KAAJ,EACI,oBACI,4EACI,iDAAC,2EAAD;AACI,kBAAYO,KADhB;AAEI,SAAK,EAAEA,KAFX;AAGI,SAAK,EAAErB,WAAW,GAAG,SAAH,GAAe,SAHrC;AAII,aAAS,EAAED,SAJf;AAKI,YAAQ,EAAEgB,QALd;AAMI,iBAAa,EAAEJ,UANnB;AAOI,WAAO,EAAEM;AAPb,KASKG,IATL,CADJ,CADJ,CADJ,KAiBI,oBACI,iDAAC,2DAAD;AACI,aAAS,EAAEG,SADf;AAEI,mBAAe,EAAEC,eAFrB;AAGI,kBAAYH,KAHhB;AAII,SAAK,EAAEA,KAJX;AAKI,QAAI,EAAC,OALT;AAMI,WAAO,EAAErB,WAAW,GAAG,UAAH,GAAgB,WANxC;AAOI,SAAK,EAAEA,WAAW,GAAG,SAAH,GAAe,SAPrC;AAQI,aAAS,EAAED,SARf;AASI,aAAS,EAAEqB,IATf;AAUI,YAAQ,EAAEL,QAVd;AAWI,WAAO,EAAEE;AAXb,KAaKK,KAbL,CADJ;AAiBP;;;;;;;;;;;;;;;;;;;;;;;;ACzGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASO,kBAAT,CAA4BjD,KAA5B,EAIG;AACC,MAAM;AAAE7C,IAAAA;AAAF,MAAUsC,iDAAU,CAAqBE,gEAArB,CAA1B;AACA,MAAM;AAAEsC,IAAAA;AAAF,MAAajB,2EAAe,EAAlC;AACA,MAAM;AAAEkC,IAAAA;AAAF,MAAuCzD,iDAAU,CAACsD,6DAAD,CAAvD;AACA,MAAM;AAAE7B,IAAAA,IAAF;AAAQE,IAAAA,WAAR;AAAqBD,IAAAA;AAArB,MAAmCnB,KAAzC;AACA,MAAM;AAAA,OAACmD,OAAD;AAAA,OAAUC;AAAV,MAAwBP,+CAAQ,CAAC,KAAD,CAAtC;AACA,MAAMX,KAAK,GAAG,CAAChB,IAAD,IAASe,MAAvB;AACA,MAAMU,SAAS,4BAAf;;AAEA,MAAMU,aAAa;AAAA,gHAAG,aAAY;AAC9B,UAAI;AACAD,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA,cAAMjG,GAAG,CAACoF,OAAJ,CAAY,IAAZ,CAAN;AACA,YAAI,CAACpF,GAAG,CAACmG,SAAT,EAAoBJ,gCAAgC;AACvD,OAJD,SAIU;AACNE,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,KARkB;;AAAA,oBAAbC,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAUA,MAAInB,KAAJ,EACI,oBACI,4EACI,iDAAC,0EAAD;AACI,SAAK,EAAE,8BADX;AAEI,SAAK,EAAEd,WAAW,GAAG,SAAH,GAAe,SAFrC;AAGI,aAAS,EAAED,SAHf;AAII,WAAO,EAAEkC,aAJb;AAKI,YAAQ,EAAEF;AALd,kBAOI,iDAAC,kEAAD,OAPJ,CADJ,CADJ,CADJ,KAeI,oBACI,iDAAC,2DAAD;AACI,aAAS,EAAER,SADf;AAEI,SAAK,EAAC,8BAFV;AAGI,QAAI,EAAC,OAHT;AAII,WAAO,EAAEvB,WAAW,GAAG,UAAH,GAAgB,WAJxC;AAKI,SAAK,EAAEA,WAAW,GAAG,SAAH,GAAe,SALrC;AAMI,aAAS,EAAED,SANf;AAOI,aAAS,eAAE,iDAAC,kEAAD,OAPf;AAQI,WAAO,EAAEkC,aARb;AASI,YAAQ,EAAEF;AATd,eADJ;AAeP;;AAEc,SAAStD,cAAT,CAAwBG,KAAxB,EAIZ;AACC,MAAM;AAAE7C,IAAAA;AAAF,MAAUsC,iDAAU,CAAqBE,gEAArB,CAA1B;;AACA,MAAM;AAAEuB,IAAAA;AAAF,MAAoBlB,KAA1B;AAAA,MAAiBuD,IAAjB,4GAA0BvD,KAA1B;;AACA,MAAM;AAAEG,IAAAA;AAAF,MAAiBhD,GAAvB;AACA,MAAMqG,YAAY,GAAGzC,sEAAS,CAAC5D,GAAD,EAAMsG,CAAC,IAAIA,CAAC,CAACD,YAAb,CAA9B;AAEA,MAAI,EAACrD,UAAD,aAACA,UAAD,eAACA,UAAU,CAAEI,MAAb,CAAJ,EAAyB,OAAO,IAAP;AAEzB,SAAOiD,YAAY,gBACf,iDAAC,kBAAD,EAAwBxD,KAAxB,CADe,gBAGf,oGACKG,UAAU,CACNtC,MADJ,CACW6F,EAAE,IAAI,CAACA,EAAE,CAACF,YADrB,EAEI9F,GAFJ,CAEQ2D,SAAS,iBACV,iDAAC,+DAAD;AACI,OAAG,EAAEA,SAAS,CAACI,IADnB;AAEI,aAAS,EAAEJ;AAFf,KAGQkC,IAHR;AAII,QAAI,EAAErC,IAAI,KAAK;AAJnB,KAHP,CADL,CAHJ;AAgBH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7FD;AAEA;AACA;AACA;AAEe,SAAS4C,eAAT,CAAyB9D,KAAzB,EAAsD;AACjE,MAAM;AAAE+D,IAAAA;AAAF,MAAa/D,KAAnB;AACA,MAAMuB,aAAa,GAAGoC,yCAAsB,CAACI,MAAD,CAA5C;AACA,MAAMC,QAAQ,GAAGJ,iCAAc,CAACrC,aAAD,EAAgB,SAAhB,CAA/B;AAEA,sBACI,oBAAC,oCAAD;AAAuB,SAAK,EAAEyC,QAA9B;AAAwC,SAAK,EAAEzC,aAAF,aAAEA,aAAF,uBAAEA,aAAa,CAAEf;AAA9D,IADJ;AAGH;;;;;;;;;;ACdD;CAEA;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASoE,2BAAT,CAAqC5E,KAArC,EAAkE;AAC9D,MAAM;AAAE+D,IAAAA;AAAF,MAAa/D,KAAnB;AACA,MAAM6E,QAAQ,GAAG9D,4BAAS,CAACgD,MAAD,EAASN,CAAC;AAAA;;AAAA,WAChCA,CADgC,aAChCA,CADgC,oCAChCA,CAAC,CAAE7G,OAAH,CAAW,CAAX,CADgC,8CAChC,UAAeiI,QAAf,CAAwBZ,iEAAxB,CADgC;AAAA,GAAV,CAA1B;AAGA,MAAM,CAACc,iBAAD,IAAsBT,qDAAwB,CAAWO,QAAX,CAApD;AACA,MAAIG,KAAK,CAACD,iBAAD,CAAT,EAA8B,OAAO,IAAP;AAE9B,sBACI,oBAAC,mBAAD;AAAM,QAAI,EAAC,OAAX;AAAmB,SAAK,cAAYA,iBAAiB,CAACE,QAAlB,CAA2B,EAA3B;AAApC,IADJ;AAGH;;AAED,SAASC,yBAAT,CAAmClF,KAAnC,EAAgE;AAC5D,MAAM;AAAE+D,IAAAA;AAAF,MAAa/D,KAAnB;AACA,MAAMmF,uBAAuB,GAAGpE,4BAAS,CAACgD,MAAD,EAASN,CAAC;AAAA;;AAAA,WAC/CA,CAD+C,aAC/CA,CAD+C,qCAC/CA,CAAC,CAAE7G,OAAH,CAAW,CAAX,CAD+C,+CAC/C,WAAeiI,QAAf,CAAwBZ,6DAAxB,CAD+C;AAAA,GAAV,CAAzC;AAGA,MAAM,CAACoB,eAAD,IAAoBf,qDAAwB,CAC9Ca,uBAD8C,CAAlD;AAGA,MAAI,CAACE,eAAL,EAAsB,OAAO,IAAP;AAEtB,sBAAO,oBAAC,mBAAD;AAAM,QAAI,EAAC,OAAX;AAAmB,SAAK,EAAEA;AAA1B,IAAP;AACH;;AAED,SAASC,qBAAT,CAA+BtF,KAA/B,EAA4D;AACxD,MAAM;AAAE+D,IAAAA;AAAF,MAAa/D,KAAnB;AACA,MAAMuF,YAAY,GAAGxE,4BAAS,CAACgD,MAAD,EAASN,CAAC;AAAA;;AAAA,WACpCA,CADoC,aACpCA,CADoC,qCACpCA,CAAC,CAAE7G,OAAH,CAAW,CAAX,CADoC,+CACpC,WAAeiI,QAAf,CAAwBZ,2DAAxB,CADoC;AAAA,GAAV,CAA9B;AAGA,MAAM,CAACwB,WAAD,IAAgBnB,qDAAwB,CAAWiB,YAAX,CAA9C;AACA,MAAIP,KAAK,CAACS,WAAD,CAAT,EAAwB,OAAO,IAAP;AACxB,sBAAO,oBAAC,mBAAD;AAAM,QAAI,EAAC,OAAX;AAAmB,SAAK,EAAKA,WAAL;AAAxB,IAAP;AACH;;AAEc,SAASC,gBAAT,CAA0B1F,KAA1B,EASZ;AACC,MAAM;AACF+D,IAAAA,MADE;AAEF4B,IAAAA,YAFE;AAGFC,IAAAA,eAHE;AAIFC,IAAAA,SAJE;AAKFC,IAAAA,YALE;AAMFC,IAAAA,UANE;AAOFC,IAAAA,YAPE;AAQFC,IAAAA;AARE,MASFjG,KATJ;AAUA,MAAMuB,aAAa,GAAGoC,yCAAsB,CAACI,MAAD,CAA5C;AAEA,sBACI,0CACK8B,SAAS,iBAAI,oBAAC,eAAD;AAAiB,UAAM,EAAE9B;AAAzB,IADlB,eAEI,oBAAC,yBAAD;AACI,UAAM,EAAEgC,UAAU,iBAAI,oBAAC,2BAAD;AAAc,YAAM,EAAEhC;AAAtB,MAD1B;AAEI,UAAM,eACF,oBAAC,4BAAD;AACI,YAAM,EAAEA,MADZ;AAEI,eAAS,EAAEkC,SAFf;AAGI,kBAAY,EAAED,YAHlB;AAII,kBAAY,EAAED;AAJlB,MAHR;AAUI,SAAK,eACD,oBAAC,6BAAD;AACI,WAAK,EAAC,aADV;AAEI,eAAS,EAAC,OAFd;AAGI,QAAE,iBACEtB,oCAAmB,CAAClD,aAAD,aAACA,aAAD,uBAACA,aAAa,CAAE2E,EAAhB,CAAnB,IAA0C,EAD5C;AAHN,oBAOI,oBAAC,yBAAD;AAAY,YAAM,EAAEnC;AAApB,MAPJ,CAXR;AAqBI,aAAS,eACL,uDACI,oBAAC,yBAAD;AAAY,aAAO,EAAC,SAApB;AAA8B,kBAAY;AAA1C,OACK,CACGxC,aADH,aACGA,aADH,uBACGA,aAAa,CAAEf,IADlB,EAEGsF,YAAY,IAAI/B,MAAM,CAACoC,QAF1B,EAIItI,MAJJ,CAIWuI,CAAC,IAAI,CAAC,CAACA,CAJlB,EAKIC,IALJ,CAKS,IALT,CADL,CADJ,EASKV,YAAY,IAAIhB,4CAAhB,iBACG,oBAAC,2BAAD;AAA6B,YAAM,EAAEZ;AAArC,MAVR,EAYK4B,YAAY,iBACT,oBAAC,yBAAD;AAA2B,YAAM,EAAE5B;AAAnC,MAbR,EAeK6B,eAAe,iBACZ,oBAAC,qBAAD;AAAuB,YAAM,EAAE7B;AAA/B,MAhBR;AAtBR,IAFJ,CADJ;AAgDH;;;;;;;;;;;;;AC1HD;AAGA;AACA;AAEe,SAASwC,WAAT,CAAqBC,OAArB,EAA6D;AACxE,MAAM;AAAErJ,IAAAA;AAAF,MAAUsC,iDAAU,CAAqBE,gEAArB,CAA1B;AACA,MAAM8G,QAAQ,GAAG1F,sEAAS,CAAC5D,GAAD,EAAMsG,CAAC,IAAI,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEgD,QAAH,CAAYD,OAAZ,MAAwB,EAAnC,EAAuC,CAC7DE,IAAI,CAACC,SAAL,CAAeH,OAAf,CAD6D,CAAvC,CAA1B;AAGA,SAAOC,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZD;AACA;AAEe,SAASI,UAAT,CAAoB7G,KAApB,EAAyC;AACpD,sBACI,oBAAC,sBAAD;AAAS,eAAW,EAAC;AAArB,KAAuCA,KAAvC,gBACI;AAAM,KAAC,EAAC;AAAR,IADJ,CADJ;AAKH;;CCRD;;CAEA;;CAEA;;AACA;AACA;AAQA;AACA;AAEe,SAASc,aAAT,CAAuBd,KAAvB,EAGZ;AACC,MAAM;AAAEyB,IAAAA,IAAF;AAAQN,IAAAA;AAAR,MAAsBnB,KAA5B;;AACA,UAAQyB,IAAR;AACI,SAAKyF,qCAAL;AACA,SAAKE,gCAAL;AACI,0BAAO,oBAAC,kBAAD;AAAS,iBAAS,EAAEjG;AAApB,QAAP;;AACJ,SAAK8F,sCAAL;AACI,0BAAO,oBAAC,wBAAD;AAAe,iBAAS,EAAE9F;AAA1B,QAAP;;AACJ,SAAKgG,mCAAL;AACI,0BAAO,oBAAC,UAAD;AAAY,iBAAS,EAAEhG;AAAvB,QAAP;;AACJ,SAAKkG,sCAAL;AACI,0BAAO,oBAAC,mBAAD;AAAU,iBAAS,EAAElG;AAArB,QAAP;;AACJ;AACI,0BACI,oBAAC,wBAAD;AACI,YAAI,EAAEmG,2CADV;AAEI,iBAAS,EAAEnG;AAFf,QADJ;AAXR;AAkBH;;;;;;;;;;;;;;;;ACzCD;AAEA;AACA;AAEe,SAAST,MAAT,CACXV,KADW,EAKb;AACE,MAAM;AAAE2C,IAAAA,SAAF;AAAaC,IAAAA,eAAb;AAA8BtB,IAAAA;AAA9B,MAAmDtB,KAAzD;AAAA,MAAgDuD,IAAhD,2GAAyDvD,KAAzD;;AACA,MAAM;AAAE0H,IAAAA;AAAF,MAAiBD,yEAAY,EAAnC;AACA,MAAMpF,WAAW,GACb,CAACM,SAAD,IAAc,CAAC+E,UAAf,IAA6B,CAACpG,OAA9B,GACMA,OADN,GAEMqG,EAAE,IAAI;AACFD,IAAAA,UAAU,CAAC/E,SAAD,EAAYC,eAAZ,CAAV;AACAtB,IAAAA,OAAO,CAACqG,EAAD,CAAP;AACH,GANX;AAOA,sBAAO,iDAAC,4DAAD;AAAc,WAAO,EAAEtF;AAAvB,KAAwCkB,IAAxC,EAAP;AACH;;;;;;;;;;;;;ACrBD;AAIe,SAASsE,gBAAT,CACXjL,OADW,EAEXkL,OAFW,EAGXC,IAHW,EAIb;AAAA,MADEA,IACF;AADEA,IAAAA,IACF,GAD+B,EAC/B;AAAA;;AACE,MAAM;AAAA,OAACC,MAAD;AAAA,OAASC;AAAT,MAAsBpF,+CAAQ,CAAIvE,SAAJ,CAApC;AAEAsJ,EAAAA,gDAAS,CAAC,MAAM;AACZ,QAAMM,CAAC,GAAGtL,OAAO,IAAIkL,OAAO,CAAClL,OAAD,CAA5B;AACAqL,IAAAA,SAAS,CAACC,CAAD,CAAT;AACA,WAAO,MAAMA,CAAN,aAAMA,CAAN,uBAAMA,CAAC,CAAEC,OAAH,EAAb;AACH,GAJQ,GAILvL,OAJK,2GAIOmL,IAJP,GAAT,CAHF,CAOyB;;AAEvB,SAAOC,MAAP;AACH","sources":["webpack://jacdac-docs/./node_modules/@mui/icons-material/Bluetooth.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Delete.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Usb.js","webpack://jacdac-docs/./node_modules/@mui/icons-material/Wifi.js","webpack://jacdac-docs/./node_modules/@mui/material/CardActions/cardActionsClasses.js","webpack://jacdac-docs/./node_modules/@mui/material/CardActions/CardActions.js","webpack://jacdac-docs/./jacdac-ts/src/jdom/clients/settingsclient.ts","webpack://jacdac-docs/./src/components/alert/ConnectAlert.tsx","webpack://jacdac-docs/./src/components/buttons/ConnectButton.tsx","webpack://jacdac-docs/./src/components/buttons/ConnectButtons.tsx","webpack://jacdac-docs/./src/components/devices/DeviceCardMedia.tsx","webpack://jacdac-docs/./src/components/devices/DeviceCardHeader.tsx","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/icons/SerialIcon.tsx","webpack://jacdac-docs/./src/components/icons/TransportIcon.tsx","webpack://jacdac-docs/./src/components/ui/Button.tsx","webpack://jacdac-docs/./src/components/useServiceClient.ts"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.71 7.71 12 2h-1v7.59L6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 5.83l1.88 1.88L13 9.59V5.83zm1.88 10.46L13 18.17v-3.76l1.88 1.88z\"\n}), 'Bluetooth');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15 7v4h1v2h-3V5h2l-3-4-3 4h2v8H8v-2.07c.7-.37 1.2-1.08 1.2-1.93 0-1.21-.99-2.2-2.2-2.2-1.21 0-2.2.99-2.2 2.2 0 .85.5 1.56 1.2 1.93V13c0 1.11.89 2 2 2h3v3.05c-.71.37-1.2 1.1-1.2 1.95 0 1.22.99 2.2 2.2 2.2 1.21 0 2.2-.98 2.2-2.2 0-.85-.49-1.58-1.2-1.95V15h3c1.11 0 2-.89 2-2v-2h1V7h-4z\"\n}), 'Usb');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z\"\n}), 'Wifi');\n\nexports.default = _default;","import { generateUtilityClass, generateUtilityClasses } from '@mui/core';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nvar cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"disableSpacing\", \"className\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/core';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getCardActionsUtilityClass } from './cardActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = ownerState => {\n  var {\n    classes,\n    disableSpacing\n  } = ownerState;\n  var slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\n\nvar CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    var {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(_ref => {\n  var {\n    ownerState\n  } = _ref;\n  return _extends({\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  }, !ownerState.disableSpacing && {\n    '& > :not(:first-of-type)': {\n      marginLeft: 8\n    }\n  });\n});\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n\n  var {\n    disableSpacing = false,\n    className\n  } = props,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    disableSpacing\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default CardActions;","import { CHANGE, SettingsCmd } from \"../constants\"\nimport { jdpack, jdunpack } from \"../pack\"\nimport Packet from \"../packet\"\nimport { InPipeReader } from \"../pipes\"\nimport JDService from \"../service\"\nimport { JDServiceClient } from \"../serviceclient\"\nimport { bufferToString, stringToBuffer } from \"../utils\"\n\n/**\n * A settings service client implementation.\n * @category Clients\n */\nexport class SettingsClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        service.registersUseAcks = true\n    }\n\n    async clear() {\n        await this.service.sendCmdAsync(SettingsCmd.Clear)\n    }\n\n    async listKeys(): Promise<string[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.ListKeys),\n            true\n        )\n        const { output } = await inp.readAll()\n        const keys = output.map(pkt => pkt.stringData)\n        return keys.filter(k => !!k)\n    }\n\n    async list(): Promise<{ key: string; value?: Uint8Array }[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.List),\n            true\n        )\n        const { output } = await inp.readAll()\n        return output\n            .map(pkt => {\n                const [key, value] = pkt.jdunpack<[string, Uint8Array]>(\"z b\")\n                return key && { key, value }\n            })\n            .filter(kv => !!kv)\n    }\n\n    async setValue(key: string, value: Uint8Array) {\n        key = key.trim()\n        if (value === undefined) {\n            await this.deleteValue(key)\n        } else {\n            const pkt = Packet.from(\n                SettingsCmd.Set,\n                jdpack(\"z b\", [key, value])\n            )\n            await this.service.sendPacketAsync(pkt)\n            this.emit(CHANGE)\n        }\n    }\n\n    async setStringValue(key: string, value: string) {\n        await this.setValue(key, value ? stringToBuffer(value) : undefined)\n    }\n\n    async getValue(key: string): Promise<Uint8Array> {\n        if (!key) return undefined\n\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Get, jdpack(\"s\", [key]))\n        const resp = await this.service.sendCmdAwaitResponseAsync(pkt)\n        const [rkey, value] = jdunpack<[string, Uint8Array]>(resp.data, \"z b\")\n        if (key !== rkey) {\n            console.error(\n                `device returned different key, got \"${rkey}\", expected \"${key}\"`\n            )\n            return undefined\n        }\n        return value\n    }\n\n    async getStringValue(key: string) {\n        const value = await this.getValue(key)\n        return value && bufferToString(value)\n    }\n\n    async deleteValue(key: string) {\n        if (!key) return\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Delete, jdpack(\"s\", [key]))\n        await this.service.sendPacketAsync(pkt)\n\n        this.emit(CHANGE)\n    }\n}\nexport default SettingsClient\n","// tslint:disable-next-line: no-submodule-imports\nimport { Box } from \"@mui/material\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { NoSsr } from \"@mui/material\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\nimport useDevices from \"../hooks/useDevices\"\n\nfunction NoSsrConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    const { serviceClass, closeable } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useDevices({ serviceClass, ignoreInfrastructure: true })\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={closeable}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                <Box component=\"span\" ml={2}>\n                    <ConnectButtons full=\"always\" transparent={true} />\n                </Box>\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import React from \"react\"\nimport Button from \"../ui/Button\"\nimport Transport, {\n    ConnectionState,\n} from \"../../../jacdac-ts/src/jdom/transport/transport\"\nimport { Badge } from \"@mui/material\"\nimport IconButtonWithProgress from \"../ui/IconButtonWithProgress\"\nimport TransportIcon from \"../icons/TransportIcon\"\nimport useChange from \"../../jacdac/useChange\"\nimport useMediaQueries from \"../hooks/useMediaQueries\"\n\nexport default function ConnectButton(props: {\n    full?: boolean\n    className?: string\n    transparent?: boolean\n    specification?: jdspec.DeviceSpec\n    transport: Transport\n    typeInTitle?: boolean\n    onClick?: () => void\n}) {\n    const {\n        full,\n        className,\n        transparent,\n        transport,\n        onClick,\n        specification,\n        typeInTitle,\n    } = props\n    const { type } = transport\n    const connectionState = useChange(transport, t => t.connectionState)\n    const showDisconnect =\n        connectionState == ConnectionState.Connected ||\n        connectionState == ConnectionState.Disconnecting\n    const inProgress =\n        connectionState == ConnectionState.Connecting ||\n        connectionState == ConnectionState.Disconnecting\n    const { mobile } = useMediaQueries()\n    const small = full !== true && (!full || mobile)\n    const disabled =\n        connectionState != ConnectionState.Connected &&\n        connectionState != ConnectionState.Disconnected\n    const handleClick = showDisconnect\n        ? async () => {\n              onClick?.()\n              await transport.disconnect()\n          }\n        : async () => {\n              onClick?.()\n              await transport.connect()\n          }\n    const icon = (\n        <Badge color=\"primary\" variant=\"dot\" invisible={!showDisconnect}>\n            <TransportIcon type={transport.type} />\n        </Badge>\n    )\n    const label = showDisconnect\n        ? `disconnect from ${type}`\n        : `connect to ${specification?.name || type}`\n    const title = showDisconnect\n        ? typeInTitle\n            ? `disconnect ${type}`\n            : `disconnect`\n        : typeInTitle\n        ? `connect ${type}`\n        : `connect`\n    const trackName = `transport.connect.${type}`\n    const trackProperties = {\n        transport: type,\n    }\n\n    if (small)\n        return (\n            <span>\n                <IconButtonWithProgress\n                    aria-label={label}\n                    title={label}\n                    color={transparent ? \"inherit\" : \"primary\"}\n                    className={className}\n                    disabled={disabled}\n                    indeterminate={inProgress}\n                    onClick={handleClick}\n                >\n                    {icon}\n                </IconButtonWithProgress>\n            </span>\n        )\n    else\n        return (\n            <Button\n                trackName={trackName}\n                trackProperties={trackProperties}\n                aria-label={label}\n                title={label}\n                size=\"small\"\n                variant={transparent ? \"outlined\" : \"contained\"}\n                color={transparent ? \"inherit\" : \"primary\"}\n                className={className}\n                startIcon={icon}\n                disabled={disabled}\n                onClick={handleClick}\n            >\n                {title}\n            </Button>\n        )\n}\n","import React, { useContext, useState } from \"react\"\nimport ConnectButton from \"./ConnectButton\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport useMediaQueries from \"../hooks/useMediaQueries\"\nimport useChange from \"../../jacdac/useChange\"\nimport Button from \"../ui/Button\"\nimport AppContext from \"../AppContext\"\nimport JacdacIcon from \"../icons/JacdacIcon\"\n\nfunction DisconnectedButton(props: {\n    full?: \"disconnected\" | \"always\"\n    className?: string\n    transparent?: boolean\n}) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { mobile } = useMediaQueries()\n    const { toggleShowConnectTransportDialog } = useContext(AppContext)\n    const { full, transparent, className } = props\n    const [working, setWorking] = useState(false)\n    const small = !full || mobile\n    const trackName = `transport.connect.start`\n\n    const handleConnect = async () => {\n        try {\n            setWorking(true)\n            await bus.connect(true)\n            if (!bus.connected) toggleShowConnectTransportDialog()\n        } finally {\n            setWorking(false)\n        }\n    }\n\n    if (small)\n        return (\n            <span>\n                <IconButtonWithTooltip\n                    title={\"Connect to a physical device\"}\n                    color={transparent ? \"inherit\" : \"primary\"}\n                    className={className}\n                    onClick={handleConnect}\n                    disabled={working}\n                >\n                    <JacdacIcon />\n                </IconButtonWithTooltip>\n            </span>\n        )\n    else\n        return (\n            <Button\n                trackName={trackName}\n                title=\"Connect to a physical device\"\n                size=\"small\"\n                variant={transparent ? \"outlined\" : \"contained\"}\n                color={transparent ? \"inherit\" : \"primary\"}\n                className={className}\n                startIcon={<JacdacIcon />}\n                onClick={handleConnect}\n                disabled={working}\n            >\n                Connect\n            </Button>\n        )\n}\n\nexport default function ConnectButtons(props: {\n    full?: \"disconnected\" | \"always\"\n    className?: string\n    transparent?: boolean\n}) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { full, ...rest } = props\n    const { transports } = bus\n    const disconnected = useChange(bus, _ => _.disconnected)\n\n    if (!transports?.length) return null\n\n    return disconnected ? (\n        <DisconnectedButton {...props} />\n    ) : (\n        <>\n            {transports\n                .filter(tr => !tr.disconnected)\n                .map(transport => (\n                    <ConnectButton\n                        key={transport.type}\n                        transport={transport}\n                        {...rest}\n                        full={full === \"always\"}\n                    />\n                ))}\n        </>\n    )\n}\n","import React from \"react\"\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\"\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\"\nimport useDeviceImage from \"./useDeviceImage\"\nimport CardMediaWithSkeleton from \"../ui/CardMediaWithSkeleton\"\n\nexport default function DeviceCardMedia(props: { device: JDDevice }) {\n    const { device } = props\n    const specification = useDeviceSpecification(device)\n    const imageUrl = useDeviceImage(specification, \"preview\")\n\n    return (\n        <CardMediaWithSkeleton image={imageUrl} title={specification?.name} />\n    )\n}\n","import { ControlReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { CardHeader, Chip, Typography } from \"@mui/material\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Link } from \"gatsby-theme-material-ui\"\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\"\nimport DeviceActions from \"./DeviceActions\"\nimport DeviceName from \"./DeviceName\"\nimport DeviceCardMedia from \"./DeviceCardMedia\"\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\"\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/spec\"\nimport DeviceAvatar from \"./DeviceAvatar\"\nimport useChange from \"../../jacdac/useChange\"\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\"\n\nfunction DeviceProductIdentifierChip(props: { device: JDDevice }) {\n    const { device } = props\n    const register = useChange(device, _ =>\n        _?.service(0)?.register(ControlReg.ProductIdentifier)\n    )\n    const [productIdentifier] = useRegisterUnpackedValue<[number]>(register)\n    if (isNaN(productIdentifier)) return null\n\n    return (\n        <Chip size=\"small\" label={`pid: 0x${productIdentifier.toString(16)}`} />\n    )\n}\n\nfunction DeviceFirmwareVersionChip(props: { device: JDDevice }) {\n    const { device } = props\n    const firmwareVersionRegister = useChange(device, _ =>\n        _?.service(0)?.register(ControlReg.FirmwareVersion)\n    )\n    const [firmwareVersion] = useRegisterUnpackedValue<[string]>(\n        firmwareVersionRegister\n    )\n    if (!firmwareVersion) return null\n\n    return <Chip size=\"small\" label={firmwareVersion} />\n}\n\nfunction DeviceTemperatureChip(props: { device: JDDevice }) {\n    const { device } = props\n    const tempRegister = useChange(device, _ =>\n        _?.service(0)?.register(ControlReg.McuTemperature)\n    )\n    const [temperature] = useRegisterUnpackedValue<[number]>(tempRegister)\n    if (isNaN(temperature)) return null\n    return <Chip size=\"small\" label={`${temperature}°`} />\n}\n\nexport default function DeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showDeviceId?: boolean\n    showFirmware?: boolean\n    showTemperature?: boolean\n    showMedia?: boolean\n    showSettings?: boolean\n    showReset?: boolean\n}) {\n    const {\n        device,\n        showFirmware,\n        showTemperature,\n        showMedia,\n        showDeviceId,\n        showAvatar,\n        showSettings,\n        showReset,\n    } = props\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <>\n            {showMedia && <DeviceCardMedia device={device} />}\n            <CardHeader\n                avatar={showAvatar && <DeviceAvatar device={device} />}\n                action={\n                    <DeviceActions\n                        device={device}\n                        showReset={showReset}\n                        showSettings={showSettings}\n                        hideIdentity={showAvatar}\n                    />\n                }\n                title={\n                    <Link\n                        color=\"textPrimary\"\n                        underline=\"hover\"\n                        to={`/devices/${\n                            identifierToUrlPath(specification?.id) || \"\"\n                        }`}\n                    >\n                        <DeviceName device={device} />\n                    </Link>\n                }\n                subheader={\n                    <>\n                        <Typography variant=\"caption\" gutterBottom>\n                            {[\n                                specification?.name,\n                                showDeviceId && device.deviceId,\n                            ]\n                                .filter(s => !!s)\n                                .join(\", \")}\n                        </Typography>\n                        {showFirmware && Flags.diagnostics && (\n                            <DeviceProductIdentifierChip device={device} />\n                        )}\n                        {showFirmware && (\n                            <DeviceFirmwareVersionChip device={device} />\n                        )}\n                        {showTemperature && (\n                            <DeviceTemperatureChip device={device} />\n                        )}\n                    </>\n                }\n            />\n        </>\n    )\n}\n","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import { SvgIcon, SvgIconProps } from \"@mui/material\"\nimport React from \"react\"\n\nexport default function SerialIcon(props: SvgIconProps) {\n    return (\n        <SvgIcon titleAccess=\"Serial port\" {...props}>\n            <path d=\"M20.605,7.172l-17.21,-0c0,-0 -0.299,0.052 -0.507,0.097c-0.993,0.213 -1.745,1.03 -1.873,2.039l-0.009,0.126c-0.03,0.586 0.059,1.173 0.261,1.724c0.47,1.283 1.396,3.811 1.489,4.066l0.083,0.187l-0.004,-0.009c0.371,0.802 1.174,1.315 2.057,1.315l14.216,-0c0.883,-0 1.686,-0.513 2.057,-1.315l0.079,-0.178c0.093,-0.255 1.02,-2.783 1.489,-4.066c0.201,-0.547 0.29,-1.129 0.262,-1.711l-0.009,-0.139c-0.129,-1.009 -0.88,-1.826 -1.874,-2.039l-0.397,-0.085c-0.035,-0.008 -0.072,-0.012 -0.11,-0.012Zm-17.156,1.023l17.102,-0l0.346,0.074c0.566,0.121 0.994,0.584 1.072,1.156l0.005,0.068c0.02,0.452 -0.048,0.896 -0.201,1.314l-1.483,4.049l-0.054,0.119c-0.204,0.439 -0.644,0.719 -1.128,0.719l-14.216,0c-0.484,0 -0.925,-0.281 -1.129,-0.72l-0.053,-0.118l-1.483,-4.049c-0.154,-0.422 -0.223,-0.871 -0.2,-1.32l0.004,-0.062c0.078,-0.572 0.506,-1.035 1.072,-1.156l0.346,-0.074Zm0.326,6.805l0.002,0.008l-0.002,-0.008Zm6.531,-2.571c0.47,-0 0.852,0.382 0.852,0.852c-0,0.47 -0.382,0.852 -0.852,0.852c-0.471,0 -0.853,-0.382 -0.853,-0.852c0,-0.47 0.382,-0.852 0.853,-0.852Zm-3.389,-0c0.47,-0 0.852,0.382 0.852,0.852c-0,0.47 -0.382,0.852 -0.852,0.852c-0.471,0 -0.853,-0.382 -0.853,-0.852c0,-0.47 0.382,-0.852 0.853,-0.852Zm6.777,-0c0.471,-0 0.853,0.382 0.853,0.852c-0,0.47 -0.382,0.852 -0.853,0.852c-0.47,0 -0.852,-0.382 -0.852,-0.852c0,-0.47 0.382,-0.852 0.852,-0.852Zm3.389,-0c0.471,-0 0.853,0.382 0.853,0.852c-0,0.47 -0.382,0.852 -0.853,0.852c-0.47,0 -0.852,-0.382 -0.852,-0.852c0,-0.47 0.382,-0.852 0.852,-0.852Zm-11.861,-2.674c0.471,0 0.853,0.382 0.853,0.853c-0,0.47 -0.382,0.852 -0.853,0.852c-0.47,-0 -0.852,-0.382 -0.852,-0.852c0,-0.471 0.382,-0.853 0.852,-0.853Zm3.389,0c0.471,0 0.852,0.382 0.852,0.853c0,0.47 -0.381,0.852 -0.852,0.852c-0.47,-0 -0.852,-0.382 -0.852,-0.852c-0,-0.471 0.382,-0.853 0.852,-0.853Zm3.389,0c0.47,0 0.852,0.382 0.852,0.853c0,0.47 -0.382,0.852 -0.852,0.852c-0.47,-0 -0.852,-0.382 -0.852,-0.852c-0,-0.471 0.382,-0.853 0.852,-0.853Zm3.389,0c0.47,0 0.852,0.382 0.852,0.853c0,0.47 -0.382,0.852 -0.852,0.852c-0.47,-0 -0.852,-0.382 -0.852,-0.852c-0,-0.471 0.382,-0.853 0.852,-0.853Zm3.389,0c0.47,0 0.852,0.382 0.852,0.853c0,0.47 -0.382,0.852 -0.852,0.852c-0.471,-0 -0.852,-0.382 -0.852,-0.852c-0,-0.471 0.381,-0.853 0.852,-0.853Zm-16.752,-0.26l-0.003,0.029l0.003,-0.029Z\" />\n        </SvgIcon>\n    )\n}\n","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport UsbIcon from \"@mui/icons-material/Usb\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport BluetoothIcon from \"@mui/icons-material/Bluetooth\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport WifiIcon from \"@mui/icons-material/Wifi\"\nimport {\n    BLUETOOTH_TRANSPORT,\n    PACKETIO_TRANSPORT,\n    SERIAL_TRANSPORT,\n    USB_TRANSPORT,\n    WEBSOCKET_TRANSPORT,\n    VIRTUAL_DEVICE_NODE_NAME,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport KindIcon from \"../KindIcon\"\nimport SerialIcon from \"./SerialIcon\"\n\nexport default function TransportIcon(props: {\n    type: string\n    className?: string\n}) {\n    const { type, className } = props\n    switch (type) {\n        case PACKETIO_TRANSPORT:\n        case USB_TRANSPORT:\n            return <UsbIcon className={className} />\n        case BLUETOOTH_TRANSPORT:\n            return <BluetoothIcon className={className} />\n        case SERIAL_TRANSPORT:\n            return <SerialIcon className={className} />\n        case WEBSOCKET_TRANSPORT:\n            return <WifiIcon className={className} />\n        default:\n            return (\n                <KindIcon\n                    kind={VIRTUAL_DEVICE_NODE_NAME}\n                    className={className}\n                />\n            )\n    }\n}\n","import React from \"react\"\nimport { ButtonProps } from \"@mui/material\"\nimport { Button as GatsbyButton } from \"gatsby-theme-material-ui\"\nimport useAnalytics, { EventProperties } from \"../hooks/useAnalytics\"\n\nexport default function Button(\n    props: {\n        trackName?: string\n        trackProperties?: EventProperties\n    } & ButtonProps\n) {\n    const { trackName, trackProperties, onClick, ...rest } = props\n    const { trackEvent } = useAnalytics()\n    const handleClick =\n        !trackName || !trackEvent || !onClick\n            ? onClick\n            : ev => {\n                  trackEvent(trackName, trackProperties)\n                  onClick(ev)\n              }\n    return <GatsbyButton onClick={handleClick} {...rest} />\n}\n","import { useEffect, useState } from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport { JDServiceClient } from \"../../jacdac-ts/src/jdom/serviceclient\"\n\nexport default function useServiceClient<T extends JDServiceClient>(\n    service: JDService,\n    factory: (service: JDService) => T,\n    deps: React.DependencyList = []\n) {\n    const [client, setClient] = useState<T>(undefined)\n\n    useEffect(() => {\n        const c = service && factory(service)\n        setClient(c)\n        return () => c?.unmount()\n    }, [service, ...deps]) // don't use factory in cache!\n\n    return client\n}\n"],"names":["CHANGE","SettingsCmd","jdpack","jdunpack","Packet","InPipeReader","JDServiceClient","bufferToString","stringToBuffer","SettingsClient","service","registersUseAcks","clear","sendCmdAsync","Clear","listKeys","inp","bus","sendPacketAsync","openCommand","ListKeys","output","readAll","keys","map","pkt","stringData","filter","k","list","List","key","value","kv","setValue","trim","undefined","deleteValue","from","Set","emit","setStringValue","getValue","Get","resp","sendCmdAwaitResponseAsync","rkey","data","console","error","getStringValue","Delete","Box","Alert","React","useContext","serviceSpecificationFromClassIdentifier","JacdacContext","NoSsr","ConnectButtons","useDevices","NoSsrConnectAlert","props","serviceClass","closeable","transports","devices","ignoreInfrastructure","spec","length","name","ConnectAlert","Button","ConnectionState","Badge","IconButtonWithProgress","TransportIcon","useChange","useMediaQueries","ConnectButton","full","className","transparent","transport","onClick","specification","typeInTitle","type","connectionState","t","showDisconnect","Connected","Disconnecting","inProgress","Connecting","mobile","small","disabled","Disconnected","handleClick","disconnect","connect","icon","label","title","trackName","trackProperties","useState","IconButtonWithTooltip","AppContext","JacdacIcon","DisconnectedButton","toggleShowConnectTransportDialog","working","setWorking","handleConnect","connected","rest","disconnected","_","tr","useDeviceSpecification","useDeviceImage","CardMediaWithSkeleton","DeviceCardMedia","device","imageUrl","ControlReg","CardHeader","Chip","Typography","Link","useRegisterUnpackedValue","DeviceActions","DeviceName","identifierToUrlPath","DeviceAvatar","Flags","DeviceProductIdentifierChip","register","ProductIdentifier","productIdentifier","isNaN","toString","DeviceFirmwareVersionChip","firmwareVersionRegister","FirmwareVersion","firmwareVersion","DeviceTemperatureChip","tempRegister","McuTemperature","temperature","DeviceCardHeader","showFirmware","showTemperature","showMedia","showDeviceId","showAvatar","showSettings","showReset","id","deviceId","s","join","diagnostics","useServices","options","services","JSON","stringify","SvgIcon","SerialIcon","UsbIcon","BluetoothIcon","WifiIcon","BLUETOOTH_TRANSPORT","PACKETIO_TRANSPORT","SERIAL_TRANSPORT","USB_TRANSPORT","WEBSOCKET_TRANSPORT","VIRTUAL_DEVICE_NODE_NAME","KindIcon","GatsbyButton","useAnalytics","trackEvent","ev","useEffect","useServiceClient","factory","deps","client","setClient","c","unmount"],"sourceRoot":""}