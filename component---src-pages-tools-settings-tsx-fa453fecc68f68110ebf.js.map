{"version":3,"file":"component---src-pages-tools-settings-tsx-fa453fecc68f68110ebf.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./jacdac-ts/src/jdom/clients/settingsclient.ts","webpack://jacdac-docs/./src/components/alert/ConnectAlert.tsx","webpack://jacdac-docs/./src/components/hooks/useServices.ts","webpack://jacdac-docs/./src/components/ui/SwitchWithLabel.tsx","webpack://jacdac-docs/./src/components/useServiceClient.ts","webpack://jacdac-docs/./src/components/SettingsCard.tsx","webpack://jacdac-docs/./src/components/hooks/useLocationSearchParam.ts","webpack://jacdac-docs/./src/pages/tools/settings.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","import { CHANGE, SettingsCmd } from \"../constants\"\nimport { jdpack, jdunpack } from \"../pack\"\nimport Packet from \"../packet\"\nimport { InPipeReader } from \"../pipes\"\nimport JDService from \"../service\"\nimport { JDServiceClient } from \"../serviceclient\"\nimport { bufferToString, stringToBuffer } from \"../utils\"\n\n/**\n * A settings service client implementation.\n * @category Clients\n */\nexport class SettingsClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        service.registersUseAcks = true\n    }\n\n    async clear() {\n        await this.service.sendCmdAsync(SettingsCmd.Clear)\n    }\n\n    async listKeys(): Promise<string[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.ListKeys),\n            true\n        )\n        const { output } = await inp.readAll()\n        const keys = output.map(pkt => pkt.stringData)\n        return keys.filter(k => !!k)\n    }\n\n    async list(): Promise<{ key: string; value?: Uint8Array }[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(\n            inp.openCommand(SettingsCmd.List),\n            true\n        )\n        const { output } = await inp.readAll()\n        return output\n            .map(pkt => {\n                const [key, value] = pkt.jdunpack<[string, Uint8Array]>(\"z b\")\n                return key && { key, value }\n            })\n            .filter(kv => !!kv)\n    }\n\n    async setValue(key: string, value: Uint8Array) {\n        key = key.trim()\n        if (value === undefined) {\n            await this.deleteValue(key)\n        } else {\n            const pkt = Packet.from(\n                SettingsCmd.Set,\n                jdpack(\"z b\", [key, value])\n            )\n            await this.service.sendPacketAsync(pkt)\n            this.emit(CHANGE)\n        }\n    }\n\n    async setStringValue(key: string, value: string) {\n        await this.setValue(key, value ? stringToBuffer(value) : undefined)\n    }\n\n    async getValue(key: string): Promise<Uint8Array> {\n        if (!key) return undefined\n\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Get, jdpack(\"s\", [key]))\n        const resp = await this.service.sendCmdAwaitResponseAsync(pkt)\n        const [rkey, value] = jdunpack<[string, Uint8Array]>(resp.data, \"z b\")\n        if (key !== rkey) {\n            console.error(\n                `device returned different key, got \"${rkey}\", expected \"${key}\"`\n            )\n            return undefined\n        }\n        return value\n    }\n\n    async getStringValue(key: string) {\n        const value = await this.getValue(key)\n        return value && bufferToString(value)\n    }\n\n    async deleteValue(key: string) {\n        if (!key) return\n        key = key.trim()\n        const pkt = Packet.from(SettingsCmd.Delete, jdpack(\"s\", [key]))\n        await this.service.sendPacketAsync(pkt)\n\n        this.emit(CHANGE)\n    }\n}\nexport default SettingsClient\n","// tslint:disable-next-line: no-submodule-imports\nimport { Box } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { NoSsr } from \"@material-ui/core\"\nimport useChange from \"../../jacdac/useChange\"\nimport ConnectButtons from \"../buttons/ConnectButtons\"\n\nfunction NoSsrConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    const { serviceClass, closeable } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useChange(bus, b =>\n        b.devices({ serviceClass, ignoreInfrastructure: true })\n    )\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={closeable}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                <Box component=\"span\" ml={2}>\n                    <ConnectButtons full={true} transparent={true} />\n                </Box>\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: {\n    serviceClass?: number\n    closeable?: boolean\n}) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import { useContext } from \"react\"\nimport DeviceFilter from \"../../../jacdac-ts/src/jdom/filters/devicefilter\"\nimport ServiceFilter from \"../../../jacdac-ts/src/jdom/filters/servicefilter\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\n\nexport default function useServices(options?: ServiceFilter & DeviceFilter) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const services = useChange(bus, _ => _?.services(options) || [], [\n        JSON.stringify(options),\n    ])\n    return services\n}\n","import { FormControlLabel, Switch, SwitchProps } from \"@material-ui/core\"\nimport React, { ReactNode } from \"react\"\n\nexport default function SwitchWithLabel(\n    props: { label: ReactNode } & SwitchProps\n) {\n    const { label, ...rest } = props\n    return <FormControlLabel control={<Switch {...rest} />} label={label} />\n}\n","import { useEffect, useState } from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport { JDServiceClient } from \"../../jacdac-ts/src/jdom/serviceclient\"\n\nexport default function useServiceClient<T extends JDServiceClient>(\n    service: JDService,\n    factory: (service: JDService) => T,\n    deps: React.DependencyList = []\n) {\n    const [client, setClient] = useState<T>(undefined)\n\n    useEffect(() => {\n        const c = service && factory(service)\n        setClient(c)\n        return () => c?.unmount()\n    }, [service, ...deps]) // don't use factory in cache!\n\n    return client\n}\n","import {\n    Card,\n    CardActions,\n    CardContent,\n    Grid,\n    TextField,\n} from \"@material-ui/core\"\nimport React, { ChangeEvent, useCallback, useContext, useState } from \"react\"\nimport JDService from \"../../jacdac-ts/src/jdom/service\"\nimport DeviceCardHeader from \"./devices/DeviceCardHeader\"\nimport useServiceClient from \"./useServiceClient\"\nimport SettingsClient from \"../../jacdac-ts/src/jdom/clients/settingsclient\"\nimport { useChangeAsync } from \"../jacdac/useChange\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@material-ui/icons/Delete\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport AddIcon from \"@material-ui/icons/Add\"\nimport CmdButton from \"./CmdButton\"\nimport { useId } from \"react-use-id-hook\"\nimport LoadingProgress from \"./ui/LoadingProgress\"\nimport SwitchWithLabel from \"./ui/SwitchWithLabel\"\nimport { bufferToString } from \"../../jacdac-ts/src/jdom/utils\"\nimport { randomDeviceId } from \"../../jacdac-ts/src/jdom/random\"\nimport { Button } from \"gatsby-material-ui-components\"\nimport ServiceManagerContext from \"./ServiceManagerContext\"\n\nfunction SettingRow(props: {\n    client: SettingsClient\n    name: string\n    value?: string\n    mutable: boolean\n    showSecrets: boolean\n    autoKey: boolean\n}) {\n    const { client, name, value, mutable, autoKey } = props\n    const isSecret = name[0] == \"$\"\n    const displayName = isSecret ? name.slice(1) : name\n    const handleComponentDelete = async () => {\n        await client.deleteValue(name)\n    }\n    const keyId = useId()\n    const valueId = useId()\n    const nameError = \"\"\n    const valueError = \"\"\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={1}>\n                {!autoKey && (\n                    <Grid item>\n                        <TextField\n                            id={keyId}\n                            error={!!nameError}\n                            variant=\"outlined\"\n                            label=\"key\"\n                            helperText={nameError}\n                            value={displayName}\n                            disabled={true}\n                        />\n                    </Grid>\n                )}\n                <Grid item xs>\n                    <TextField\n                        id={valueId}\n                        fullWidth={true}\n                        error={!!valueError}\n                        variant=\"outlined\"\n                        helperText={valueError}\n                        value={isSecret ? \"...\" : value}\n                        disabled={true}\n                    />\n                </Grid>\n                {mutable && (\n                    <Grid item>\n                        <CmdButton\n                            trackName=\"settings.delete\"\n                            title=\"Delete settings\"\n                            onClick={handleComponentDelete}\n                            icon={<DeleteIcon />}\n                        />\n                    </Grid>\n                )}\n            </Grid>\n        </Grid>\n    )\n}\n\nfunction AddSettingRow(props: {\n    client: SettingsClient\n    keyPrefix: string\n    showSecrets: boolean\n    autoKey: boolean\n}) {\n    const { client, keyPrefix, showSecrets, autoKey } = props\n    const [name, setName] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const [secret, setSecret] = useState(showSecrets)\n    const keyId = useId()\n    const valueId = useId()\n\n    const handleNameChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setName(ev.target.value.trim())\n    }\n    const handleValueChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setValue(ev.target.value)\n    }\n    const handleChecked = (ev, checked: boolean) => {\n        setSecret(checked)\n    }\n    const handleAdd = async mounted => {\n        const keyName = autoKey ? randomDeviceId() : name\n        const key = `${secret ? \"$\" : \"\"}${keyPrefix || \"\"}${keyName}`\n        await client.setStringValue(key, value)\n        if (!mounted()) return\n        setName(\"\")\n        setValue(\"\")\n        setSecret(showSecrets)\n    }\n    const keyError = \"\"\n    const valueError = \"\"\n\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={1} alignContent=\"center\">\n                {!autoKey && (\n                    <Grid item>\n                        <TextField\n                            id={keyId}\n                            error={!!keyError}\n                            variant=\"outlined\"\n                            label=\"Add key\"\n                            helperText={keyError}\n                            value={name}\n                            onChange={handleNameChange}\n                        />\n                    </Grid>\n                )}\n                <Grid item xs>\n                    <TextField\n                        id={valueId}\n                        fullWidth={true}\n                        error={!!valueError}\n                        variant=\"outlined\"\n                        label=\"value\"\n                        helperText={valueError}\n                        value={value}\n                        onChange={handleValueChange}\n                    />\n                </Grid>\n                {showSecrets && (\n                    <Grid item>\n                        <SwitchWithLabel\n                            checked={secret}\n                            onChange={handleChecked}\n                            label=\"Secret\"\n                        />\n                    </Grid>\n                )}\n                <Grid item>\n                    <CmdButton\n                        trackName=\"settings.add\"\n                        variant=\"contained\"\n                        disabled={\n                            (!autoKey && !name) || !!keyError || !!valueError\n                        }\n                        title=\"Add setting\"\n                        onClick={handleAdd}\n                        icon={<AddIcon />}\n                    />\n                </Grid>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default function SettingsCard(props: {\n    service: JDService\n    mutable?: boolean\n    keyPrefix?: string\n    showSecrets?: boolean\n    autoKey?: boolean\n}) {\n    const { service, mutable, keyPrefix = \"\", showSecrets, autoKey } = props\n    const { fileStorage } = useContext(ServiceManagerContext)\n    const factory = useCallback(srv => new SettingsClient(srv), [])\n    const client = useServiceClient(service, factory)\n    const values = useChangeAsync(\n        client,\n        async c => {\n            const keys = await c?.list()\n            return keys\n                ?.filter(({ key }) => !keyPrefix || key.startsWith(keyPrefix))\n                .map(({ key, value }) => ({\n                    key,\n                    value: bufferToString(value),\n                }))\n        },\n        [keyPrefix]\n    )\n    const handleClear = async () => await client?.clear()\n    const handleExport = () =>\n        fileStorage.saveText(\n            \"settings.json\",\n            JSON.stringify(values || {}, null, 2)\n        )\n\n    const secrets = values?.filter(value => showSecrets && value.key[0] === \"$\")\n    const publics = values?.filter(value => value.key[0] !== \"$\")\n\n    if (!client) return <LoadingProgress /> // wait till loaded\n\n    return (\n        <Card>\n            <DeviceCardHeader device={service.device} showAvatar={true} />\n            <CardContent>\n                <Grid container spacing={2}>\n                    {mutable && (\n                        <AddSettingRow\n                            client={client}\n                            keyPrefix={keyPrefix}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                            key=\"add\"\n                        />\n                    )}\n                    {publics?.map(({ key, value }) => (\n                        <SettingRow\n                            key={key}\n                            name={key}\n                            value={value}\n                            client={client}\n                            mutable={mutable}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    ))}\n                    {!!secrets?.length && (\n                        <Grid item xs={12}>\n                            Secrets\n                        </Grid>\n                    )}\n                    {secrets?.map(({ key, value }) => (\n                        <SettingRow\n                            key={key}\n                            name={key}\n                            value={value}\n                            client={client}\n                            mutable={mutable}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    ))}\n                </Grid>\n            </CardContent>\n            <CardActions>\n                <Grid container spacing={1} direction=\"row\">\n                    {mutable && (\n                        <Grid item>\n                            <CmdButton\n                                variant=\"outlined\"\n                                trackName=\"settings.clearall\"\n                                title=\"Clear all settings\"\n                                icon={<DeleteIcon />}\n                                onClick={handleClear}\n                            >\n                                Clear\n                            </CmdButton>\n                        </Grid>\n                    )}\n                    <Grid item>\n                        <Button\n                            variant=\"outlined\"\n                            title=\"export\"\n                            disabled={!values}\n                            onClick={handleExport}\n                        >\n                            Export\n                        </Button>\n                    </Grid>\n                </Grid>\n            </CardActions>\n        </Card>\n    )\n}\n","import { useMemo } from \"react\"\n\nexport function useLocationSearchParamString(key: string): string {\n    return useMemo(() => {\n        if (typeof window !== \"undefined\") {\n            const url = new URL(window.location.href)\n            return url.searchParams.get(key)\n        }\n        return undefined\n    }, [key])\n}\n\nexport function useLocationSearchParamBoolean(key: string): boolean {\n    return useMemo(() => {\n        if (typeof window !== \"undefined\") {\n            const url = new URL(window.location.href)\n            const v = url.searchParams.get(key)\n            if (v) return v === \"1\" || v === \"true\"\n            // empty value\n            return url.searchParams.has(key)\n        }\n        return undefined\n    }, [key])\n}\n","import React from \"react\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { Grid } from \"@material-ui/core\"\nimport { SRV_SETTINGS } from \"../../../jacdac-ts/src/jdom/constants\"\nimport ConnectAlert from \"../../components/alert/ConnectAlert\"\nimport SettingsCard from \"../../components/SettingsCard\"\nimport useServices from \"../../components/hooks/useServices\"\nimport useServiceProviderFromServiceClass from \"../../components/hooks/useServiceProviderFromServiceClass\"\nimport {\n    useLocationSearchParamBoolean,\n    useLocationSearchParamString,\n} from \"../../components/hooks/useLocationSearchParam\"\n\nexport default function Page() {\n    // spin up provider on demand\n    useServiceProviderFromServiceClass(SRV_SETTINGS)\n    const services = useServices({ serviceClass: SRV_SETTINGS })\n    const keyPrefix = useLocationSearchParamString(\"prefix\")\n    const autoKey = useLocationSearchParamBoolean(\"autokey\")\n    const showSecrets = !keyPrefix\n\n    return (\n        <>\n            <h1>Devices Settings</h1>\n            <p>\n                Configure settings in\n                <Link to=\"/services/settings/\">settings</Link> services.\n            </p>\n            <ConnectAlert serviceClass={SRV_SETTINGS} />\n            <Grid container spacing={1}>\n                {services.map(service => (\n                    <Grid key={service.id} item xs={12} lg={6}>\n                        <SettingsCard\n                            service={service}\n                            mutable={true}\n                            keyPrefix={keyPrefix}\n                            showSecrets={showSecrets}\n                            autoKey={autoKey}\n                        />\n                    </Grid>\n                ))}\n            </Grid>\n            <h2>Advanced</h2>\n            <p>\n                You can use various URL argument to modify the behavior of this\n                page.\n            </p>\n            <ul>\n                <li>\n                    <code>prefix=JD</code>, will prefix and filter keys with{\" \"}\n                    <code>JD</code>. In this mode, secrets are disabled.\n                </li>\n                <li>\n                    <code>autokey</code>, will automatically generate random\n                    keys for entries\n                </li>\n            </ul>\n        </>\n    )\n}\n"],"names":["CHANGE","SettingsCmd","jdpack","jdunpack","Packet","InPipeReader","JDServiceClient","bufferToString","stringToBuffer","SettingsClient","service","registersUseAcks","clear","sendCmdAsync","Clear","listKeys","inp","bus","sendPacketAsync","openCommand","ListKeys","output","readAll","keys","map","pkt","stringData","filter","k","list","List","key","value","kv","setValue","trim","undefined","deleteValue","from","Set","emit","setStringValue","getValue","Get","resp","sendCmdAwaitResponseAsync","rkey","data","console","error","getStringValue","Delete","Box","Alert","React","useContext","serviceSpecificationFromClassIdentifier","JacdacContext","NoSsr","useChange","ConnectButtons","NoSsrConnectAlert","props","serviceClass","closeable","transports","devices","b","ignoreInfrastructure","spec","length","name","ConnectAlert","useServices","options","services","_","JSON","stringify","FormControlLabel","Switch","SwitchWithLabel","label","rest","useEffect","useState","useServiceClient","factory","deps","client","setClient","c","unmount","Card","CardActions","CardContent","Grid","TextField","useCallback","DeviceCardHeader","useChangeAsync","DeleteIcon","AddIcon","CmdButton","useId","LoadingProgress","randomDeviceId","Button","ServiceManagerContext","SettingRow","mutable","autoKey","isSecret","displayName","slice","handleComponentDelete","keyId","valueId","nameError","valueError","AddSettingRow","keyPrefix","showSecrets","setName","secret","setSecret","handleNameChange","ev","target","handleValueChange","handleChecked","checked","handleAdd","mounted","keyName","keyError","SettingsCard","fileStorage","srv","values","startsWith","handleClear","handleExport","saveText","secrets","publics","device","useMemo","useLocationSearchParamString","window","url","URL","location","href","searchParams","get","useLocationSearchParamBoolean","v","has","Link","SRV_SETTINGS","useServiceProviderFromServiceClass","Page","id"],"sourceRoot":""}